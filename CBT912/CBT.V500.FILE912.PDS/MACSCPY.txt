./ ADD NAME=ASMMSP   0100-14178-14178-0020-00001-00001-00000-MACSCPY
         COPY ZSTRMAC  Z390 STRUCTURED PROGRAMMING MACROS
./ ADD NAME=DEFLMOD  0100-14178-14178-0020-00001-00001-00000-MACSCPY
&LMOD SETA 1
./ ADD NAME=ZDEFINE  0100-14178-14178-0020-00058-00058-00000-MACSCPY
.*********************************************************************
.* Copyright 2007 Automated Software Tools Corporation               *
.* This source code is part of z390 assembler/emulator package       *
.* The z390 package is distributed under GNU general public license  *
.* Author - Don Higgins                                              *
.* Date   - 04/19/07                                                 *
.*********************************************************************
.* 09/02/07 RPI 681 DEFINE GLOBALS FOR DEFINE AND ZDEFINE MACROS
.* 09/23/07 RPI 704 ADD CONTROL INTERVAL SIZE FOR LINEAR SUPPORT
.*********************************************************************
.*
.* DEFINE GLOBAL DATA FOR Z390 VSAM CATALOG DEFINITION TABLE (VCDT)
.*
         GBLC  &CATALOG          CATALOG NAME
         GBLB  &ERROR            SET IF ANY DEFINE ERRORS
.*
.* CLUSTER GLOBAL DATA
.*
         GBLA  &CLR_TOT          TOTAL CLR BASE CLUSTERS DEFINED
         GBLC  &CLR_NAME(100)    NAMES OF BASE CLUSTERS
         GBLC  &CLR_TYPE(100)    TYPE ESDS, RRDS, KSDS, OR LDS
         GBLA  &CLR_CI(100)      OPTIONAL CI SIZE (DEFAULT 0)
         GBLB  &CLR_VREC(100)    VARIABLE LENGTH RECORDS (ELSE FIXED)
         GBLB  &CLR_REUSE(100)   ERASE ALL DATA FOR REUSE AT OPEN
         GBLB  &CLR_KSDS(100)    KSDS KEY SEQUENCED
         GBLB  &CLR_RRDS(100)    RRDS RELATIVE RECORD
         GBLB  &CLR_ESDS(100)    ESDS ENTRY SEQUENCED
         GBLB  &CLR_LDS(100)     LDS  LINEAR
         GBLA  &CLR_LAVG(100)    AVERAGE RECORD LENGTH
         GBLA  &CLR_LMAX(100)    MAX OR FIXED RECORD LENGTH
         GBLA  &CLR_KLEN(100)    KSDS PRIMARY KEY LENGTH
         GBLA  &CLR_KOFF(100)    KSDS PRIMARY KEY OFFSET
         GBLC  &CLR_VES(100)     OPTIONAL VES DSNAME DEFAULT NAME.VES
         GBLC  &CLR_VX0(100)     OPTIONAL VX0 DSNAME DEFAULT NAME.VX0
         GBLA  &CLR_AIX_TOT(100) TOTAL AIX UPGRADES FOR THIS CLUSTER
.*
.* AIX GLOBAL DATA
.*
         GBLA  &AIX_TOT          TOTAL AIX INDEXES DEFINED
         GBLC  &AIX_NAME(100)    NAME OF KSDS ALTERNATE INDEX
         GBLC  &AIX_RELATE(100)  NAME OF RELATED BASE CLUSTER
         GBLB  &AIX_REUSE(100)   ERASE ASLL DATA FOR AIX AT OPEN
         GBLB  &AIX_UNIQUEKEY(100) INFORCE UNIQUE AIX KEYS
         GBLB  &AIX_UPGRADE(100) UPDATE AIX ON BASE CHANGES
         GBLA  &AIX_KLEN(100)    AIX KEY LENGTH IN RELATED BASE CLUSTER
         GBLA  &AIX_KOFF(100)    AIX KEY OFFSET IN RELATED BASE CLUSTER
         GBLC  &AIX_VXN(100)     OPTIONAL VXN DSNAME DEFAULT NAME.VXN
.*
.* PATH GLOBAL DATA
.*
         GBLA  &PTH_TOT          TOTAL PATHS DEFINED
         GBLC  &PTH_NAME(100)    NAME OF ALTERNATE PATH
         GBLC  &PTH_ENTRY(100)   NAME OF AIX OR BASE CLUSTER
         GBLB  &PTH_AIXP(100)    USE AIX PATH ENTRY VS PRIMARY KEY
         GBLB  &PTH_AIXU(100)    UPDATE AIX'S ON BASE CHANGES
.*
.* END OF ZDEFINE.CPY
.*
./ ADD NAME=ZSTRGBL  0100-14178-14178-0020-00048-00048-00000-MACSCPY
.********************************************************************
.*             AUTHOR.   DON HIGGINS.
.*             DATE.     09/23/08.
.*             REMARKS.  SHARED GLOBAL VARIABLES FOR ZSTRMAC SPMS
.********************************************************************
.* 09/23/08 RPI 909 upgrade to use ZSTRMAC SPE's and extend compat.
.* 01/30/10 RPI 1139 NOALLOW REQUIRES SDT FOR GBL ARRAYS
.********************************************************************
.*
.*  DEFINE SHARED CONDTION CODES FOR USE IN SPM OPERANDS
.*
         ZSTREQU
.*
.*  SHARED LEVEL CONTROL FOR IF, DO, SELECT, AND CASENTRY
.*
         GBLA &ZSTR_LVL      CURRENT LEVEL OF NESTING
         GBLA &ZSTR_MAX_LVL  MAX LEVEL OF NESTING
&ZSTR_MAX_LVL SETA 100
         GBLC &ZSTR_LVL_TYPE(100) IF,DO,SELECT,CASENTRY
         GBLA &ZSTR_LVL_TCNT(100) TYPE  COUNTER
         GBLA &ZSTR_LVL_BCNT(100) BLOCK COUNTER
         GBLB &ZSTR_LVL_ELSE(100) ELSE BLOCK DEFINED
         GBLB &ZSTR_LVL_TEND(100) END LABEL REQUESTED
.*
.*  IF, ELSEIF, ELSE, ENDIF
.*
         GBLA  &ZSTR_AIF_CNT                AIF COUNTER
.*
.*  DO, ENDDO
.*
         GBLA  &ZSTR_DO_CNT
.*
.*  SELECT, WHEN, OTHRWISE, ENDSEL
.*
         GBLA  &ZSTR_SEL_CNT             SELECT COUNTER
         GBLC  &ZSTR_SEL_OP(100)   SELECT OPCODE ('' IF NONE)
         GBLC  &ZSTR_SEL_FLD(100)  SELECT FIELD
         GBLC  &ZSTR_SEL_CMP(100)  SELECT COMPARE TYPE
.*
.*  CASENTRY, CASE, ENDCASE
.*
         GBLA &ZSTR_CASE_CNT                 CASENTRY COUNTER
         GBLA &ZSTR_CASE_LAST_INDEX          LAST CASE INDEX VALUE
         GBLC &ZSTR_CASE_REG(100)  REG WITH INDEX 1-N
         GBLA &ZSTR_CASE_MAX(100)  MAX CASE INDEX 1-N VALUE
.*
.*  END OF ZSTRGBL.CPY
.*
./ ADD NAME=ZSTRMAC  0100-14178-14178-0020-00021-00021-00000-MACSCPY
.********************************************************************
.* ZSTRMAC - Z390 STRUCTRUED PROGRAMMING MACROS
.********************************************************************
.* 05/16/06 DSH RPI 316 UPDATED FOR COMPATIBILITY
.* 09/27/08 DSH RPI 909 UPDATED USING SPE STRUCTURED MACRO CODE
.********************************************************************
.* ORIGINAL MACROS WRITTEN BY DON HIGGINS IN 1974 AT FLORIDA POWER
.* SEE ACM SIGPLAN ARTICLE PUBLISHED IN FEBRUARY 1975
.* ORIGINAL MACROS CONTRIBUTED TO SHARE SPLA LIBRARY IN LATE 1970'S
.* ORIGINAL MACROS RETRIEVED FROM CBT OVERFLOW TAPE 178:
.*   http://www.cbttape.org/covdowns.htm
.* THE ZSTRMAC MACROS HAVE BEEN UPDATED TO BE A COMPATIBLE
.* SUBSET OF IBM HLASM TOOLKIT MACROS BASED ON SHARE PRESENTATION
.* VISIT FOLLOWING SITE FOR LATEST DOCUMENTATION AND LINKS:
.*   www.z390.org/z390_STRMAC_Structured_Macro_Support.mac
.********************************************************************
.* THE ZSTRMAC SPE SPM MACROS ARE IN z390\mac
.* THE HLASM COMPATIBLE TRANSLATED VERSIONS ARE IN z390\mac\spm
.* THE COMMAND SPMTRAN.BAT CAN BE USED TO RETRANSLATE THEM.
.* SEE rt\test\TESTSPM1.MLC REGRESSION TEST
.********************************************************************
