//USERIDR JOB USERIDR,ABC,CLASS=V,MSGCLASS=Z,REGION=0M,NOTIFY=USERID
/*JOBPARM LINES=1000
//*
//*
//*=====================================================================
//*
//* BEFORE RUNNING THIS JOB, DON'T FORGET TO ISSUE THE FOLLOWING
//* COMMANDS :
//*
//* C USERID XXXX ALL
//*
//* WHERE XXXX IS YOUR TSO USERID
//*
//* C HLQ YYYY ALL
//*
//* WHERE YYYY IS THE HLQ OF TXT2XML
//*
//*=====================================================================
//*
//*
//*---------------------------------------------------------------------
//* FIRST WRONG TEST : NO PARAMETERS SPECIFIED ==> EXIT
//*---------------------------------------------------------------------
//TEST01KO EXEC PGM=IKJEFT1B,DYNAMNBR=50,COND=(16,LT)
//SYSEXEC  DD DISP=SHR,DSN=HLQ.EXEC
//SYSPRINT DD SYSOUT=*
//SYSTSPRT DD SYSOUT=*
//SYSTSIN  DD *
TXT2XML
//*---------------------------------------------------------------------
//* SECOND WRONG TEST : COBOL AND TEXT FILES HAVE BEEN PERMUTED
//* NO VALID COBOL COPYBOOK ==> EXIT
//*---------------------------------------------------------------------
//TEST02KO EXEC PGM=IKJEFT1B,DYNAMNBR=50,COND=(16,LT)
//SYSEXEC  DD DISP=SHR,DSN=HLQ.EXEC
//SYSPRINT DD SYSOUT=*
//SYSTSPRT DD SYSOUT=*
//COB      DD DSN=HLQ.SAMPLE.TXT(TEXT01),DISP=SHR
//TXT      DD DSN=HLQ.SAMPLE.COB(COBOL01),DISP=SHR
//XML      DD DSN=HLQ.SAMPLE.XML(EMPTY),DISP=SHR
//SYSTSIN  DD *
TXT2XML +
   TXT DD:TXT +
   COB DD:COB +
   XML DD:XML +
   FORMAT XML VERBOSE
//*---------------------------------------------------------------------
//* THIRD WRONG TEST : COMPUTED LENGTH OF COBOL COPY BOOK DIFFERS FROM
//* LENGTH OF INPUT TEXT FILE ==> EXIT
//*---------------------------------------------------------------------
//TEST03KO EXEC PGM=IKJEFT1B,DYNAMNBR=50,COND=(16,LT)
//SYSEXEC  DD DISP=SHR,DSN=HLQ.EXEC
//SYSPRINT DD SYSOUT=*
//SYSTSPRT DD SYSOUT=*
//TXT      DD DSN=HLQ.SAMPLE.TXT(TEXT01),DISP=SHR
//COB      DD DSN=HLQ.SAMPLE.COB(COBOL02),DISP=SHR
//XML      DD DSN=HLQ.SAMPLE.XML(EMPTY),DISP=SHR
//SYSTSIN  DD *
TXT2XML +
   TXT DD:TXT +
   COB DD:COB +
   XML DD:XML +
   FORMAT XML VERBOSE
//*---------------------------------------------------------------------
//* FOURTH WRONG TEST : BAD DATATYPE DURING XML TO TXT CONVERSION
//* ACCORDING TO THE COBOL COPYBOOK ==> EXIT
//*
//* DON'T CHANGE PROGRAM FROM IKJEFT01 TO IKJEFT1B PLEASE ||||||||
//*
//*---------------------------------------------------------------------
//TEST04KO EXEC PGM=IKJEFT01,DYNAMNBR=50,COND=(16,LT)
//SYSEXEC  DD DISP=SHR,DSN=HLQ.EXEC
//SYSPRINT DD SYSOUT=*
//SYSTSPRT DD SYSOUT=*
//TXT1     DD DSN=HLQ.SAMPLE.TXT(TEXT03),DISP=SHR
//COB1     DD DSN=HLQ.SAMPLE.COB(COBOL01),DISP=SHR
//XML1     DD DSN=HLQ.SAMPLE.XML(XML02),DISP=SHR
//TXT2     DD DSN=HLQ.SAMPLE.TXT(EMPTY),DISP=SHR
//SYSTSIN  DD *
TXT2XML +
   TXT DD:TXT1 +
   COB DD:COB1 +
   XML DD:XML1 +
   FORMAT XML

TXT2XML +
   TXT DD:TXT2 +
   COB DD:COB1 +
   XML DD:XML1 +
   FORMAT TXT VERBOSE

//*---------------------------------------------------------------------
//* FITH BAD TEST : CONVERSION FROM AN XML FILE TO AN TEXT FILE
//* USING COBOL COPYBOOK WITH A DTD PARAMETER
//*---------------------------------------------------------------------
//TEST05KO EXEC PGM=IKJEFT1B,DYNAMNBR=50,COND=(16,LT)
//SYSEXEC  DD DISP=SHR,DSN=HLQ.EXEC
//SYSPRINT DD SYSOUT=*
//SYSTSPRT DD SYSOUT=*
//TXT      DD DSN=HLQ.SAMPLE.TXT(BINARY),DISP=SHR
//COB      DD DSN=HLQ.SAMPLE.COB(BINARY),DISP=SHR
//XML      DD DSN=HLQ.SAMPLE.XML(BINARY),DISP=SHR
//SYSTSIN  DD *
TXT2XML +
   TXT DD:TXT +
   COB DD:COB +
   XML DD:XML +
   FORMAT TXT DTD INTERNAL VERBOSE
//*---------------------------------------------------------------------
//* FIRST GOOD TEST : CONVERSION FROM TEXT TO XML USING COBOL COPYBOOK
//*---------------------------------------------------------------------
//TEST01OK EXEC PGM=IKJEFT1B,DYNAMNBR=50,COND=(16,LT)
//SYSEXEC  DD DISP=SHR,DSN=HLQ.EXEC
//SYSPRINT DD SYSOUT=*
//SYSTSPRT DD SYSOUT=*
//TXT      DD DSN=HLQ.SAMPLE.TXT(TEXT01),DISP=SHR
//COB      DD DSN=HLQ.SAMPLE.COB(COBOL01),DISP=SHR
//XML      DD DSN=HLQ.SAMPLE.XML(XML01),DISP=SHR
//DTD      DD DSN=HLQ.SAMPLE.DTD(XML01),DISP=SHR
//SYSTSIN  DD *
TXT2XML +
   TXT DD:TXT +
   COB DD:COB +
   XML DD:XML +
   FORMAT XML DTD DD:DTD PREFIX COBOL_ VERBOSE
//*---------------------------------------------------------------------
//PRINT01  EXEC PGM=IEBGENER,COND=(16,LT)
//SYSUT1   DD DSN=HLQ.SAMPLE.XML(XML01),DISP=SHR
//SYSUT2   DD SYSOUT=*
//SYSPRINT DD SYSOUT=*
//SYSIN    DD DUMMY
//*---------------------------------------------------------------------
//* SECOND GOOD TEST : CONVERSION FROM XML TO TEXT USING COBOL COPYBOOK
//*---------------------------------------------------------------------
//TEST02OK EXEC PGM=IKJEFT1B,DYNAMNBR=50,COND=(16,LT)
//SYSEXEC  DD DISP=SHR,DSN=HLQ.EXEC
//SYSPRINT DD SYSOUT=*
//SYSTSPRT DD SYSOUT=*
//TXT      DD DSN=HLQ.SAMPLE.TXT(TEXT02),DISP=SHR
//COB      DD DSN=HLQ.SAMPLE.COB(COBOL01),DISP=SHR
//XML      DD DSN=HLQ.SAMPLE.XML(XML01),DISP=SHR
//SYSTSIN  DD *
TXT2XML +
   TXT DD:TXT +
   COB DD:COB +
   XML DD:XML +
   FORMAT TXT PREFIX COBOL_ VERBOSE
//*---------------------------------------------------------------------
//PRINT02  EXEC PGM=IEBGENER,COND=(16,LT)
//SYSUT1   DD DSN=HLQ.SAMPLE.TXT(TEXT02),DISP=SHR
//SYSUT2   DD SYSOUT=*
//SYSPRINT DD SYSOUT=*
//SYSIN    DD DUMMY
//*---------------------------------------------------------------------
//* THIRD GOOD TEST : CONVERSION FROM AN XML FILE COMING FROM INTERNET
//* TO TEXT USING COBOL COPYBOOK WITH ESCAPING CHARACTERS AND CDATA
//*---------------------------------------------------------------------
//TEST03OK EXEC PGM=IKJEFT1B,DYNAMNBR=50,COND=(16,LT)
//SYSEXEC  DD DISP=SHR,DSN=HLQ.EXEC
//SYSPRINT DD SYSOUT=*
//SYSTSPRT DD SYSOUT=*
//TXT      DD DSN=HLQ.SAMPLE.TXT(FORMULA),DISP=SHR
//COB      DD DSN=HLQ.SAMPLE.COB(FORMULA),DISP=SHR
//XML      DD DSN=HLQ.SAMPLE.XML(FORMULA),DISP=SHR
//SYSTSIN  DD *
TXT2XML +
   TXT DD:TXT +
   COB DD:COB +
   XML DD:XML +
   FORMAT TXT VERBOSE
//*---------------------------------------------------------------------
//PRINT03  EXEC PGM=IEBGENER,COND=(16,LT)
//SYSUT1   DD DSN=HLQ.SAMPLE.TXT(FORMULA),DISP=SHR
//SYSUT2   DD SYSOUT=*
//SYSPRINT DD SYSOUT=*
//SYSIN    DD DUMMY
//*---------------------------------------------------------------------
//* FOURTH GOOD TEST : CONVERSION FROM AN XML FILE COMING FROM INTERNET
//* TO TEXT USING COBOL COPYBOOK WITH MULTILINE CONTENT
//*---------------------------------------------------------------------
//TEST04OK EXEC PGM=IKJEFT1B,DYNAMNBR=50,COND=(16,LT)
//SYSEXEC  DD DISP=SHR,DSN=HLQ.EXEC
//SYSPRINT DD SYSOUT=*
//SYSTSPRT DD SYSOUT=*
//TXT      DD DSN=HLQ.SAMPLE.TXT(DATABASE),DISP=SHR
//COB      DD DSN=HLQ.SAMPLE.COB(DATABASE),DISP=SHR
//XML      DD DSN=HLQ.SAMPLE.XML(DATABASE),DISP=SHR
//SYSTSIN  DD *
TXT2XML +
   TXT DD:TXT +
   COB DD:COB +
   XML DD:XML +
   FORMAT TXT VERBOSE
//*---------------------------------------------------------------------
//PRINT04  EXEC PGM=IEBGENER,COND=(16,LT)
//SYSUT1   DD DSN=HLQ.SAMPLE.TXT(DATABASE),DISP=SHR
//SYSUT2   DD SYSOUT=*
//SYSPRINT DD SYSOUT=*
//SYSIN    DD DUMMY
//*---------------------------------------------------------------------
//* FITH GOOD TEST : CONVERSION FROM AN XML FILE COMING FROM INTERNET
//* TO TEXT USING COBOL COPYBOOK WITH INLINE DTD
//*---------------------------------------------------------------------
//TEST05OK EXEC PGM=IKJEFT1B,DYNAMNBR=50,COND=(16,LT)
//SYSEXEC  DD DISP=SHR,DSN=HLQ.EXEC
//SYSPRINT DD SYSOUT=*
//SYSTSPRT DD SYSOUT=*
//TXT      DD DSN=HLQ.SAMPLE.TXT(TABLE),DISP=SHR
//COB      DD DSN=HLQ.SAMPLE.COB(TABLE),DISP=SHR
//XML      DD DSN=HLQ.SAMPLE.XML(TABLE),DISP=SHR
//SYSTSIN  DD *
TXT2XML +
   TXT DD:TXT +
   COB DD:COB +
   XML DD:XML +
   FORMAT TXT VERBOSE
//*---------------------------------------------------------------------
//PRINT05  EXEC PGM=IEBGENER,COND=(16,LT)
//SYSUT1   DD DSN=HLQ.SAMPLE.TXT(TABLE),DISP=SHR
//SYSUT2   DD SYSOUT=*
//SYSPRINT DD SYSOUT=*
//SYSIN    DD DUMMY
//*---------------------------------------------------------------------
//* SIXTH GOOD TEST : CONVERSION FROM AN XML FILE COMING FROM INTERNET
//* TO TEXT USING COBOL COPYBOOK WITH ATTRIBUTES AND MULTILINE CONTENT
//*---------------------------------------------------------------------
//TEST06OK EXEC PGM=IKJEFT1B,DYNAMNBR=50,COND=(16,LT)
//SYSEXEC  DD DISP=SHR,DSN=HLQ.EXEC
//SYSPRINT DD SYSOUT=*
//SYSTSPRT DD SYSOUT=*
//TXT      DD DSN=HLQ.SAMPLE.TXT(BOOK),DISP=SHR
//COB      DD DSN=HLQ.SAMPLE.COB(BOOK),DISP=SHR
//XML      DD DSN=HLQ.SAMPLE.XML(BOOK),DISP=SHR
//SYSTSIN  DD *
TXT2XML +
   TXT DD:TXT +
   COB DD:COB +
   XML DD:XML +
   FORMAT TXT VERBOSE
//*---------------------------------------------------------------------
//PRINT06  EXEC PGM=IEBGENER,COND=(16,LT)
//SYSUT1   DD DSN=HLQ.SAMPLE.TXT(BOOK),DISP=SHR
//SYSUT2   DD SYSOUT=*
//SYSPRINT DD SYSOUT=*
//SYSIN    DD DUMMY
//*---------------------------------------------------------------------
//* SEVENTH GOOD TEST : CONVERSION FROM AN XML FILE COMING FROM INTERNET
//* TO TEXT USING COBOL COPYBOOK WITHOUT ATTRIBUTES BUT WITH MISSING TAGS
//* AND COBOL PREFIX                                                    S
//*---------------------------------------------------------------------
//TEST07OK EXEC PGM=IKJEFT1B,DYNAMNBR=50,COND=(16,LT)
//SYSEXEC  DD DISP=SHR,DSN=HLQ.EXEC
//SYSPRINT DD SYSOUT=*
//SYSTSPRT DD SYSOUT=*
//TXT      DD DSN=HLQ.SAMPLE.TXT(MISSING),DISP=SHR
//COB      DD DSN=HLQ.SAMPLE.COB(COBOL01),DISP=SHR
//XML      DD DSN=HLQ.SAMPLE.XML(MISSING),DISP=SHR
//SYSTSIN  DD *
TXT2XML +
    TXT DD:TXT COB DD:COB XML DD:XML FORMAT TXT PREFIX XML_ VERBOSE
//*---------------------------------------------------------------------
//PRINT07  EXEC PGM=IEBGENER,COND=(16,LT)
//SYSUT1   DD DSN=HLQ.SAMPLE.TXT(MISSING),DISP=SHR
//SYSUT2   DD SYSOUT=*
//SYSPRINT DD SYSOUT=*
//SYSIN    DD DUMMY
//*---------------------------------------------------------------------
//* EIGHTH GOOD TEST : CONVERSION FROM AN TEXT FILE TO AN XML FILE
//* USING COBOL COPYBOOK WITH BINARY, PACKED DECIMAL AND NUMERIC DATA   S
//*---------------------------------------------------------------------
//TEST08OK EXEC PGM=IKJEFT1B,DYNAMNBR=50,COND=(16,LT)
//SYSEXEC  DD DISP=SHR,DSN=HLQ.EXEC
//SYSPRINT DD SYSOUT=*
//SYSTSPRT DD SYSOUT=*
//TXT      DD DSN=HLQ.SAMPLE.TXT(BINARY),DISP=SHR
//COB      DD DSN=HLQ.SAMPLE.COB(BINARY),DISP=SHR
//XML      DD DSN=HLQ.SAMPLE.XML(BINARY),DISP=SHR
//DTD      DD DSN=HLQ.SAMPLE.DTD(BINARY),DISP=SHR
//SYSTSIN  DD *
TXT2XML +
    TXT DD:TXT COB DD:COB XML DD:XML FORMAT XML DTD DD:DTD VERBOSE
//*---------------------------------------------------------------------
//PRINT08  EXEC PGM=IEBGENER,COND=(16,LT)
//SYSUT1   DD DSN=HLQ.SAMPLE.XML(BINARY),DISP=SHR
//SYSUT2   DD SYSOUT=*
//SYSPRINT DD SYSOUT=*
//SYSIN    DD DUMMY
//*---------------------------------------------------------------------
//* NINETH GOOD TEST : CONVERSION FROM AN XML FILE TO A TEXT FILE
//* USING COBOL COPYBOOK WITH BINARY, PACKED DECIMAL AND NUMERIC DATA   S
//*---------------------------------------------------------------------
//TEST09OK EXEC PGM=IKJEFT1B,DYNAMNBR=50,COND=(16,LT)
//SYSEXEC  DD DISP=SHR,DSN=HLQ.EXEC
//SYSPRINT DD SYSOUT=*
//SYSTSPRT DD SYSOUT=*
//TXT      DD DSN=HLQ.SAMPLE.TXT(BINARY),DISP=SHR
//COB      DD DSN=HLQ.SAMPLE.COB(BINARY),DISP=SHR
//XML      DD DSN=HLQ.SAMPLE.XML(BINARY),DISP=SHR
//SYSTSIN  DD *
TXT2XML +
    TXT DD:TXT COB DD:COB XML DD:XML FORMAT TXT VERBOSE
//*---------------------------------------------------------------------
//* TENTH GOOD TEST : CONVERSION FROM AN TEXT FILE TO AN XML FILE
//* USING COBOL COPYBOOK WITH BINARY, PACKED DECIMAL AND NUMERIC DATA   S
//* AND WITH AN INTERNAL DTD                                            S
//*---------------------------------------------------------------------
//TEST10OK EXEC PGM=IKJEFT1B,DYNAMNBR=50,COND=(16,LT)
//SYSEXEC  DD DISP=SHR,DSN=HLQ.EXEC
//SYSPRINT DD SYSOUT=*
//SYSTSPRT DD SYSOUT=*
//TXT      DD DSN=HLQ.SAMPLE.TXT(BINARY),DISP=SHR
//COB      DD DSN=HLQ.SAMPLE.COB(BINARY),DISP=SHR
//XML      DD DSN=HLQ.SAMPLE.XML(BINARY),DISP=SHR
//SYSTSIN  DD *
TXT2XML +
    TXT DD:TXT COB DD:COB XML DD:XML FORMAT XML DTD INTERNAL VERBOSE
//*---------------------------------------------------------------------
//PRINT10  EXEC PGM=IEBGENER,COND=(16,LT)
//SYSUT1   DD DSN=HLQ.SAMPLE.XML(BINARY),DISP=SHR
//SYSUT2   DD SYSOUT=*
//SYSPRINT DD SYSOUT=*
//SYSIN    DD DUMMY
