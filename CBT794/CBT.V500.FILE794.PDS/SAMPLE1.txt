/* REXX */

"ISPEXEC LIBDEF ISPLLIB DATASET ID ('DFGAETA.LOAD') UNCOND"

SAY 'CREATING TWO LINKED LISTS'
RC=RXMEM('CREATE','L1')
RC=RXMEM('CREATE','L2')

SAY 'ADDING TO END OF LIST'
DO I=1 TO 15
  RC=RXMEM('ADD','L1','ITEMS IN LIST L1 #'I)
END

SAY 'ADDING TO END OF LIST USING STEM VARIABLE'
L2.1='ITEM CREATED IN STEM L2 #1'
L2.2='ITEM CREATED IN STEM L2 #2'
L2.3='ITEM CREATED IN STEM L2 #3'
L2.4='ITEM CREATED IN STEM L2 #4'
L2.5='ITEM CREATED IN STEM L2 #5'
L2.6='ITEM CREATED IN STEM L2 #6'
A=RXMEM('LOADSTEM','L2',D2C(1,4),D2C(6,4))

SAY 'COUNTING ITEMS IN LINKED LIST'
SAY 'ITEMS IN L1='RXMEM('COUNT','L1')
SAY 'ITEMS IN L2='RXMEM('COUNT','L2')

SAY 'LISTING L1 LINKED LIST'
DO I=1 TO RXMEM('COUNT','L1')
  SS=STRIP(RXMEM('GET','L1',D2C(I,4)),'T')
  SAY 'ITEM #'I' STR='SS
END

SAY 'LISTING L2 LINKED LIST'
DO I=1 TO RXMEM('COUNT','L2')
  SS=STRIP(RXMEM('GET','L2',D2C(I,4)),'T')
  SAY 'ITEM #'I' STR='SS
END

SAY 'DELETING SOME ITEMS FROM L2'
A=RXMEM('DEL','L2',D2C(2,4))
SAY 'LISTING L2 LINKED LIST AFTER DELETE ACTION'
DO I=1 TO RXMEM('COUNT','L2')
  SS=STRIP(RXMEM('GET','L2',D2C(I,4)),'T')
  SAY 'ITEM #'I' STR='SS
END

SAY 'DELETING SOME ITEMS FROM L2'
A=RXMEM('DEL','L2',D2C(4,4))
SAY 'LISTING L2 LINKED LIST AFTER DELETE ACTION'
DO I=1 TO RXMEM('COUNT','L2')
  SS=STRIP(RXMEM('GET','L2',D2C(I,4)),'T')
  SAY 'ITEM #'I' STR='SS
END

SAY 'INSERTING TWO ELEMENTS TO L1'
A=RXMEM('INS','L1',D2C(3,4),'ADDITIONAL ITEM #1')
A=RXMEM('INS','L1',D2C(4,4),'ADDITIONAL ITEM #2')
DO I=1 TO RXMEM('COUNT','L1')
  SS=STRIP(RXMEM('GET','L1',D2C(I,4)),'T')
  SAY 'ITEM #'I' STR='SS
END

A=RXMEM('DESTROY','L1')
A=RXMEM('DESTROY','L2')

EXIT
