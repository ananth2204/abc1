//CBSPUFI JOB ($2919BA,BIN070,FSH334,DEPT19BA),'C/C++ COMPILER',
//       NOTIFY=&SYSUID,MSGCLASS=H,MSGLEVEL=(1,1),TIME=5
//*
//* GLOBAL VARIABLES
//*
// SET     M=BSPUFI                          C/C++ MEMBER NAME
// SET     L=&M                              LOAD MODULE NAME
// SET     D=&M                              DBRM NAME
// SET   DB2=DB2E                            SSID
// SET  PLAN=&M                              PLAN NAME
//*
// SET  CLIB=&SYSUID..CBT484.FILE866
// SET  LLIB=MDCT.TEST.LOADLIB <-- SPECIFY YOUR LIBRARY
// SET  DLIB=MDCT.TEST.DBRMLIB <-- SPECIFY YOUR LIBRARY
//*
//*   DB2 SQL PRE-COMPILER
//*
//DB2PC   EXEC PGM=DSNHPC,
// PARM='HOST(CPP) CCSID(1047) SOURCE TIME(ISO) DATE(ISO) CONNECT(2)'
//STEPLIB  DD  DSN=SYS1.&DB2..DSNEXIT,DISP=SHR
//         DD  DSN=SYS1.&DB2..DSNLOAD,DISP=SHR
//SYSIN    DD  DSN=&CLIB(&M),DISP=SHR
//SYSCIN   DD  DSN=&&CIN,DISP=(NEW,PASS),
//             UNIT=SYSDA,SPACE=(CYL,(10,10)),DCB=(RECFM=FB,LRECL=80)
//SYSTERM  DD  SYSOUT=*
//SYSLIB   DD  DUMMY
//DBRMLIB  DD  DSN=&DLIB(&D),DISP=SHR
//SYSPRINT DD  SYSOUT=*
//SYSUT1   DD  UNIT=SYSDA,SPACE=(TRK,(20,20)),
//             DISP=(NEW,DELETE,DELETE)
//ABEND   EXEC PGM=JTERM,COND=(4,GE,DB2PC)
//*
//* C/C++ COMPILE (V1.7 Z/OS XL C++).
//*
//CPP     EXEC PGM=CCNDRVR,REGION=4096K,
// PARM=('NATLANG(ENU)/CXX SOURCE OPT ')   --LP64
//STEPLIB  DD  DSNAME=SYS1.SCEERUN,DISP=SHR
//         DD  DSNAME=SYS1.SCEERUN2,DISP=SHR
//         DD  DSNAME=SYS1.SCCNCMP,DISP=SHR
//SYSIN    DD  DSN=&&CIN,DISP=(OLD,DELETE)
//SYSLIN   DD  DSN=&&LIN,DISP=(NEW,PASS),
//             UNIT=SYSDA,SPACE=(CYL,(10,10)),DCB=(RECFM=FB,LRECL=80)
//USERLIB  DD  DUMMY
//SYSUT17  DD  SYSOUT=*
//SYSPRINT DD  SYSOUT=*
//SYSCPRT  DD  SYSOUT=*
//ABEND   EXEC PGM=JTERM,COND=(4,GE,CPP)
//*
//* PRE-LINKEDIT STEP
//*
//PLKED   EXEC PGM=EDCPRLK,PARM='ER,NODYNAM'
//*
//STEPLIB  DD  DSN=SYS1.SCEERUN,DISP=SHR
//SYSMSGS  DD  DSN=SYS1.SCEEMSGP(EDCPMSGE),DISP=SHR
//SYSLIB   DD  DSN=SYS1.SCEECPP,DISP=SHR
//         DD  DSN=SYS1.SCEELKEX,DISP=SHR
//         DD  DSN=SYS1.SCEEOBJ,DISP=SHR
//SYSIN    DD  DSN=&&LIN,DISP=(OLD,DELETE)
//SYSMOD   DD  DSNAME=&&PLKSET,DISP=(NEW,PASS),
//             SPACE=(32000,(30,30)),UNIT=SYSALLDA,
//             DCB=(RECFM=FB,LRECL=80)
//SYSOUT   DD  SYSOUT=*
//SYSPRINT DD  SYSOUT=*
//SYSDEFSD DD  DUMMY
//ABEND   EXEC PGM=JTERM,COND=(4,GE,PLKED)
//*
//* LINKEDIT STEP:
//*
//LKED   EXEC PGM=HEWL,PARM='AMODE=31,MAP'
//*
//SYSLIB   DD  DSN=SYS1.SCEELKED,DISP=SHR
//         DD  DSN=SYS1.SCEESPC,DISP=SHR
//         DD  DSN=SYS1.&DB2..DSNLOAD,DISP=SHR
//SYSPRINT DD  SYSOUT=*
//SYSLIN   DD  DSNAME=*.PLKED.SYSMOD,DISP=(OLD,DELETE)
//         DD  DDNAME=SYSIN
//SYSLMOD  DD  DSN=&LLIB(&L),DISP=SHR
//SYSUT1   DD  UNIT=SYSDA,SPACE=(32000,(30,30))
//SYSIN    DD  DUMMY
//SYSIN    DD *
  INCLUDE SYSLIB(DSNHLI)
  INCLUDE SYSLIB(DSNELI)
  INCLUDE SYSLIB(DSNWLIR)
  NAME BSPUFI(R)
/*
//ABEND   EXEC PGM=JTERM,COND=(4,GE,LKED)
//*
//* BIND PLAN
//*
//BIND    EXEC PGM=IKJEFT01,DYNAMNBR=20,
// PARM='DSN SYSTEM(&DB2)'
//DBRMLIB  DD DSN=&DLIB(&D),DISP=SHR
//SYSTSPRT DD SYSOUT=*
//SYSPRINT DD SYSOUT=*
//SYSUDUMP DD DUMMY
//SYSTSIN  DD *
    BIND PLAN(BSPUFI) MEMBER(BSPUFI) VALIDATE(BIND) -
    ISOLATION(CS) ACQUIRE(USE) EXPLAIN(NO)
    END
/*
//*
//*  GRANTS
//*
//GRANTS  EXEC PGM=IKJEFT01,DYNAMNBR=20,COND=(4,LT),
// PARM='DSN SYSTEM(&DB2)'
//*
//STEPLIB  DD DSN=&LLIB,DISP=SHR
//SYSTSIN  DD *
 RUN PROG(BSPUFI) PLAN(BSPUFI) +
  PARMS('INSQL(DD:SYSIN)')
//SYSTSPRT DD SYSOUT=*
//SYSPRINT DD SYSOUT=*
//SYSIN    DD *
 GRANT EXECUTE ON PLAN BSPUFI TO PUBLIC;
//
