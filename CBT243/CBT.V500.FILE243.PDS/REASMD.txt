 /********************************************************************/
 /*    INCLUDE REASMD                                                */
 /*    DCLS FOR REASM                                                */
 /********************************************************************/

 DCL 1   RR1   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  R1    BIT(4),
      2  R2    BIT(4),
     1   RR2   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  OPER  BIT(8),
     1   RR3   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  MASK  BIT(4),
      2  R2    BIT(4),
     1   RRE   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(16) ALIGNED,
      2  RSRV  BIT(8),
      2  R1    BIT(4),
      2  R2    BIT(4),
     1   RRF   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(16) ALIGNED,
      2  R1    BIT(4),
      2  RSRV  BIT(4),
      2  R3    BIT(4),
      2  R2    BIT(4),
     1   RRE1  BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(16) ALIGNED,
      2  RSRV  BIT(8),
      2  R1    BIT(4),
      2  RSRV1 BIT(4),
     1   R     BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  R1    BIT(4),
      2  RSRV  BIT(4),
     1   RR6   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(16) ALIGNED,
     1   RS1   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  R1    BIT(4),
      2  R3    BIT(4),
      2  B2    BIT(4),
      2  D2    BIT(12),
     1   RS2   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  R1    BIT(4),
      2  MASK  BIT(4),
      2  B2    BIT(4),
      2  D2    BIT(12),
     1   RSI   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  R1    BIT(4),
      2  R3    BIT(4),
      2  I2    BIN FIXED(15) UNALIGNED,
     1   RX    BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  R1    BIT(4),
      2  X2    BIT(4),
      2  B2    BIT(4),
      2  D2    BIT(12),
     1   RXY   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  R1    BIT(4),
      2  X2    BIT(4),
      2  B2    BIT(4),
      2  DL2   BIT(12),
      2  DH2   BIT(8),
      2  CODE1 BIT(8),
     1   RXY1  BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  R1    BIT(4),
      2  R3    BIT(4),
      2  B2    BIT(4),
      2  DL2   BIT(12),
      2  DH2   BIT(8),
      2  CODE1 BIT(8),
     1   RXE   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  R1    BIT(4),
      2  X2    BIT(4),
      2  B2    BIT(4),
      2  D2    BIT(12),
      2  RSRV  BIT(8),
      2  CODE1 BIT(8),
     1   RXF   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  R3    BIT(4),
      2  X2    BIT(4),
      2  B2    BIT(4),
      2  D2    BIT(12),
      2  R1    BIT(4),
      2  RSRV  BIT(4),
      2  CODE1 BIT(8),
     1   RSY   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  R1    BIT(4),
      2  R3    BIT(4),
      2  B2    BIT(4),
      2  DL2   BIT(12),
      2  DH2   BIT(8),
      2  CODE1 BIT(8),
     1   RSY1  BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  R1    BIT(4),
      2  MASK  BIT(4),
      2  B2    BIT(4),
      2  DL2   BIT(12),
      2  DH2   BIT(8),
      2  CODE1 BIT(8),
     1   RSL   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  L1    BIT(4),
      2  RSRV  BIT(4),
      2  B1    BIT(4),
      2  D1    BIT(12),
      2  RSRV2 BIT(8),
      2  CODE1 BIT(8),
     1   RM    BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  MASK  BIT(4),
      2  X2    BIT(4),
      2  B2    BIT(4),
      2  D2    BIT(12),
     1   RI    BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  R1    BIT(4),
      2  CODE1 BIT(4),
      2  I2    BIN FIXED(15) UNALIGNED,
     1   RIM   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  MASK  BIT(4),
      2  CODE1 BIT(4),
      2  I2    BIN FIXED(15) UNALIGNED,
     1   RIM1  BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  R1    BIT(4),
      2  CODE1 BIT(4),
      2  I2    BIN FIXED(15) UNALIGNED,
     1   RIL   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  R1    BIT(4),
      2  CODE1 BIT(4),
      2  I2    BIN FIXED(31) UNALIGNED,
     1   RILM  BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  MASK  BIT(4),
      2  CODE1 BIT(4),
      2  I2    BIN FIXED(31) UNALIGNED,
     1   RIE   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  R1    BIT(4),
      2  R3    BIT(4),
      2  I2    BIN FIXED(15) UNALIGNED,
      2  RSRV  BIT(8),
      2  CODE1 BIT(8),
     1   SI    BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  $I    BIT(8),
      2  B2    BIT(4),
      2  D2    BIT(12),
     1   SIY   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  $I    BIT(8),
      2  B2    BIT(4),
      2  DL2   BIT(12),
      2  DH2   BIT(8),
      2  CODE1 BIT(8),
     1   S1    BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  RSRV  BIT(8),
      2  B2    BIT(4),
      2  D2    BIT(12),
     1   S2    BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT (16) ALIGNED,
      2  B2    BIT(4),
      2  D2    BIT(12),
     1   SS1   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  LEN1  BIT(4),
      2  LEN2  BIT(4),
      2  B1    BIT(4),
      2  D1    BIT(12),
      2  B2    BIT(4),
      2  D2    BIT(12),
     1   SS2   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  LEN   BIT(8),
      2  B1    BIT(4),
      2  D1    BIT(12),
      2  B2    BIT(4),
      2  D2    BIT(12),
     1   SS3   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  LEN   BIT(4),
      2  I3    BIT(4),
      2  B1    BIT(4),
      2  D1    BIT(12),
      2  B2    BIT(4),
      2  D2    BIT(12),
     1   SS4   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(8) ALIGNED,
      2  R1    BIT(4),
      2  R3    BIT(4),
      2  B1    BIT(4),
      2  D1    BIT(12),
      2  B2    BIT(4),
      2  D2    BIT(12),
     1   SSE   BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(16) ALIGNED,
      2  B1    BIT(4),
      2  D1    BIT(12),
      2  B2    BIT(4),
      2  D2    BIT(12),
     1   E     BASED(CMD_PTR) UNALIGNED,
      2  CODE  BIT(16) ALIGNED;

 DCL     CMDDEF      BIT(2) ALIGNED BASED(CMD_PTR),
         CMD_PTR     PTR    INIT(NULL),
         #CMD_PTR    BIN    FIXED(31) BASED(#PTR04),
         #PTR04      PTR,
         CMDLEN(0:3) BIN    FIXED STATIC INT INIT(2,4,4,6);
         #PTR04 = ADDR(CMD_PTR);

 DCL     @COMPT      CHAR(20) VAR,
         PARM        CHAR(100) VAR,
         OS          BIN FIXED,  /* 1-360; 2-370; 3-SP/XA; 4-ESA */
         (PC,FC)     BIN FIXED,  /* 0-PACKED/FLOAT SET DISABLED  */

         SAVEFL      FILE STREAM,
         SYSPRINT    PRINT,
         SOURCE      CHAR(8)  INIT(''),
         SAVE        CHAR(8)  INIT('REASMSAV'),
         CONTROL     CHAR(8)  INIT('REASMBLK'),

         DSN         CHAR(44) INIT(''),
         VOL         CHAR(6)  INIT(''),
         DSNSAVE     CHAR(44) INIT(''),
         MEMSAVE     CHAR(8)  INIT(''),
         VOLSAVE     CHAR(6)  INIT(''),
         MEMBER      CHAR(8)  INIT(''),
         CSECT       CHAR(8)  INIT(''),
         MEMOUT      CHAR(8)  INIT(''),
         BLKNAME     CHAR(8)  INIT(''),

         BLOCK       CHAR(32767),
         TEXTLEN     BIN FIXED(31),

         (I,II,J,K,RC) BIN FIXED,
         GLOBAL_IP   BIN FIXED,
         #OFFSET     BIN FIXED(31),
         OFFSET      BIN FIXED(31),
         $OFFSET     BIN FIXED(31),
         LOCVAR      CHAR(255) VAR,
         #COM        CHAR(80) VAR,
         #SCRCOM(100) CHAR(80) VAR,
         PASS(10)    CHAR(8)  INIT(''),
         JDAT        CHAR(6)  INIT(''),
         ESDID       BIN FIXED,
         CURESD      BIN FIXED INIT(0),
         ARRINDX     BIN FIXED,
         PREV        PTR,
         #FIND       CHAR(50) VAR INIT(''),
         FINDTXT     CHAR(50),
         FOFFSET     BIN FIXED(31),
         BOFFSET     BIN FIXED(31),
         IV          CHAR(4),
         FIELD       CHAR(8) INIT(' '),
         FIELDP      BIN FIXED(31) INIT(1),
         POS         BIN FIXED(31),
         LVL         BIN FIXED(31),
         MAXLVL      BIN FIXED(31) INIT(100),
         (STRIN,COLIN) BIN FIXED,
         PDFCHAR     CHAR(15) INIT(''),
         PDFBYTE     CHAR(1)  INIT(''),
         REASMVER    CHAR(3) STATIC INT INIT('4.0'), /* VERSION */

         DSRG        BIT(16),
           PO        BIT(16) STATIC INT INIT('0000001000000000'B),
           POU       BIT(16) STATIC INT INIT('0000001100000000'B),

         #PAGE       BIN FIXED INIT(0),
         PRINTNUM    BIN FIXED INIT(0),
         SAVENUM     BIN FIXED INIT(0),

         LINE_I(100)  BIN FIXED,
         LINE_O(100)  BIN FIXED(31),
         LINE_C(100)  BIN FIXED,

         PRINTBIT    BIT(1)  ALIGNED  INIT('0'B),
         SAVEBIT     BIT(1)  ALIGNED  INIT('0'B),
         ESDLOOP     BIT(1)  ALIGNED  INIT('0'B),
         $EOF        BIT(1)  ALIGNED  INIT('0'B),
         $DSOFF      BIT(1)  ALIGNED  INIT('0'B),
         $MSG        BIT(1)  ALIGNED  INIT('0'B),
         $TRACE      BIT(1)  ALIGNED  INIT('0'B),
         $FIND       BIT(1)  ALIGNED  INIT('0'B),
         $CONF       BIT(1)  ALIGNED  INIT('0'B),
         $CONFP      BIT(1)  ALIGNED  INIT('0'B),
         $FIRST      BIT(1)  ALIGNED  INIT('1'B),
         $REM        BIT(1)  ALIGNED  INIT('0'B),
         $XREF       BIT(1)  ALIGNED  INIT('0'B),
         $AUTO       BIT(1)  ALIGNED  INIT('1'B),
         $BIT        BIT(1)  ALIGNED  INIT('0'B),
         $MATCH      BIT(1)  ALIGNED  INIT('0'B),
         $NOOP       BIT(1)  ALIGNED  INIT('0'B),
         LINELEN     BIN FIXED INIT(4),
         #ABSA       BIN FIXED INIT(12),
         #ABSB       BIN FIXED INIT(8),
         REMTIME     BIN FIXED INIT(0),
         REMCOUNT    BIN FIXED INIT(0),
         OPPREV      CHAR(5) INIT(''),
         $ORGIMM     CHAR(5) INIT(''),
         $ORGIMM_B   CHAR(3) INIT(''),
         $ORGIMM_F   CHAR(3) INIT(''),
         $SAVE       CHAR(1) INIT('N'),
         SCREEN_PTR  PTR,
         #CURI       BIN FIXED,
         #FORWARD    BIN FIXED INIT(0),
         1   BLOCK_CMD,
          2  TYPE    CHAR(1),
          2  O1      BIN FIXED(31),
          2  O2      BIN FIXED(31),
          2  LEN     BIN FIXED(31),
          2  PENDING BIT(1) ALIGNED INIT('0'B);

 DCL 1   ESD_BLOCK BASED(ESD_BLOCK_PTR) ALIGNED,
      2  IDENT       BIT(8),
      2  RSERV       BIT(24),
      2  FIRST_ESDID BIN FIXED,
      2  ESDLEN      BIN FIXED,

     1   ESD_ELEMENT BASED(ESD_ELEMENT_PTR) ALIGNED,
      2  NAME        CHAR(8),
      2  TYPE        BIT(8),
      2  OFF         BIT(24),
      2  ALIGN       BIT(8),
      2  LENGTH      BIT(24),
      2  REF         BIN FIXED,
      2  ID          BIN FIXED,

     1   CNTL_BLOCK BASED(CNTL_BLOCK_PTR) UNALIGNED,
      2  ER          BIT(1),
      2  RS01        BIT(3),
      2  LAST        BIT(1),
      2  RS02        BIT(1),
      2  RLDYES      BIT(1),
      2  CNTLYES     BIT(1),
      2  RS03        BIT(24),
      2  CNTLNO      BIN FIXED,
      2  RLDNO       BIN FIXED,
      2  RS04        BIT(8),
      2  TXTOFF      BIT(24),
      2  RS05        BIN FIXED,
      2  TXTLEN      BIN FIXED,

     1   CNTL_ELEMENT BASED(CNTL_ELEMENT_PTR) UNALIGNED,
      2  CNTLID      BIN FIXED,
      2  CNTLLEN     BIN FIXED,

     1   RLDA_ELEMENT BASED(RLD_ELEMENT_PTR) UNALIGNED,
      2  TOID        BIN FIXED,
      2  FROMID      BIN FIXED,

     1   RLDE_ELEMENT BASED(RLD_ELEMENT_PTR) UNALIGNED,
      2  RS01        BIT(2),
      2  RLDTYPE     BIT(2),
      2  RLDLEN      BIT(2),
      2  SUBT        BIT(1),
      2  NOTLAST     BIT(1),
      2  RLDOFF      BIT(24);

 DCL 1   BYTE    BASED(BYTE_PTR) UNALIGNED,
      2  BIT0          BIT(1),
      2  BIT1          BIT(1),
      2  BIT2          BIT(1),
      2  BIT3          BIT(1),
      2  BIT4          BIT(1),
      2  BIT5          BIT(1),
      2  BIT6          BIT(1),
      2  BIT7          BIT(1),
         BYTE_PTR      PTR,
         ONEBYTE       BIT(8);

         BYTE_PTR = ADDR(ONEBYTE);

 DCL     (ESD_BLOCK_PTR,    ESD_ELEMENT_PTR, CNTL_BLOCK_PTR,
          CNTL_ELEMENT_PTR, RLD_ELEMENT_PTR) PTR;

 DCL     #ESD_BLOCK_PTR     BIN FIXED(31) BASED(#PTR05), #PTR05 PTR,
         #ESD_ELEMENT_PTR   BIN FIXED(31) BASED(#PTR06), #PTR06 PTR,
         #CNTL_BLOCK_PTR    BIN FIXED(31) BASED(#PTR07), #PTR07 PTR,
         #CNTL_ELEMENT_PTR  BIN FIXED(31) BASED(#PTR08), #PTR08 PTR,
         #RLD_ELEMENT_PTR   BIN FIXED(31) BASED(#PTR09), #PTR09 PTR;

         #PTR05 = ADDR(ESD_BLOCK_PTR);
         #PTR06 = ADDR(ESD_ELEMENT_PTR);
         #PTR07 = ADDR(CNTL_BLOCK_PTR);
         #PTR08 = ADDR(CNTL_ELEMENT_PTR);
         #PTR09 = ADDR(RLD_ELEMENT_PTR);

 DCL 1   ESD_ARRAY(*)       CTL LIKE ESD_ELEMENT,
         DIM_ESD_ARRAY      BIN FIXED;

 DCL     USING_START   PTR INIT(NULL),
         RLD_START     PTR INIT(NULL),
         QUALIFY_START PTR INIT(NULL),
         DSC_START     PTR INIT(NULL),
         LABL_START    PTR INIT(NULL),
         LBLOCK_START  PTR INIT(NULL),
         XREF_START    PTR INIT(NULL),
         ORG_START     PTR INIT(NULL),
         COM_START     PTR INIT(NULL);


 DCL  1  CARD   DEF #CARD,
       2 LABEL  CHAR(9),
       2 OPER   CHAR(6),
       2 OPERANDS CHAR(56),
       2 CONTPOS CHAR(1),
       2 CARDNUM PIC'99999999',
         #CARD  CHAR(80) INIT('');

 DCL     GOODA   CHAR(256)     INIT(''),
         ICH     BIN FIXED(15) INIT(0),
      1  CH_STR  BASED(#PTR03),
       2 CH_RS   CHAR(1),
       2 CH      CHAR(1),
         #PTR03  PTR;
         #PTR03 = ADDR(ICH);


 DCL        DYNAM        ENTRY OPTIONS(ASSEMBLER, RETCODE, INTER),
            DYNWORK      BIN FIXED(31)  INIT(0),
            DYNMSG       CHAR(256) INIT(''),

          1 DYNAREA      UNALIGNED,
            2 DDNAME     CHAR(8)  INIT(''),
            2 DSNAME     CHAR(44) INIT(''),
            2 DSORG      BIT(16)  INIT('0'B),
            2 VOL        CHAR(6)  INIT(''),

          1 DYNINFO      UNALIGNED,
            2 DDNAME     CHAR(8)  INIT(''),
            2 DSNAME     CHAR(44) INIT(''),
            2 MEMBER     CHAR(8)  INIT(''),
            2 STATUS     BIT(8)   INIT('0'B),
            2 DISP       BIT(8)   INIT('0'B),
            2 COND_DISP  BIT(8)   INIT('0'B),
            2 DSORG      BIT(16)  INIT('0'B),
            2 LIMIT      BIN FIXED(15) INIT(0),
            2 ATTRIBUTE  BIT(8)   INIT('0'B),
            2 LAST_ENTRY BIT(8)   INIT('0'B),
            2 TYPE       BIT(8)   INIT('0'B);

      /* -------------------------------------------- */
      /* UTILITY    SUBROUTINES  FROM MODULE REASCNV  */
      /* -------------------------------------------- */
 DCL $HB     ENTRY(CHAR(*) VAR)           EXT RETURNS(BIT(16));
 DCL $HBF    ENTRY(CHAR(*) VAR)           EXT RETURNS(BIN FIXED(31));
 DCL $BH     ENTRY(BIN FIXED(31))         EXT RETURNS(CHAR(8));
 DCL $DIGIT  ENTRY(BIN FIXED(31))         EXT RETURNS(CHAR(16) VAR);
 DCL $CH     ENTRY(CHAR(*) VAR)           EXT RETURNS(CHAR(80) VAR);
 DCL $IMM    ENTRY(BIT(8))                EXT RETURNS(CHAR(5) VAR);
 DCL $NEXTEL ENTRY(CHAR(*) VAR)           EXT RETURNS(CHAR(100) VAR);
 DCL $DNAME  ENTRY(PTR,BIN FIXED(31),BIN FIXED(31))
                                          EXT RETURNS(CHAR(8) VAR);

      /* -------------------------------------------- */
      /* UTILITY    SUBROUTINES FROM MODULE REASMLIV  */
      /* -------------------------------------------- */
 DCL $INTLIV  ENTRY(CHAR(*), PTR, CHAR(*)) EXT;
 DCL $DELLIV  ENTRY(CHAR(*), PTR) EXT;
 DCL $LFIND   ENTRY(PTR, BIN FIXED, BIT(1), CHAR(*) VAR,)
              EXT RETURNS(CHAR(20) VAR);

      /* -------------------------------------------- */
      /* EXTERNAL SUBROUTINES:                        */
      /* -------------------------------------------- */
 DCL     REASMLD ENTRY(CHAR(8), BIN FIXED(31), CHAR(8))
                                           EXT OPTIONS(ASM INTER),
         REASMDL ENTRY(CHAR(8))            EXT OPTIONS(ASM INTER),
         REASMRC ENTRY(CHAR(8),CHAR(1))    EXT RETURNS(BIN FIXED),
         REASMCM ENTRY(, CHAR(*), CHAR(*)) EXT RETURNS(BIT(1)),
         REASESD ENTRY(,BIN FIXED)         EXT RETURNS(CHAR(8)),
         REASMLB ENTRY(CHAR(*))            EXT RETURNS(CHAR(8) VAR),
         REASQFY ENTRY(PTR)                EXT RETURNS(BIN FIXED(31)),
         REASLIB ENTRY(CHAR(8),CHAR(*),)   EXT RETURNS(BIN FIXED),
         REASLOA ENTRY(CHAR(*),,,,,)       EXT RETURNS(BIN FIXED),
         REASLST ENTRY                     EXT,
         REASPRF ENTRY                     EXT,
         REASQPW ENTRY                     EXT,
         REASMTL ENTRY(CHAR(256))          EXT OPTIONS(ASM INTER),
         REASMI  ENTRY                     EXT,
         MATCH   ENTRY                     EXT RETURNS(BIN FIXED),
         (ALLOCATION,BIN,VERIFY,MIN,DATE,TIME,ABS,HIGH,HBOUND,ONCODE,
         TRANSLATE,PLIRETV,STRING,MAX,LOW,NULL,BIT,DIM,ADDR,UNSPEC,
         LENGTH,MOD,ALL,INDEX,SUBSTR,PLIRETC)  BUILTIN,
         ISPLINK ENTRY(,,,,BIN FIXED(31),)
                 EXT OPTIONS(ASM INTER RETCODE);

