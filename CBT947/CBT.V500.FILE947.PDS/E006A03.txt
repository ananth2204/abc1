Preventing automatic restart of in-flight jobs

After a system crash, all in-flight jobs are automatically
restarted by POWER. This may not be desired! To allow some
measure of control, the XMODExx parameter can be tested and
appropriate action taken. This parameter is available in VSE/SP
4, and may be available in earlier releases. The DTRSETP
utility program used to interrogate and/or modify this and other
parameters is described in the VSE/SP Administration Manual,
SC33-6405.

The following procedures may be catalogued, and then
executed by inserting the following statement in each job:

      // EXEC PROC=$$MODE

These procedures will interrogate the system parameter
XMODEFx, and pause if the value of the parameter is
RECOV. The operator may then CANCEL the job (nn
CANCEL), or allow the job to continue by responding with
ENTER. If the job is allowed to continue, the XMODEFx
parameter is set to 'WARM' so subsequent jobs running in that
partition will not pause.

* $$ JOB JNM=CATALOG,DISP=D,CLASS=0
// JOB CATALOG
// EXEC LIBR,PARM='MSHP'
  ACCESS S=IJSYSRS.SYSLIB
CATALOG $0MODE.PROC  DATA=YES REPLACE=YES
// SETPARM XMODEBG=''
// EXEC PROC=CPUVAR1,XMODEBG
// IF XMODEBG NE RECOV THEN
// GOTO GOGO
// PAUSE RECOVERY MODE - CANCEL NOW, OR ENTER TO CONTINUE
// EXEC DTRSETP,PARM='CPUVAR1;;SET XMODEBG=WARM'
/*
/. GOGO
/+
CATALOG $2MODE.PROC  DATA=YES REPLACE=YES
// SETPARM XMODEF2=''
// EXEC PROC=CPUVAR1,XMODEF2
// IF XMODEF2 NE RECOV THEN
// GOTO GOGO
// PAUSE RECOVERY MODE - CANCEL NOW, OR ENTER TO CONTINUE
// EXEC DTRSETP,PARM='CPUVAR1;;SET XMODEF2=WARM'
/*
/. GOGO
/+
CATALOG $3MODE.PROC  DATA=YES REPLACE=YES
// SETPARM XMODEF3=''
// EXEC PROC=CPUVAR1,XMODEF3
// IF XMODEF3 NE RECOV THEN
// GOTO GOGO
// PAUSE RECOVERY MODE - CANCEL NOW, OR ENTER TO CONTINUE
// EXEC DTRSETP,PARM='CPUVAR1;;SET XMODEF3=WARM'
/*
/. GOGO
/+
CATALOG $4MODE.PROC  DATA=YES REPLACE=YES
// SETPARM XMODEF4=''
// EXEC PROC=CPUVAR1,XMODEF4
// IF XMODEF4 NE RECOV THEN
// GOTO GOGO
// PAUSE RECOVERY MODE - CANCEL NOW, OR ENTER TO CONTINUE
// EXEC DTRSETP,PARM='CPUVAR1;;SET XMODEF4=WARM'
/*
/. GOGO
/+
CATALOG $5MODE.PROC  DATA=YES REPLACE=YES
// SETPARM XMODEF5=''
// EXEC PROC=CPUVAR1,XMODEF5
// IF XMODEF5 NE RECOV THEN
// GOTO GOGO
// PAUSE RECOVERY MODE - CANCEL NOW, OR ENTER TO CONTINUE
// EXEC DTRSETP,PARM='CPUVAR1;;SET XMODEF5=WARM'
/*
/. GOGO
/+
CATALOG $6MODE.PROC  DATA=YES REPLACE=YES
// SETPARM XMODEF6=''
// EXEC PROC=CPUVAR1,XMODEF6
// IF XMODEF6 NE RECOV THEN
// GOTO GOGO
// PAUSE RECOVERY MODE - CANCEL NOW, OR ENTER TO CONTINUE
// EXEC DTRSETP,PARM='CPUVAR1;;SET XMODEF6=WARM'
/*
/. GOGO
/+
CATALOG $7MODE.PROC  DATA=YES REPLACE=YES
// SETPARM XMODEF7=''
// EXEC PROC=CPUVAR1,XMODEF7
// IF XMODEF7 NE RECOV THEN
// GOTO GOGO
// PAUSE RECOVERY MODE - CANCEL NOW, OR ENTER TO CONTINUE
// EXEC DTRSETP,PARM='CPUVAR1;;SET XMODEF7=WARM'
/*
/. GOGO
/+
CATALOG $8MODE.PROC  DATA=YES REPLACE=YES
// SETPARM XMODEF8=''
// EXEC PROC=CPUVAR1,XMODEF8
// IF XMODEF8 NE RECOV THEN
// GOTO GOGO
// PAUSE RECOVERY MODE - CANCEL NOW, OR ENTER TO CONTINUE
// EXEC DTRSETP,PARM='CPUVAR1;;SET XMODEF8=WARM'
/*
/. GOGO
/+
CATALOG $9MODE.PROC  DATA=YES REPLACE=YES
// SETPARM XMODEF9=''
// EXEC PROC=CPUVAR1,XMODEF9
// IF XMODEF9 NE RECOV THEN
// GOTO GOGO
// PAUSE RECOVERY MODE - CANCEL NOW, OR ENTER TO CONTINUE
// EXEC DTRSETP,PARM='CPUVAR1;;SET XMODEF9=WARM'
/*
/. GOGO
/+
CATALOG $AMODE.PROC  DATA=YES REPLACE=YES
// SETPARM XMODEFA=''
// EXEC PROC=CPUVAR1,XMODEFA
// IF XMODEFA NE RECOV THEN
// GOTO GOGO
// PAUSE RECOVERY MODE - CANCEL NOW, OR ENTER TO CONTINUE
// EXEC DTRSETP,PARM='CPUVAR1;;SET XMODEFA=WARM'
/*
/. GOGO
/+
CATALOG $BMODE.PROC  DATA=YES REPLACE=YES
// SETPARM XMODEFB=''
// EXEC PROC=CPUVAR1,XMODEFB
// IF XMODEFB NE RECOV THEN
// GOTO GOGO
// PAUSE RECOVERY MODE - CANCEL NOW, OR ENTER TO CONTINUE
// EXEC DTRSETP,PARM='CPUVAR1;;SET XMODEFB=WARM'
/*
/. GOGO
/+
LIST $0MODE.PROC $2MODE.PROC $3MODE.PROC $4MODE.PROC $5MODE.PROC -
     $6MODE.PROC $7MODE.PROC $8MODE.PROC $9MODE.PROC $AMODE.PROC -
     $BMODE.PROC
/*
/&
* $$ EOJ

Frank A Braman
Systems Programmer
St Johnsbury Trucking Co (USA)      c St Johnsbury Trucking Co 1992

