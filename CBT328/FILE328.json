{"INMR01": {"INMLRECL": 80, "INMFNODE": "N1", "INMFUID": "SBGOLOB", "INMTNODE": "A", "INMTUID": "A", "INMFTIME": "20201220011756000000", "INMNUMF": 1}, "INMR02": {"1": {"INMUTILN": "IEBCOPY", "INMSIZE": 529074, "INMDSORG": "PO", "INMTYPE": "None", "INMLRECL": 80, "INMBLKSZ": 5600, "INMRECFM": "FB", "INMDIR": 6, "INMDSNAM": "CBT.V500.FILE328.PDS", "numfile": 1}, "2": {"INMUTILN": "INMCOPY", "INMSIZE": 529074, "INMDSORG": "PS", "INMLRECL": 32756, "INMBLKSZ": 3120, "INMRECFM": "VS", "numfile": 1}}, "INMR03": {"1": {"INMSIZE": 529074, "INMDSORG": "PS", "INMLRECL": 80, "INMRECFM": "?"}}, "file": {"CBT.V500.FILE328.PDS": {"COPYR1": {"type": "PDS", "DS1DSORG": 512, "DS1BLKL": 5600, "DS1LRECL": 80, "DS1RECFM": "FB", "DS1KEYL": 0, "DS1OPTCD": 0, "DS1SMSFG": 0, "file_tape_blocksize": 3120, "DVAOPTS": 12336, "DVACLASS": 32, "DVAUNIT": 15, "DVAMAXRC": 32760, "DVACYL": 3340, "DVATRK": 15, "DVATRKLN": 58786, "DVAOVHD": 0, "num_header_records": 2, "DS1REFD": "200354", "DS1SCEXT": "b'\\x00\\x00\\x00'", "DS1SCALO": "b'\\x80\\x00\\x00\\xbe'", "DS1LSTAR": "b'\\x00\\t\\x03'", "DS1TRBAL": "b'\\xb3\\x08'"}, "COPYR2": {"deb": "b'\\x01\\x00\\x00\\x00\\xff\\x00\\x00\\x00\\x8f\\x03\\x90\\x00\\x04\\x9a\\xc0\\xd8'", "extents": ["b'\\x01\\x00\\x00\\x00\\xff\\x00\\x00\\x00\\x8f\\x03\\x90\\x00\\x04\\x9a\\xc0\\xd8'", "b'X\\xf4\\xfd\\xd0\\x00\\x00\\x02y\\x00\\x01\\x02y\\x00\\n\\x00\\n'", "b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00'", "b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00'", "b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00'", "b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00'", "b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00'", "b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00'", "b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00'", "b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00'", "b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00'", "b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00'", "b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00'", "b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00'", "b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00'", "b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00'"]}, "members": {"$$$DOC": {"ttr": 516, "alias": false, "halfwords": 30, "notes": 0, "parms": "b'\\x01\\x00\\x00\\x00\\x00\\x98\\x11O\\x00\\x98\\x11O\\x17Q\\x00\\x98\\x00\\x98\\x00\\x00\\xe2\\xc2\\xc7\\xd6\\xd3\\xd6\\xc2@@@'", "ispf": {"version": "01.00", "flags": 0, "createdate": "1998-04-24T00:00:00", "modifydate": "1998-04-24T17:51:00", "lines": 152, "newlines": 152, "modlines": 0, "user": "SBGOLOB"}, "text": "                        CUNY MOD LM52900\n\n\n     INSTALL THE CUNY DFP DADSM EXIT ROUTINES (IGGPRE00/IGGPOST0).\n\n                                 * * *\n\n                THE FOLLOWING FUNCTIONS ARE INCLUDED:\n\n         ALLOCATE, RENAME, EXTEND: VALIDATE THE DSNAME (RE LOCAL\n                STANDARDS)\n\n         ALLOCATE, RENAME: ENSURE THAT THE DATASET (THE NEW DSNAME,\n                FOR RENAME) IS NOT ALREADY CATALOGED ON ANOTHER VOLUME\n                AND, IF THE DSNAME IS A GDG NAME, IT HAS A GDG BASE\n                ENTRY IN THE CATALOG\n\n         ALLOCATE, EXTEND: CALL RACF TO CHECK AUTHORITY TO CREATE\n                DATASETS ON THIS VOLUME; ADD CUNY INFORMATION TO THE\n                FORMAT 1 DSCB\n\n\n                             **  NOTES  **\n\n     THIS CODE USES THE CVT USER FIELD, CVTUSER.\n\n     MODULE IGGPOST0 IS DELETED BY THIS INSTALL.  IGGPOST0 BECOMES\n     AN ALIAS ENTRY IN LMOD IGGPRE00, AS THE ROUTINES SHARE MUCH CODE.\n\n   */.\n++ JCLIN.\n//LM52900A EXEC LINKS,NAME=LPALIB,PARM=RENT\n//SYSLIN DD *\n INCLUDE CULIB(IGGPRE00)\n ENTRY IGGPRE00\n ALIAS IGGPOST0\n NAME  IGGPRE00(R)\n/*\n//LM52900B EXEC LINKS,NAME=LINKLIB\n//SYSLIN DD *\n INCLUDE CULIB(PREPOST0)\n NAME PREPOST0(R)\n/*\n++ MOD (IGGPOST0) DELETE DISTLIB (AOSD0).\n++ SRC (PREPOST0) DISTLIB (ASOURCE) SYSLIB (SOURCE) DISTMOD (CULIB).\nPREPOST0 TITLE '           DADSM EXIT \"SUBSYSTEM\" ROUTINE - LM52900'\n************                          *********************************\n* PREPOST0 *                          *  VERSION 1.2,  2 OCTOBER 1996 *\n************                          *********************************\n*\n*\n*\n*        THIS ROUTINE IS USED TO FORCE ALLOCATION OF A USERCATALOG TO\n*        THE *MASTER* ASID FOR LATER USE BY THE DADSM EXIT ROUTINE,\n*        IGGPRE00.  DETAILED COMMENTARY IS PROVIDED IN THAT MODULE.\n*\n*\n*        AN ENTRY IN A SYS1.PARMLIB IEFSSNXX MEMBER IS REQUIRED\n*        FOR THIS ROUTINE.  THE FORMAT IS\n*\n*            PRPO,PREPOST0\n*\n*        THE SUBSYSTEM NAME, \"PRPO\", IS ARBITRARY (BUT MUST BE UNIQUE).\n*\n*\n*        NOTE THAT ALTHOUGH THIS ROUTINE IS ENTERED FOR SUBSYSTEM\n*        INITIALIZATION--FOR CONVENIENCE AND EASE OF INSTALLATION--\n*        THE DADSM EXIT IS NOT A SUBSYSTEM (I.E., IT DOES NOT\n*        PROCESS IEFSSREQ REQUESTS).  THE SIMPLEST WAY TO NOT BE A\n*        SUBSYSTEM IS TO DO NOTHING:  ALLOCATE NO SSVT, AND LEAVE THE\n*        SSCTSSVT POINTER ZERO.  HENCE, THESE ARE (NOT) DONE.\n*\n*\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTIONS                 *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n*\n*        THIS ROUTINE REQUIRES *NO* INSTALLATION-DEPENDENT\n*        CUSTOMIZATION (UNLESS YOU WISH TO CHANGE THE CONSOLE\n*        MESSAGE NUMBERS).  THE CATALOG TO BE ALLOCATED IS\n*        DEFINED IN IGGPRE00, IN ROUTINE \"SPECINIT\".\n*\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTIONS                 *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n*\n*\n*        SEND BRICKBATS TO:\n*\n*           ARON EISENPRESS\n*           MANAGER, MVS SYSTEMS\n*           CITY UNIVERSITY OF NEW YORK\n*           COMPUTING AND INFORMATION SERVICES\n*           555 WEST 57TH STREET, 16TH FLOOR\n*           NEW YORK, NEW YORK  10019-2919\n*\n*           PHONE: 212/541-0918\n*\n*           EMAIL: AFECU@CUNYVM.CUNY.EDU\n*\n*\n*\n*        ATTRIBUTES:\n*\n*           KEY ZERO *\n*           SUPERVISOR STATE *\n*           NON-REENTRANT\n*           NONRESIDENT, IN LINKLIB\n*\n*           * (THIS ROUTINE DOESN'T REQUIRE KEY ZERO OR SUPERVISOR\n*              STATE, BUT THAT'S THE STATE IN WHICH SUBSYSTEM\n*              INITIALIZATION ROUTINES GET CONTROL.  IT MUST BE AN\n*              AUTHORIZED TASK, THOUGH--EITHER KEY OR STATE SUFFICE\n*              FOR THAT--IN ORDER TO ISSUE THE ALLOCATE SVC.)\n*\n*\n*        SYSTEM LEVEL: MVS/XA DFP/XA V2.4 (HDP2240)\n*\n*\n*        RETURN CODES USED: NONE\n*\n*\n*        ASSEMBLY OF THIS MODULE REQUIRES ASSEMBLER H DUE TO THE USE\n*        OF FORWARD REFERENCES IN DEFINING SEVERAL LENGTH FIELDS.\n*\n*\n*\n*        MESSAGES ISSUED:\n*\n*         CNY656I DADSM EXIT IS NOT PRESENT, PLEASE NOTIFY SYSTEMS\n*                  PROGRAMMING\n*         CNY657I DADSM EXIT INITIALIZATION INCOMPLETE, PLEASE NOTIFY\n*                  SYSTEMS PROGRAMMING\n*         CNY658I DADSM EXIT INITIALIZATION COMPLETE\n*\n*\n*        N.B. THIS MODULE DOES NOT PROVIDE A STANDARD SAVE AREA.\n*             ONE IS NOT NEEDED FOR SVC CALLS, AND THERE ARE NO\n*             OTHER EXTERNAL CALLS IN THIS CODE.\n*\n*\n*\n*\n*        ********************\n*        * MODIFICATION LOG *\n*        ********************\n*\n*        VERSION 1.1, 22 JULY 1991\n*          -- ADDED AMODE/RMODE FOR MVS/XA, AND UPDATED COMMENTS.\n*\n*        VERSION 1.2, 2 OCTOBER 1996\n*          -- UPDATED FOR NEW RETURN CODE FORMAT FOR DF/SMS.\n", "mimetype": "text/plain", "datatype": "ebcdic", "extension": ".txt"}, "IGGPRE00": {"ttr": 520, "alias": false, "halfwords": 30, "notes": 0, "parms": "b'\\x01\\x00\\x00\\x00\\x00\\x98\\x11O\\x00\\x98\\x11O\\x17P\\x10\\xed\\x10\\xed\\x00\\x00\\xc1\\xc6\\xc5@@@@@@@'", "ispf": {"version": "01.00", "flags": 0, "createdate": "1998-04-24T00:00:00", "modifydate": "1998-04-24T17:50:00", "lines": 4333, "newlines": 4333, "modlines": 0, "user": "AFE"}, "text": "++ USERMOD (LM52900).\n++ VER (Z038) FMID (HDZ11C0)\n   /*\n                        CUNY MOD LM52900\n\n\n     INSTALL THE CUNY DFP DADSM EXIT ROUTINES (IGGPRE00/IGGPOST0).\n\n                                 * * *\n\n                THE FOLLOWING FUNCTIONS ARE INCLUDED:\n\n         ALLOCATE, RENAME, EXTEND: VALIDATE THE DSNAME (RE LOCAL\n                STANDARDS)\n\n         ALLOCATE, RENAME: ENSURE THAT THE DATASET (THE NEW DSNAME,\n                FOR RENAME) IS NOT ALREADY CATALOGED ON ANOTHER VOLUME\n                AND, IF THE DSNAME IS A GDG NAME, IT HAS A GDG BASE\n                ENTRY IN THE CATALOG\n\n         ALLOCATE, EXTEND: CALL RACF TO CHECK AUTHORITY TO CREATE\n                DATASETS ON THIS VOLUME; ADD CUNY INFORMATION TO THE\n                FORMAT 1 DSCB\n\n\n                             **  NOTES  **\n\n     THIS CODE USES THE CVT USER FIELD, CVTUSER.\n\n     MODULE IGGPOST0 IS DELETED BY THIS INSTALL.  IGGPOST0 BECOMES\n     AN ALIAS ENTRY IN LMOD IGGPRE00, AS THE ROUTINES SHARE MUCH CODE.\n\n   */.\n++ JCLIN.\n//LM52900A EXEC LINKS,NAME=LPALIB,PARM=RENT\n//SYSLIN DD *\n INCLUDE CULIB(IGGPRE00)\n ENTRY IGGPRE00\n ALIAS IGGPOST0\n NAME  IGGPRE00(R)\n/*\n//LM52900B EXEC LINKS,NAME=LINKLIB\n//SYSLIN DD *\n INCLUDE CULIB(PREPOST0)\n NAME PREPOST0(R)\n/*\n++ MOD (IGGPOST0) DELETE DISTLIB (AOSD0).\n++ SRC (PREPOST0) DISTLIB (ASOURCE) SYSLIB (SOURCE) DISTMOD (CULIB).\nPREPOST0 TITLE '           DADSM EXIT \"SUBSYSTEM\" ROUTINE - LM52900'\n************                          *********************************\n* PREPOST0 *                          *  VERSION 1.2,  2 OCTOBER 1996 *\n************                          *********************************\n*\n*\n*\n*        THIS ROUTINE IS USED TO FORCE ALLOCATION OF A USERCATALOG TO\n*        THE *MASTER* ASID FOR LATER USE BY THE DADSM EXIT ROUTINE,\n*        IGGPRE00.  DETAILED COMMENTARY IS PROVIDED IN THAT MODULE.\n*\n*\n*        AN ENTRY IN A SYS1.PARMLIB IEFSSNXX MEMBER IS REQUIRED\n*        FOR THIS ROUTINE.  THE FORMAT IS\n*\n*            PRPO,PREPOST0\n*\n*        THE SUBSYSTEM NAME, \"PRPO\", IS ARBITRARY (BUT MUST BE UNIQUE).\n*\n*\n*        NOTE THAT ALTHOUGH THIS ROUTINE IS ENTERED FOR SUBSYSTEM\n*        INITIALIZATION--FOR CONVENIENCE AND EASE OF INSTALLATION--\n*        THE DADSM EXIT IS NOT A SUBSYSTEM (I.E., IT DOES NOT\n*        PROCESS IEFSSREQ REQUESTS).  THE SIMPLEST WAY TO NOT BE A\n*        SUBSYSTEM IS TO DO NOTHING:  ALLOCATE NO SSVT, AND LEAVE THE\n*        SSCTSSVT POINTER ZERO.  HENCE, THESE ARE (NOT) DONE.\n*\n*\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTIONS                 *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n*\n*        THIS ROUTINE REQUIRES *NO* INSTALLATION-DEPENDENT\n*        CUSTOMIZATION (UNLESS YOU WISH TO CHANGE THE CONSOLE\n*        MESSAGE NUMBERS).  THE CATALOG TO BE ALLOCATED IS\n*        DEFINED IN IGGPRE00, IN ROUTINE \"SPECINIT\".\n*\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTIONS                 *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n*\n*\n*        SEND BRICKBATS TO:\n*\n*           ARON EISENPRESS\n*           MANAGER, MVS SYSTEMS\n*           CITY UNIVERSITY OF NEW YORK\n*           COMPUTING AND INFORMATION SERVICES\n*           555 WEST 57TH STREET, 16TH FLOOR\n*           NEW YORK, NEW YORK  10019-2919\n*\n*           PHONE: 212/541-0918\n*\n*           EMAIL: AFECU@CUNYVM.CUNY.EDU\n*\n*\n*\n*        ATTRIBUTES:\n*\n*           KEY ZERO *\n*           SUPERVISOR STATE *\n*           NON-REENTRANT\n*           NONRESIDENT, IN LINKLIB\n*\n*           * (THIS ROUTINE DOESN'T REQUIRE KEY ZERO OR SUPERVISOR\n*              STATE, BUT THAT'S THE STATE IN WHICH SUBSYSTEM\n*              INITIALIZATION ROUTINES GET CONTROL.  IT MUST BE AN\n*              AUTHORIZED TASK, THOUGH--EITHER KEY OR STATE SUFFICE\n*              FOR THAT--IN ORDER TO ISSUE THE ALLOCATE SVC.)\n*\n*\n*        SYSTEM LEVEL: MVS/XA DFP/XA V2.4 (HDP2240)\n*\n*\n*        RETURN CODES USED: NONE\n*\n*\n*        ASSEMBLY OF THIS MODULE REQUIRES ASSEMBLER H DUE TO THE USE\n*        OF FORWARD REFERENCES IN DEFINING SEVERAL LENGTH FIELDS.\n*\n*\n*\n*        MESSAGES ISSUED:\n*\n*         CNY656I DADSM EXIT IS NOT PRESENT, PLEASE NOTIFY SYSTEMS\n*                  PROGRAMMING\n*         CNY657I DADSM EXIT INITIALIZATION INCOMPLETE, PLEASE NOTIFY\n*                  SYSTEMS PROGRAMMING\n*         CNY658I DADSM EXIT INITIALIZATION COMPLETE\n*\n*\n*        N.B. THIS MODULE DOES NOT PROVIDE A STANDARD SAVE AREA.\n*             ONE IS NOT NEEDED FOR SVC CALLS, AND THERE ARE NO\n*             OTHER EXTERNAL CALLS IN THIS CODE.\n*\n*\n*\n*\n*        ********************\n*        * MODIFICATION LOG *\n*        ********************\n*\n*        VERSION 1.1, 22 JULY 1991\n*          -- ADDED AMODE/RMODE FOR MVS/XA, AND UPDATED COMMENTS.\n*\n*        VERSION 1.2, 2 OCTOBER 1996\n*          -- UPDATED FOR NEW RETURN CODE FORMAT FOR DF/SMS.\n         TITLE '           ENTRY POINT'\n**************************\n* PREPOST0 - ENTRY POINT *\n**************************\n*\n*        REGISTER USAGE:\n*\n*           R1 = WORK\n*           R2 = BASE\n*           R3 = WORK (SYSRES UCB ADDRESS)\n*           R4 = WORK (REALLOC SPACE QUANTITY)\n*\nPREPOST0 CSECT ,\n         SPACE ,\n         SAVE  (14,12),,PREPOST0-&SYSDATE  SAVE REGISTERS AT ENTRY\n         LR    R2,R15              GET A BASE REGISTER\n         USING PREPOST0,R2\n         USING PSA,R0              REQUIRED \"USING\" FOR LOW-CORE\n         SPACE ,\n*              ENSURE THAT WE ARE RUNNING IN THE *MASTER* ASID (1)\n         SPACE ,\n         L     R1,PSAAOLD          GET @ CURRENT ASCB\n         USING ASCB,R1\n         CLC   ASCBASID,MASTERAS   IS IT *MASTER*?\n         BNE   EXIT                NO, IGNORE THIS INVOCATION (NO MSG)\n         DROP  R1\n         TITLE '           ISSUE DADSM ALLOCATION CALL'\n******************************************\n* PREPOST0 - ISSUE DADSM ALLOCATION CALL *\n******************************************\n*\n*        ATTEMPT TO ALLOCATE A SPECIALLY-NAMED DATASET.\n*\n*        THE DSNAME AND THE ASID ARE A KEY TO THE DADSM EXIT\n*        (IGGPRE00) TO PERFORM SPECIAL PROCESSING.\n*\n*        NOTE THAT THE DATASET WILL NEVER GET ALLOCATED UNLESS THE\n*        DADSM EXIT IS NOT PRESENT.  ALSO, IT DOES NOT MATTER IF THE\n*        DATASET ALREADY EXISTS, BECAUSE THE EXIT GETS CONTROL BEFORE\n*        DADSM ALLOCATION'S DUPLICATE-NAME CHECK TAKES PLACE.\n*\n*        THE DATASET ALLOCATION IS SPECIFIED AS ZERO TRACKS ON THE\n*        SYSRES VOLUME (MOSTLY FOR CONVENIENCE).\n*\n*        NOTE THAT THE PARTIAL DSCB USED FOR REALLOC MUST HAVE THE\n*        DS1FMTID FIELD SET -- OTHERWISE A FORMAT 0 DSCB IS CREATED!\n*\n         SPACE ,\n         L     R3,FLCCVT           ADDRESS THE CVT\n         USING CVT,R3\n         L     R3,CVTSYSAD         GET THE ADDRESS OF THE SYSRES UCB\n         USING UCB,R3\n         MVC   DS1DSSN-IECSDSL1+PDSCB,UCBVOLI  COPY THE REAL VOLID (TO\n*                                  LOOK PRETTY IN CASE EXIT IS ABSENT)\n         DROP  R3\n         SPACE ,\n         XR    R4,R4               INDICATE A SPACE QUANTITY OF ZERO\n         SPACE ,\n*              ISSUE THE REALLOC MACRO TO INVOKE DADSM ALLOCATION\n         SPACE ,\n         REALLOC DSSIZE=(R4),PDSCB=PDSCB,UCB=(R3),MF=(E,REALLOC)\n         TITLE '           ANALYZE ALLOCATION RETURN CODE'\n*********************************************\n* PREPOST0 - ANALYZE ALLOCATION RETURN CODE *\n*********************************************\n*\n*        ANALYZE THE RETURN CODE FROM DADSM ALLOCATION.\n*\n*        THIS ROUTINE EXPECTS THE DADSM EXIT TO HAVE REJECTED THE\n*        ALLOCATION (WHICH RESULTS IN A DADSM RETURN CODE OF X'B4)\n*        WITH A REASON CODE OF 901.  IF THE EXIT DID GOT CONTROL BUT\n*        WAS UNABLE TO INITIALIZE PROPERLY, IT WILL RETURN A REASON\n*        CODE OF 902.  ANY OTHER REASON CODE OR RETURN CODE INDICATES\n*        THAT THE EXIT DID NOT GET CONTROL FROM DADSM FOR SOME REASON.\n*\n*        NOTE THAT AS OF DFP VERSION 3 AND UP, THE RETURN CODE IS IN\n*        REGISTER 15 BY ITSELF, AND THE IGGPRE00 REASON CODE IS IN THE\n*        LOW-ORDER 2 BYTES OF REGISTER 0.  (THE REASON CODE USED TO BE\n*        IN THE HIGH-ORDER 2 BYTES OF REGISTER 15.)\n*\n         SPACE ,\n         C     R15,PRE00ERR        TEST RETURN CODE FOR IGGPRE00 ERROR\n         BNE   NOT902              EXIT DIDN'T REJECT US -- IT'S NOT IN\n         SPACE ,\n*              THE RETURN CODE INDICATES REJECTION BY IGGPRE00; NOW\n*              CHECK THE REASON CODES.\n         SPACE ,\n         CLM   R0,B'0011',RC901    TEST REASON CODE FOR SUCCESS\n         BNE   NOT901              BIF NOT\n         SPACE ,\n*              NOTE THAT A \"SUCCESS\" MESSAGE ISN'T REALLY NEEDED\n*              EXCEPT THAT WITHOUT ONE THERE'S NO WAY TO TELL IF\n*              THIS ROUTINE WAS INVOKED AT ALL.\n         SPACE ,\n         WTO   'CNY658I DADSM EXIT INITIALIZATION COMPLETE',DESC=4,    *\n               ROUTCDE=2\n         B     EXIT\n         SPACE 2\n*              TEST REASON CODE FOR FAILURE-REJECTION-BY-DADSM-EXIT\n         SPACE ,\nNOT901   CLM   R0,B'0011',RC902     YES, TEST FOR IT\n         BNE   NOT902               BIF NOT\n         SPACE ,\n         WTO   'CNY657I DADSM EXIT INITIALIZATION INCOMPLETE, PLEASE NO*\n               TIFY SYSTEMS PROGRAMMING',DESC=11,ROUTCDE=(2,10)\n         B     EXIT\n         SPACE 2\n*              DADSM EXIT DID NOT IDENTIFY THIS REQUEST AND IS\n*              THEREFORE PRESUMED MISSING OR DEAD.\n         SPACE ,\nNOT902   WTO   'CNY656I DADSM EXIT IS NOT PRESENT, PLEASE NOTIFY SYSTEM*\n               S PROGRAMMING',DESC=11,ROUTCDE=(2,10)\n         SPACE 2\nEXIT     RETURN (14,12),RC=0       RETURN TO OUR CALLER\n         TITLE '           CONSTANT AND INCONSTANT VALUES'\n*          *****************************\n*          * CONSTANTS AND INCONSTANTS *\n*          *****************************\n         SPACE 2\nMASTERAS DC    H'1'                ASID NUMBER OF *MASTER* ASID\n         SPACE 2\n*              THE FOLLOWING ARE RETURN CODES FROM REALLOC (SVC 32)\n*              IN R15: THE ALLOCATE RETURN CODE (X'B4' MEANS THE EXIT\n*                      REJECTED ALLOCATION FOR THE VOLUME)\n*              IN R0: THE REASON CODE IS THE LOW-ORDER HALFWORD\n         SPACE ,\n         DS    0F\nPRE00ERR DC    AL4(X'B4')          RETURN CODE FOR IGGPRE00 RC=4\n         SPACE ,\nRC901    DC    AL2(901)            EXIT REASON CODE FOR SUCCESSFUL INIT\n         SPACE ,\nRC902    DC    AL2(902)            EXIT REASON CODE FOR INIT FAILURE\n         SPACE 2\nREALLOC  REALLOC MF=L              REALLOC PARAMETER LIST (LIST FORMAT)\n         SPACE 2\nPDSCB    DC    XL(DS1END-IECSDSL1)'00'  ZEROED PARTIAL DSCB FOR REALLOC\n         SPACE ,\n         ORG   PDSCB               ORG BACK TO INSERT DSNAME\n         DC    CL(L'DS1DSNAM)'SYS1.EARTHMAN TO IBM: CALL 1-800-IGG-PRE0*\n               0'                  STRANGE DSNAME INDICATING INIT CALL\n         SPACE ,\n         ORG   PDSCB+DS1FMTID-IECSDSL1  ORG TO FMTID FIELD\n         DC    C'1'                FORMAT-1 IDENTIFIER\n         SPACE ,\n         ORG   ,                   THEN ORG TO END OF PDSCB\n         TITLE '           SYSTEM DSECTS'\n*          *****************\n*          * SYSTEM DSECTS *\n*          *****************\n*\n*        THE FOLLOWING DSECTS ARE DEFINED HERE:\n*\n*        REGISTER EQUATES (MACRO YREGS)\n*        ASCB (MACRO IHAASCB)\n*        CVT (MACRO CVT)\n*        DSCB1 (MACRO IECSDSL1) - FORMAT 1 DSCB\n*        PSA (MACRO IHAPSA)\n*        UCB (MACRO IEFUCBOB)\n         SPACE 2\n         YREGS ,                   DEFINE REGISTERS\n         TITLE '           SYSTEM DSECTS  -  ASCB  (IHAASCB)'\n         IHAASCB\n         TITLE '           SYSTEM DSECTS  -  CVT  (CVT)'\n         CVT   DSECT=YES\n         TITLE '           SYSTEM DSECTS  -  DSCB1  (IECSDSL1)'\nDSCB1    DSECT\n         IECSDSL1 1\n         TITLE '           SYSTEM DSECTS  -  PSA  (IHAPSA)'\n         IHAPSA\n         TITLE '           SYSTEM DSECTS  -  UCB  (IEFUCBOB)'\nUCB      DSECT ,\n         IEFUCBOB\n         SPACE 3\n         END   PREPOST0\n++ SRC (IGGPRE00) DISTLIB (ASOURCE) SYSLIB (SOURCE) DISTMOD (CULIB).\nPREPOST  TITLE 'IGGPRE00/IGGPOST0 - DFP DADSM EXIT ROUTINES - LM52900'\n*********************               ***********************************\n* IGGPRE00/IGGPOST0 *               * VERSION 1.13,   26 AUGUST 1997  *\n*********************               ***********************************\n*\n*\n*        THESE ROUTINES PREFORM SPECIAL LOCAL PROCESSING FOR ALLOCATE,\n*        RENAME, AND EXTEND.\n*\n*\n*        THE FOLLOWING FUNCTIONS ARE INCLUDED:\n*\n*\n*        ALLOCATE, RENAME, EXTEND: VALIDATE THE DSNAME (RE LOCAL\n*               STANDARDS)\n*\n*        ALLOCATE, RENAME: ENSURE THAT THE DATASET (THE NEW DSNAME,\n*               FOR RENAME) IS NOT ALREADY CATALOGED ON ANOTHER VOLUME\n*               AND, IF THE DSNAME IS A GDG NAME, IT HAS A GDG BASE\n*               ENTRY IN THE CATALOG\n*\n*        ALLOCATE, EXTEND: CALL RACF TO CHECK AUTHORITY TO CREATE\n*               DATASETS ON THIS VOLUME; ADD CUNY INFORMATION TO THE\n*               FORMAT 1 DSCB\n*\n*  *****************************************************************\n*  *****************************************************************\n*  **                                                             **\n*  **                      * CAVEAT *                             **\n*  **                                                             **\n*  **    THIS EXIT MAKES USE OF CATALOG MANAGEMENT FUNCTIONS      **\n*  **    THAT ARE NOT PUBLISHED EXTERNAL INTERFACES.  THEY ARE:   **\n*  **                                                             **\n*  **      1) ISSUE SUPERLOCATE VIA SVC 26.                       **\n*  **                                                             **\n*  **      2) TEMPORARILY INSERT A SAVED CATALOG ACB ADDRESS IN   **\n*  **         THE PCCB WHEN AN INITIATOR CALLS DADSM ALLOCATE.    **\n*  **         THIS HAS A DEPENDENCY ON A CATALOG'S ACB ADDRESS    **\n*  **         (PCCACBP) BEING INVARIANT BETWEEN ADDRESS SPACES.   **\n*  **                                                             **\n*  **    THIS EXIT ALSO FORCES THE USERCATALOG THAT'S NEEDED      **\n*  **    FOR THE DATASET-CATALOGABILITY CHECKS TO REMAIN OPEN     **\n*  **    AND PERMANENTLY ALLOCATED TO THE *MASTER* ASID.          **\n*  **                                                             **\n*  **    CAVEAT: IF THIS USERCATALOG IS SHARED ACROSS MULTIPLE    **\n*  **    PROCESSORS, THEN IF A SHARING PROCESSOR CAUSES THE       **\n*  **    INDEX TO EXTEND TO A NEW DASD EXTENT, IT IS THOUGHT      **\n*  **    THAT MSG IEC331I 004-66 WILL RESULT AND THE LOCATE       **\n*  **    WILL FAIL.  IT'S THOUGHT THAT THIS WON'T HAVE ANY REAL   **\n*  **    IMPACT ON THE CATALOG'S AVAILABILITY, AS ANY LOCATE      **\n*  **    TO THAT CATALOG FROM ANOTHER CALLER SHOULD SUCCESSFULLY  **\n*  **    GO THROUGH EOV AND UPDATE THE CATALOG CONTROL BLOCKS.    **\n*  **                                                             **\n*  **                                                             **\n*  *****************************************************************\n*  *****************************************************************\n*\n*\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTIONS                 *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n*\n*        SECTIONS OF CODE WHICH IMPLEMENT INSTALLATION-DEPENDENT\n*        STANDARDS OR FUNCTIONS ARE ENCLOSED IN BOXES LIKE THE ONES\n*        HERE.  THE ROUTINES IN THIS VERSION ARE, OF COURSE, FOR THE\n*        CITY UNIVERSITY OF NEW YORK/COMPUTING & INFORMATION SERVICES.\n*\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n*\n*        THIS MODULE REQUIRES USE OF A WORD ADDRESSABLE THROUGH THE\n*        CVT; AS DISTRIBUTED THIS WORD IS THE CVT USER FIELD,\n*        CVTUSER.  THIS CODE IS LOCATED FOLLOWING LABELS \"SPECI60\"\n*        AND \"SUPLOC40\".\n*\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTIONS                 *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n*\n*\n*        SEND BRICKBATS TO:\n*\n*           ARON EISENPRESS\n*           MANAGER, MVS SYSTEMS\n*           CITY UNIVERSITY OF NEW YORK\n*           COMPUTING AND INFORMATION SERVICES\n*           555 WEST 57TH STREET, 16TH FLOOR\n*           NEW YORK, NEW YORK  10019-2919\n*\n*           PHONE: 212/541-0918\n*\n*           EMAIL: AFECU@CUNYVM.CUNY.EDU\n*\n*\n*        ATTRIBUTES:\n*\n*           KEY ZERO\n*           SUPERVISOR STATE\n*           REENTRANT\n*           RESIDENT IN LPALIB\n*\n*\n*        SYSTEM LEVEL: MVS/ESA DFSMS V1.3 (HDZ11C0)\n*\n*\n*        RETURN CODES USED:\n*\n*            0 - CONTINUE DADSM PROCESSING\n*            4 - REJECT ALLOCATION FOR THIS VOLUME\n*                 REASON CODES:\n*                    1 - DATASET CANNOT BE CATALOGED\n*                    2 - DSNAME DOES NOT CONFORM TO STANDARDS\n*                    3 - REQUIRED GDG BASE NOT CATALOGED\n*                    4 - RACF DENIED AUTHORITY TO CREATE DATASET ON VOL\n*                  901 - SPECIAL INITIALIZATION CALL COMPLETED OK\n*                  902 - SPECIAL INITIALIZATION CALL FAILED\n*\n*\n*        EXTERNAL ROUTINES OR MODIFICATIONS REQUIRED:\n*\n*         PREPOST0: THIS ROUTINE MUST BE DEFINED AS A SUBSYSTEM\n*                   INITIALIZATION ROUTINE.  IT'S USED TO FORCE ANY\n*                   REQUIRED USERCATALOG(S), AS DEFINED HERE IN\n*                   ROUTINE \"SPECINIT\", TO BE ALLOCATED AND OPENED.\n*\n*         SYS1.PARMLIB: AN ENTRY IN AN IEFSSNXX MEMBER IS REQUIRED\n*                   TO INVOKE PREPOST0 DURING SYSTEM INITIALIZATION.\n*\n*         JES2/JES3/DYNALLOC: EXIT CODE IS REQUIRED TO FORCE NEW\n*                   DATASETS TO BE CATALOGED--I.E., TO CHANGE DISP=\n*                   (,KEEP), TO DISP=(,CATLG).  THESE EXITS ARE\n*                   DISCUSSED IN MORE DETAIL TWO PAGES HENCE.\n*\n*         WYLBUR: IF WYLBUR OR A SIMILAR TEXT-EDITING/JOB SUBMISSION\n*                   SYSTEM IS USED, IT MUST BE MODIFIED TO RECOGNIZE\n*                   THE RETURN CODES ISSUED HERE.\n*\n*\n*        A NOTE REGARDING RETURN CODES:\n*\n*         IBM'S DOCUMENTATION ONLY ALLUDES TO THE ACTUAL VALUES\n*         RETURNED TO THE DADSM CALLER.  HERE'S WHAT THEY ARE:\n*\n*         ALLOCATE (SVC 32): R15 CONTAINS X'B4' FOR A RETURN CODE\n*                   OF 4 FROM THIS EXIT.  THE LOW-ORDER HALFWORD\n*                   OF R0 CONTAINS THE REASON CODE SUPPLIED BY\n*                   THIS EXIT.\n*\n*         RENAME (SVC 30): R15 IS 8 (\"UNUSUAL CONDITION ENCOUNTERED\"),\n*                   AND THE STATUS CODE IN THE VOLUME LIST ENTRY IS\n*                   SET TO 4 (WHICH COULD ALSO INDICATE AN I/O ERROR;\n*                   THERE'S NO WAY TO TELL).\n*\n*\n*        ASSEMBLY OF THIS MODULE REQUIRES ASSEMBLER H DUE TO THE USE\n*        OF FORWARD REFERENCES IN DEFINING SEVERAL LENGTH FIELDS.\n*\n*\n*\n*        MESSAGES ISSUED:\n*\n*         CNY651I XXXXXXXX REQUEST DENIED, DATASET NAME IS ALREADY\n*                  CATALOGED ON VVVVVV:\n*         CNY652I XXXXXXXX REQUEST DENIED, DSNAME DOES NOT CONFORM\n*                  TO CUNY STANDARDS:\n*         CNY653I  VOLUME=VVVVVV, DSNAME=DDDDDDDDDDDDDDDDDDDD...\n*         CNY654I XXXXXXXX REQUEST DENIED, REQUIRED GDG BASE IS NOT\n*                  CATALOGED:\n*         CNY655I XXXXXXXX REQUEST DENIED, NO RACF AUTHORITY TO CREATE\n*                  DATASETS ON THIS VOLUME:\n*         CNY659I DADSM EXIT HAS ABENDED, SYSTEM CODE=SSS, JOB=JJJJJJJJ\n*\n*\n*        PROGRAM FUNCTIONAL ROUTINES:\n*\n*        IGGPRE00 - PRE-EXIT MAINLINE\n*        IGGPOST0 - POST-EXIT MAINLINE\n*        EXIT     - EXIT (I.E., GO AWAY) ROUTINE\n*        PREALL   - PRE-EXIT ALLOCATE FUNCTION\n*        PREREN   - PRE-EXIT RENAME FUNCTION\n*        PREEXT   - PRE-EXIT EXTEND FUNCTION\n*        COMMON   - PRE-EXIT COMMON FUNCTIONS\n*        ERROR    - EXIT ERROR EXIT ROUTINES\n*        SPECINIT - SPECIAL INITIALIZATION ENTRY ROUTINE\n*        SUPERLOC - CATALOG SUPERLOCATE ROUTINE\n*        DSNCHECK - DSNAME STANDARDS CHECK\n*        RACCHECK - RACF AUTHORITY CHECK\n*        VOLDSNIN - VOLUME & DSNAME INITIAL CHECK\n*        MODDSCB  - FORMAT 1 DSCB MODIFICATION ROUTINE  *CUNY CODE*\n*        INITPPWA - WORKAREA INITIALIZATION\n*        ENQCHECK - SYSZTIOT ENQ INITIALIZATION AND CHECK\n*        FINDSIOT - SCAN DSAB CHAIN AND LOCATE SIOT (ALLOCATE ONLY)\n*        AUTHCHK  - AUTHORIZATION CHECK & PROGRAM NAME DETERMINATION\n*        ESTAEXIT - ESTAE EXIT\n*        PPWA     - WORK AREA DSECT\n*        CONSTANTS\n*        SYSTEM DSECTS\n*\n*\n*\n*\n*        ********************\n*        * MODIFICATION LOG *\n*        ********************\n*\n*        VERSION 1.1, 30 JUNE 1987\n*          -- ADD CHECK FOR GDG BASE ENTRY IN CATALOG WHEN DSNAME\n*             LOOKS LIKE A GDG.  ADDED NEW MESSAGE (CNY654I) AND\n*             ADDITIONAL REASON CODE (3).\n*          -- ALLOW IEHMOVE COPY/MOVE TO BYPASS CATALOGABILITY TESTS.\n*          -- REVISE CUNY VOLUME LIST.\n*\n*        VERSION 1.2, 15 JANUARY 1988\n*          -- ADD CODE TO DETECT VVDS AUTOMATIC ALLOCATION.  IT WAS\n*             BEING REJECTED (INVALID DSNAME) FOR NON-PRIV'ED USERS\n*             BECAUSE IT WAS NOT RECOGNIZED AS A VSAM ALLOCATION.\n*          -- REVISE CUNY VOLUME LIST.\n*\n*        VERSION 1.3, 01 JUNE 1988\n*          -- ALLOW CATALOG ALLOCATION IN THE \"SUPERLOC\" ROUTINE\n*             *IF* THE EXIT WAS CALLED FOR RENAME.  THIS LETS THE\n*             THE CATALOGABILITY CHECK ALWAYS WORK FOR RENAMES.\n*          -- UPDATE SOME INCORRECT COMMENTARY.\n*\n*        VERSION 1.4, 15 OCTOBER 1990\n*          -- ADD RACROUTE TO CHECK RACF AUTHORITY TO CREATE DATASETS\n*             ON A SPECIFIC VOLUME.\n*          -- CUNY STAFF JOBS ARE NO LONGER EXEMPT FROM DSNAME CHECKS.\n*          -- UPDATE COMMENTARY AS APPROPRIATE.\n*\n*        VERSION 1.5, 16 APRIL 1991\n*          -- REMOVE MOST MODIFICATIONS FROM FORMAT 1 DSCB, AND\n*             ELIMINATE THE USE OF SVC 255.\n*\n*        VERSION 1.6, 25 APRIL 1991\n*          -- THE CUNY VOLUME LIST IS UPDATED TO BE MORE INCLUSIVE.\n*\n*        VERSION 1.7, 22 JULY 1991\n*          -- MODIFIED FOR DFP/XA.  ADDED AMODE/RMODE; REMOVED USE OF\n*             CUNYCVT (CVTUSER IS NOW USED); UPDATED COMMENTS.\n*\n*        VERSION 1.8, 24 JANUARY 1992\n*          -- CORRECTED AN 0C4 AFTER LABEL \"GOTPRB\" WHEN A PRB CREATED\n*             BY SYNCH HAD A ZERO CDE ADDRESS.\n*          -- EXPANDED INFORMATION RETURNED IN SDWA.\n*          -- MOVED ESTAE EXIT CODE AFTER CONSTANT AREA TO PROVIDE FOR\n*             ADDITIONAL ADDRESSABILITY.\n*          -- RESEQUENCED ENTIRE MODULE.\n*\n*        VERSION 1.9, 20 NOVEMBER 1992\n*          -- BYPASS THIS EXIT FOR AN SMS-MANAGED VOLUME.\n*          -- BYPASS ERROR MESSAGES WHEN AN ALLOCATE REQUEST FOR A\n*             NON-SPECIFIC VOLUME WITH A SYSTEM-GENERATED DSNAME FAILS\n*             ON A STORAGE VOLUME DUE TO A NON-CONFORMING DSNAME.  NOTE\n*             THAT THE REQUEST IS STILL FAILED; ONLY THE MESSAGES ARE\n*             BYPASSED.  MVS ALLOCATION WILL RETRY ON OTHER VOLUMES\n*             BEFORE IT FAILS THE JOB.\n*          -- UPDATE THE VOLUME PREFIX LIST, REMOVING \"BMD\" AND \"RKD\".\n*          -- BYPASS DSNAME VALIDATION FOR THE IBM SERVICE DIRECTOR\n*             (TSO USERID SRVIM) WHEN IT ATTEMPTS TO ALLOCATE A SYS3.\n*             DATASET ON A CNY VOLUME.\n*\n*        VERSION 1.10, 7 OCTOBER 1993\n*          -- BYPASS ERROR MESSAGES WHEN AN ALLOCATE REQUEST FOR A\n*             NON-SPECIFIC VOLUME FAILS ON A PUBLIC VOLUME DUE TO LACK\n*             OF RACF PERMISSION.  NOTE THAT THE REQUEST IS STILL\n*             FAILED; ONLY THE MESSAGES ARE BYPASSED.  MVS ALLOCATION\n*             WILL RETRY ON OTHER VOLUMES BEFORE IT FAILS THE JOB.\n*             THIS MAKES IT POSSIBLE TO SET UP SCRATCH (PUBLIC)\n*             VOLUMES WITH LIMITED ACCESS.\n*          -- USE LOG=NONE ON THE RACROUTE FOR AN ALLOCATE REQUEST THAT\n*             MEETS THE ABOVE CONDITIONS.  OTHERWISE THERE ARE RACF\n*             LOGGING MESSAGES FOR EACH REJECTED ATTEMPT.\n*          -- ADDED AN ADDITIONAL GLOBAL BASE REGISTER.\n*\n*        VERSION 1.11, 30 SEPTEMBER 1994\n*          -- ADD CODE AT \"MODDSCB3\" TO SET THE CREATION TIME \"HIGH\"\n*             IF TODAY'S DATE DIFFERS FROM THE VALUE TO BE SAVED AS\n*             THE DATASET'S CREATION DATE.\n*\n*        VERSION 1.12, 8 OCTOBER 1996\n*          -- UPDATES FOR MVS/ESA AND DFSMS:\n*             - CHANGE USAGE OF \"SIOPSCNT\" TO \"SIOTSMS6\".  SIOPSCNT\n*               USED TO BE RECOMMENDED (SEE INFO ITEM Q352076) BUT IT\n*               NO LONGER EXISTS AT THIS LEVEL.  CODE INSPECTION SHOWS\n*               THAT IEFDB414 AND IEFVDA SET SIOTSMS6 WHEN ANY VOLUME-\n*               RELATED JCL KEYS ARE SPECIFIED, SO THAT FLAG IS NOW\n*               TESTED HERE.\n*             - CODE TO CLEAR DSCB1 FIELDS USED BY CUNY MODS IN OLDEN\n*               TIMES WAS REMOVED, AS THOSE FIELDS ARE NOW DEFINED AND\n*               USED BY DFSMS.\n*             - CODE AT MODDSCB TO BYPASS THE PROBLEM DESCRIBED BY\n*               OY44612 IS REMOVED, AS THAT'S BEEN FIXED AT HBB4430.\n*             - COMMENTS WERE UPDATED FOR THE CHANGE IN THE LOCATION\n*               OF THE REASON CODE (NOW IN R0 FOR THE CALLER OF THE\n*               ALLOCATION SVCS).\n*             - CHANGE THE EPA (FOR THE SWAREQ CALL) TO BE AN EXTENDED\n*               EPA (LENGTH OF SWAEPAX) TO FIX OCCASIONAL 0C4 FAILURES.\n*               THIS REQUIREMENT IS POORLY DOCUMENTED...\n*             - EXCLUDE \"FDRABR.\" DATASETS FROM DSNAME VALIDATION WHEN\n*               THE PROGRAM IS \"FDR...\".\n*             - UPDATE TO FINDSIOT ROUTINE TO TAKE ACCOUNT OF THE FACT\n*               THAT THE JFCB PASSED TO IGGPRE00 IS NOW A *COPY* OF THE\n*               ACTUAL JFCB, SO A COMPARE ON THE JFCB ADDRESS WILL\n*               NEVER MATCH.  WE NOW COMPARE THE CONTENTS OF THE JFCB\n*               (ON THE ASSUMPTION THAT THERE WILL NOT BE TWO IDENTICAL\n*               JFCBS FOR A TEMPORARY ALLOCATION ON THE SAME VOLUME).\n*             THE DATASET'S CREATION DATE.\n*\n*        VERSION 1.13, 26 AUGUST 1997\n*          -- CHANGE TESTAUTH TO SPECIFY RBLEVEL=1 TO AVOID ABEND 177.\n         TITLE 'IGGPRE00 - COMMENTARY ON REQUIRED EXTERNAL MODIFICATION*\n               S'\n*          *************************************************\n*          * COMMENTARY ON REQUIRED EXTERNAL MODIFICATIONS *\n*          *************************************************\n*\n*\n*        THIS PAGE DESCRIBES THE CODE THAT'S REQUIRED EXTERNAL TO\n*        THIS EXIT TO CHANGE THE DISP FOR NEW DATASETS FROM \"KEEP\" TO\n*        \"CATLG\".  THIS FUNCTION *CANNOT* BE IMPLEMENTED WITHIN THIS\n*        EXIT BECAUSE IT'S TOO LATE HERE -- ANY REQUIRED USERCATALOGS\n*        MUST HAVE BEEN DETERMINED BY THE INITIATOR PRIOR TO THIS\n*        POINT, SO THAT THEY WILL BE ALLOCATED AT TERMINATION TIME.\n*        (OTHERWISE MESSAGE IEC331I 004-002 WILL RESULT, AND THE\n*        DATASET WON'T GET CATALOGED.)\n*\n*\n*        THE FOLLOWING EXITS APPEAR TO BE APPROPRIATE PLACES FOR THIS\n*        CODE:\n*\n*        FOR JES3: EXIT IATUX06 IS CALLED AFTER CONVERTER/INTERPRETER\n*                  PROCESSING AND CAN ACCESS THE JFCB AND SIOT FOR\n*                  EACH DD CARD.\n*\n*        FOR JES2: SMF STEP INITIATION EXIT IEFUSI CAN ACCESS THE JFCB\n*                  AND SIOT CONTROL BLOCKS (THOUGH THAT'S NOT PART OF\n*                  THE PUBLISHED EXTERNAL INTERFACE FOR THE EXIT, BUT\n*                  NOTE THAT THE LCT *IS* ADDRESSABLE FROM R10 THERE).\n*                  JES2 EXIT 6 OR SMF EXIT IEFUJV COULD ALSO BE USED,\n*                  BUT THE DD CARD INFORMATION THERE IS IN INTERNAL-\n*                  TEXT FORMAT, WHICH ISN'T AS SIMPLE TO DEAL WITH.\n*                  (IT ALSO MAY BE POSSIBLE TO ACCESS THE JFCB AND\n*                  SIOT IN SWA WHEN IEFUJV IS CALLED WITH ENTRY CODE\n*                  32 (INTERPRETATION COMPLETED), BUT THIS PROBABLY\n*                  WOULDN'T BE A DOCUMENTED PART OF THE INTERFACE.)\n*\n*        FOR DYNAMIC ALLOCATION: EXIT IEFDB401 CAN INSPECT AND CHANGE\n*                  THE DYNALLOC PARAMETER LISTS.\n*\n*\n*        THE LOGIC IN EACH INSTANCE IS AS FOLLOWS:\n*\n*        DETERMINE WHETHER THE DATASET MUST BE CATALOGED ACCORDING\n*           TO INSTALLATION STANDARDS.  (THIS TEST OUGHT TO AGREE\n*           WITH THE INSTALLATION-DEPENDENT CODING IN THIS EXIT).\n*        IF SO, CHECK IF THE DISP IS (NEW,KEEP).\n*        IF SO, CHANGE THE DISP TO (NEW,CATLG).\n*\n*        IF FEASIBLE, THE EXIT SHOULD ALSO IDENTIFY RECEIVED PASSED\n*           DATASETS WITH DISP=(OLD,KEEP) WHICH WERE CREATED IN THE\n*           CURRENT JOB, AND THEN CHANGE THEIR DISP TO (OLD,CATLG).\n*           THIS IS DEFINITELY POSSIBLE IN THE JES3 EXIT, IATUX06.\n*\n*\n*        NOTE THAT ANY OF THESE EXITS THAT USE THE JFCB AND SIOT WILL\n*        NEED TO BE UPDATED FOR MVS/XA 2.2+, TO SUPPORT THE RELOCATION\n*        OF SWA ABOVE THE 16 MEG LINE.\n         TITLE 'IGGPRE00/POST0 - COMMENTARY ON FUNCTIONAL LIMITATIONS'\n*              ****************************************\n*              * COMMENTARY ON FUNCTIONAL LIMITATIONS *\n*              ****************************************\n*\n*\n*        THIS PAGE DESCRIBES THE LIMITATIONS ON DATASETS THAT CAN BE\n*        PROCESSED BY THIS EXIT, EITHER FOR THE CATALOGABILITY CHECK\n*        OR FOR DSNAME VALIDATION.\n*\n*\n*                 CATALOGABILITY-CHECK LIMITATIONS:\n*\n*        A DATASET WILL NOT BE VALIDATED FOR CATALOGABILITY IF ANY\n*        OF THE FOLLOWING IS TRUE:\n*\n*           DATASET IS VIO\n*           DATASET IS VSAM (DSORG=AM)\n*           DATASET IS CURRENTLY CATALOGED ON MORE THAN ONE VOLUME\n*           VOLUME IS SMS-MANAGED\n*           CATALOG SUPERLOCATE ENCOUNTERS AN I/O ERROR\n*           CALLING PROGRAM IS DFHSM\n*           CALLING PROGRAM IS DFDSS\n*           CALLING PROGRAM IS FDRDSF\n*           DATASET IS ISAM AND IS NOT THE FIRST IN THE ALLOCATION\n*           CALLING PROGRAM IS THE INITIATOR AND A STEPCAT EXISTS\n*           CALLING PROGRAM IS DYNAMIC ALLOCATION AND THE REQUIRED\n*               USERCATALOG WAS NOT ALLOCATED IN THE STEP (THIS\n*               OCCURS WHEN THE DATASET'S DISP IS NOT \",CATLG\")\n*           CALLING PROGRAM IS THE INITIATOR AND THE PREPOST0\n*               \"SUBSYSTEM\" INITIALIZATION ROUTINE DID NOT\n*               SUCCESSFULLY ALLOCATE THE REQUIRED USERCATALOG\n*           CALLING PROGRAM IS NOT THE INITIATOR AND THE REQUIRED\n*               USERCATALOG IS NOT CURRENTLY ALLOCATED AND OPEN,\n*               AND THE DADSM FUNCTION IS \"ALLOCATE\"\n*           CALLING PROGRAM IS IEHMOVE (IEHMVESV)\n*\n*\n*                 DSNAME-STANDARDS LIMITATIONS:\n*\n*        A DATASET WILL BE EXCLUDED FROM THE DSNAME STANDARDS CHECK\n*        IF ANY OF THE FOLLOWING IS TRUE:\n*\n*           DATASET IS VIO\n*           DATASET IS VSAM (DSORG=AM)\n*           VOLUME IS SMS-MANAGED\n*           CALLING PROGRAM IS DFHSM\n*           CALLING PROGRAM IS ICKDSF\n*           CALLING PROGRAM IS IEHMOVE (IEHMVESV) AND THE DSNAME\n*               BEGINS WITH &&TEMP.T (WHICH IS CREATED FOR A \"MOVE\n*               DSNAME\" TO THE SAME VOLUME)\n*           CALLING PROGRAM IS FDR... AND THE DSNAME BEGINS WITH\n*               \"FDRABR.\"\n         TITLE 'IGGPRE00/POST0 - COMMENTARY ON UNIMPLEMENTED FUNCTIONS'\n*              *****************************************\n*              * COMMENTARY ON UNIMPLEMENTED FUNCTIONS *\n*              *****************************************\n*\n*\n*        A NUMBER OF OTHER FUNCTIONS MIGHT BE DESIRED IN THIS EXIT\n*        BUT HAVE NOT BEEN IMPLEMENTED AT THIS TIME.  THIS COMMENTARY\n*        DESCRIBES KNOWN PITFALLS, RESTRICTIONS, AND IMPLEMENTATION\n*        TECHNIQUES.\n*\n*\n*        FUNCTION: CATALOG OR UNCATALOG A DATASET IN IGGPOST0\n*\n*        THIS FUNCTION MAY BE EASY OR DIFFICULT DEPENDING ON THE\n*        SPECIFIC SITUATION.  THESE ARE SOME KNOWN CAVEATS:\n*\n*        IN MOST CASES, CAMLST BYTE 1 BIT 0 MUST BE SET, TO INHIBIT\n*            DYNAMIC ALLOCATION (THIS SETS CTGDOCAT IN THE CTGPL).\n*        IF THE SYSZTIOT ENQ IS HELD, CAMLST BYTE 2 BIT 3 MUST BE SET.\n*        IF A REQUIRED USERCATALOG IS NOT ALREADY OPEN, IT'S PROBABLY\n*            NOT POSSIBLE TO CATALOG OR UNCATALOG A DATASET HERE. CODE\n*            SIMILAR TO THAT IN THE SUPERLOCATE ROUTINE (FOLLOWING\n*            LABEL SUPLOC30) MIGHT BE SAFE, BUT ONLY AFTER THE CALLING\n*            ENVIRONMENT IS CAREFULLY DEFINED AND ANALYZED.\n*\n*\n*        FUNCTION: TSO SUPPORT\n*\n*        THE CATALOG CHECK IS NOT NECESSARY FOR TSO, AS TSO DOES\n*        CHECK THE CATALOG BEFORE CREATING A NEW DATASET.  HOWEVER,\n*        THE OTHER FUNCTIONS (SUCH AS RACF AUTHORIZATION, DSNAME\n*        VALIDATION, CHECKING FOR A GDG BASE, AND FORMAT 1 DSCB\n*        UPDATES) ARE STILL BE VALUABLE.  THIS EXIT DOES WORK WITH\n*        TSO WITHOUT PROBLEMS (ALTHOUGH THE MESSAGE THAT TSO ISSUES,\n*        \"IKJ56223 SPACE REQUEST DENIED BY INSTALLATION EXIT\", IS\n*        A BIT MISLEADING).\n*\n*\n*        FUNCTION: MVS/XA SUPPORT\n*\n*        THIS EXIT HAS BEEN TESTED AND MODIFIED TO WORK WITH\n*        MVS/XA 2.2 (DFP/XA 2.4).  A POSSIBLE EXPOSURE, THOUGH,\n*        IS THAT THE AUTOMATIC CATALOG REORIENTATION AFTER CATALOG\n*        RECOVERY MIGHT AFFECT THE EXIT'S USE OF A SAVED CATALOG\n*        ACB POINTER.\n*\n*        NOTE THAT THE EXIT MUST EXECUTE IN 31-BIT MODE WITH DFP 2.3+\n*        (SEE APAR OY12910), AS THE JFCB ADDRESS MAY BE ABOVE THE\n*        16-MEG LINE.  BECAUSE RACROUTE IS A 31-BIT INTERFACE TO\n*        RACF, AMODE(31) RMODE(ANY) *IS* VALID FOR RACF.\n*\n*        FOR MVS/ESA(TM), THERE DOESN'T SEEM TO BE ANY REASON THAT\n*        THE EXIT WON'T WORK, BUT IT HASN'T BEEN TESTED YET.  NOTE\n*        THAT SYSTEM-MANAGED DATASETS (USING THE NEW DFSMS) MUST BE\n*        CATALOGED, SO THE EXIT WON'T BE NEEDED FOR THEM.\n*\n*\n*        FUNCTION: SUPPORT OF DATASETS CATALOGED IN OS CVOLS OR\n*                  VSAM (NON-ICF) CATALOGS\n*\n*        OS CVOLS ARE NOT SUPPORTED; THEY DO NOT USE AN ACB, AND THE\n*        LOGIC IN \"SPECINIT\" WILL NOT WORK.  NON-ICF CATALOGS HAVE\n*        NOT BEEN TESTED; ANY CHANGES NEEDED WOULD PROBABLY BE IN THE\n*        SUPERLOCATE ROUTINE.  FOR REFERENCE, SEE INITIATOR MODULES\n*        IEFAB469 (JLOCATE) AND IEFAB4F4/5 (UN/ALLOCATE CATALOG).\n         TITLE 'IGGPRE00 - PRE-DADSM EXIT MAINLINE'\n********************************\n* IGGPRE00 - PRE-EXIT MAINLINE *\n********************************\n*\n*        THIS IS THE IGGPRE00 ENTRY FOR PROCESSING BEFORE THE\n*        DADSM SYSTEM ROUTINES.\n*\n*        THIS ROUTINE PERFORMS INITIAL PROCESSING AS COMMENTED BELOW.\n*\n*        GLOBAL REGISTER USAGE:\n*           R2, R3 = BASE\n*           R4 = EXIT RETURN CODE (PRESET TO 0)\n*           R5 = EXIT WORK AREA (PPWA)\n*           R9 = LOCAL RETURN REGISTER\n*           R11 = EXIT PARAMETER LIST (IECIEXPL)\n*           R13 = SAVE AREA POINTER (NOT SET UNTIL PPWA IS INITIALIZED)\n*\nIGGPRE00 CSECT ,\nIGGPRE00 AMODE 31\nIGGPRE00 RMODE ANY\n         SPACE ,\n         SAVE  (14,12),,IGGPRE00-&SYSDATE  SAVE REGISTERS AT ENTRY\n         LR    R2,R15              GET A BASE REGISTER\n         USING IGGPRE00,R2\n         LA    R3,IGGPRE00+4095    GET A 2ND BASE REGISTER\n         USING IGGPRE00+4095,R3\n         USING PSA,R0              REQUIRED \"USING\" FOR LOW-CORE\n         SPACE ,\n*              GET EXIT PARAMETER LIST (IECIEXPL)\n         SPACE ,\n         LR    R11,R1              GET ADDRESS OF PRE-PROCESSING\n         USING PREPL,R11               EXIT PARAMETER LIST\n         SPACE ,\n*              PRESET THE EXIT RETURN CODE (R4) TO ZERO.\n         SPACE ,\n         XR    R4,R4               PRESET IT HERE...\n         SPACE ,\n*              PRESET THE PPWA POINTER (R5) TO ZERO, INDICATING\n*              TO THE EXIT ROUTINE THAT THERE IS NO PPWA\n         SPACE ,\n         XR    R5,R5\n         SPACE ,\n*              MAKE A QUICK EXIT ON ENTRY CONDITIONS FOR WHICH\n*              WE DO NO PROCESSING:\n*                    PARTIAL RELEASE\n*                    SCRATCH\n*                    VIO DATASET\n*                    EXTEND ON CURRENT VOLUME\n*                    VOLUME IS SMS-MANAGED\n         SPACE ,\n         CLI   IEXFUNC,IEXPR       PARTIAL RELEASE?\n         BE    EXIT                 YES, QUICK EXIT\n         CLI   IEXFUNC,IEXSCR      SCRATCH?\n         BE    EXIT                 YES, QUICK EXIT\n         SPACE ,\n*              VIO DATASETS ARE SKIPPED SINCE THEY HAVE NO VOLUMES\n*              TO VALIDATE & CAN'T BE CATALOGED & CAN'T HAVE PASSWORD\n*              PROTECTION & THIS EXIT CAN'T PASS A MODEL DSCB FOR THEM\n*              ANYWAY.\n         SPACE ,\n         TM    IEXFLAG,IEXVIO      VIO DATASET?\n         BO    EXIT                 YES, QUICK EXIT\n         CLI   IEXFUNC,IEXEXT      EXTEND?\n         BNE   PRE01                (NO)\n         CLI   IEXEXTCD,X'04'      ON NEW VOLUME?\n         BNE   EXIT                 NO, QUICK EXIT\nPRE01    DS    0H\n         SPACE ,\n         L     R1,IEXUCB           @ UCB, FROM EXIT PARM LIST\n         USING UCBOB,R1\n         TM    UCBFL5,UCBSMS       IS VOLUME SMS-MANAGED?\n         BO    EXIT                 YES, QUICK EXIT\n         DROP  R1\n         SPACE ,\n*              SET UP WORK AREA (PPWA)\n         SPACE ,\n*              NOTE THAT INITPPWA SETS R13 AND CHAINS THE SAVE AREAS\n         SPACE ,\n         BAL   R9,INITPPWA         GO GETMAIN & INITIALIZE PPWA\n*                                  ADDRESS IS RETURNED IN R5\n         USING PPWA,R5             SET UP ADDRESSABILITY\n         SPACE ,\n*              SET UP ESTAE EXIT\n         SPACE ,\n         ESTAE ESTAEXIT,CT,PARAM=(R5),TERM=YES,PURGE=NONE,ASYNCH=YES,  *\n               MF=(E,WAESTAE)\n         SPACE ,\n         OI    WAFLAG1,WAFESTAE    SHOW THAT THE ESTAE IS ESTABLISHED\n         SPACE ,\n*              INITIALIZE THE ENQ PARAMETERS AND CHECK IF THE SYSZTIOT\n*              RESOURCE IS HELD BY THIS TASK\n         SPACE ,\n         BAL   R9,ENQCHECK\n         SPACE ,\n*              SAVE THE PROGRAM NAME IF IT'S AN AUTHORIZED PROGRAM\n         SPACE ,\n         BAL   R9,AUTHCHK\n         SPACE ,\n*              ROUTE PROCESSING ACCORDING TO DADSM FUNCTION CODE\n         SPACE ,\n         CLI   IEXFUNC,IEXALL      ALLOCATE?\n         BE    PREALL               BIF SO\n         CLI   IEXFUNC,IEXEXT      EXTEND (ON A NEW VOLUME)?\n         BE    PREEXT               BIF SO\n         CLI   IEXFUNC,IEXREN      RENAME?\n         BE    PREREN               BIF SO\n         SPACE ,\n*              NOTE THAT DFP/XA HAS TWO ADDITIONAL ENTRY TYPES:\n*               - X'06' \"PARTREL\" PARTIAL RELEASE\n*               - X'07' EXTEND (VSAM CALLER WITHOUT DEB PARAMETER)\n*              THESE (AND ANY MORE) WILL END UP HERE AND THEN EXIT.\n         SPACE ,\n         B     EXIT                LEFTOVERS (S.N.O.) GO TO EXIT\n         TITLE 'IGGPOST0 - POST-DADSM EXIT MAINLINE'\n*********************************\n* IGGPOST0 - POST-EXIT MAINLINE *\n*********************************\n*\n*        THIS IS THE IGGPOST0 ENTRY FOR PROCESSING AFTER THE\n*        DADSM SYSTEM ROUTINES.\n*\n*        THIS ROUTINE CURRENTLY PERFORMS NO PROCESSING.\n*\n*        IF ANY FUNCTIONAL CODE IS ADDED HERE, THE ESTAE ENVIRON-\n*        MENT MUST BE REESTABLISHED (AS FOR THE IGGPRE00 ENTRY).\n*\n*        REGISTER USAGE:\n*           R2, R3 = BASE\n*           R4 = EXIT RETURN CODE (PRESET TO 0)\n*           R5 = EXIT WORK AREA (PPWA)\n*           R11 = EXIT PARAMETER LIST (IECIEXPL)\n*\n         ENTRY IGGPOST0\n         SPACE ,\nIGGPOST0 SAVE  (14,12),,*          SAVE REGISTERS AT ENTRY\n         DROP  R2                  GLOBAL BASE IS NOT VALID NOW\n         USING IGGPOST0,R15        THIS ONE IS ALL WE GOT\n         L     R2,BASEADDR         GET BACK A GOOD VALUE\n         DROP  R15\n         USING IGGPRE00,R2         REINSTATE GLOBAL BASE\n         LA    R3,IGGPRE00+4095    GET OUR 2ND BASE REGISTER\n         USING IGGPRE00+4095,R3\n         SPACE ,\n*              GET EXIT PARAMETER LIST (IECIEXPL)\n         SPACE ,\n         LR    R11,R1              GET ADDRESS OF PRE-PROCESSING\n*                                      EXIT PARAMETER LIST\n         SPACE ,\n*              PRESET THE EXIT RETURN CODE (R4) TO ZERO.\n         SPACE ,\n         XR    R4,R4               PRESET IT HERE...\n         SPACE ,\n*              FIND THE PRE/POST WORKAREA\n         SPACE ,\n         L     R5,IEXRSVWD         GET SAVED ADDRESS FROM PARM LIST\n         LTR   R5,R5               IS THERE ONE?\n         BZ    EXIT                NO WORK AREA, JUST RETURN\n         SPACE ,\n*              SET OUR FLAG TO SHOW WE'RE IN POST0.  THIS WILL ALERT\n*              THE EXIT ROUTINE TO FREE THE WORK AREA.\n         SPACE ,\n         OI    WAFLAG1,WAFPOST0    SET IGGPOST0 FLAG\n         SPACE ,\n*              RETURN TO DADSM\n         SPACE ,\n         B     EXIT                (YEAH, I KNOW IT'S THE NEXT INSTR)\n         TITLE 'EXIT     - IGGPRE00/IGGPOST0 EXIT ROUTINE'\n******************************\n* EXIT     - GO-AWAY ROUTINE *\n******************************\n*\n*        THIS ROUTINE RETURNS CONTROL FROM IGGPRE00 AND IGGPOST0\n*        BACK TO THE DADSM SYSTEM ROUTINES.  THE ESTAE IS CANCELLED\n*        IF ACTIVE, AND THE PPWA IS FREED ON EXIT FROM IGGPOST0.\n*\n*        INPUT REGISTERS:\n*           R4 = RETURN CODE TO BE PASSED BACK TO DADSM\n*           R5 = ADDRESS OF PPWA, OR ZERO IF NO PPWA\n*\n*        FLAG \"WAFESTAE\" INDICATES IF OUR ESTAE IS ACTIVE (AND\n*           THEREFORE MUST BE CANCELLED)\n*        FLAG \"WAFPOST0\" INDICATES WE ARE EXITING FROM IGGPOST0\n*           (AND THEREFORE MUST FREE THE PPWA)\n*\nEXIT     DS    0H\n         SPACE ,\n*              RESTORE R13 FROM THE SAVE AREA IN THE PPWA IF WE ARE\n*              EXITING FROM IGGPRE00\n*\n*              NOTE THAT IGGPOST0 DOES *NOT* USE THE SAVE AREA, AS\n*              ONE IS NOT NEEDED FOR SVC CALLS AND IT MAKES NO OTHER\n*              EXTERNAL CALLS\n         SPACE ,\n         LTR   R5,R5               TEST FOR PPWA, CANNOT RESTORE R13\n         BZ    EXIT1               IF THERE IS NONE\n         TM    WAFLAG1,WAFPOST0    TEST IF THIS EXIT IS FROM IGGPOST0\n         BO    EXIT1               BRANCH IF YES\n         L     R13,SAVEAREA+4      IT'S IGGPRE00, RESTORE SAVED R13\n         SPACE ,\nEXIT1    DS    0H\n         SPACE ,\n*              CANCEL THE ESTAE EXIT IF THERE IS ONE\n         SPACE ,\n         LTR   R5,R5               TEST FOR PPWA, IF NOT THEN NO ESTAE\n         BZ    EXIT2               SKIP THIS IF NO\n         TM    WAFLAG1,WAFESTAE    TEST IF ESTAE IS ACTIVE\n         BZ    EXIT2               SKIP THIS IF NO\n         SPACE ,\n         ESTAE 0                   ELSE CANCEL ESTAE, COMME CA\n         SPACE ,\n         NI    WAFLAG1,255-WAFESTAE  AND RESET PPWA FLAG TOO\n         SPACE ,\nEXIT2    DS    0H\n         SPACE ,\n*              FREEMAIN THE PPWA IF EXITING FROM IGGPOST0\n         SPACE ,\n         LTR   R5,R5               TEST FOR PPWA, IF NONE DON'T FREE IT\n         BZ    EXIT3               SKIP THIS IF NONE\n         TM    WAFLAG1,WAFPOST0    TEST IF EXIT IS FROM IGGPOST0\n         BZ    EXIT3               SKIP THIS IF NO\n         SPACE ,\n         FREEMAIN RU,LV=WAEND-PPWA,SP=230,A=(R5)  FREEIT\n         SPACE ,\n         XR    R5,R5               SHOW THAT THE PPWA IS FREE\n         SPACE ,\nEXIT3    DS    0H\n         SPACE ,\n*              RETURN TO DADSM\n         SPACE ,\n         LR    R15,R4              PUT RETURN CODE IN R15\n         RETURN (14,12),RC=(15)    BYE BYE\n         SPACE ,\n         TITLE 'PREALL   - IGGPRE00 ALLOCATE FUNCTION MAINLINE'\n********************************\n* PREALL   - ALLOCATE FUNCTION *\n********************************\n*\n*        THIS ROUTINE PERFORMS SPECIFIC INITIALIZATION FOR\n*        ALLOCATE PROCESSING, CALLS THE \"VOLDSNIN\" ROUTINE,\n*        AND SETS ANY OTHER ALLOCATION-DEPENDENT FLAGS.\n*\n*        REGISTER USAGE:\n*           R1 = WORK\n*\nPREALL   DS    0H\n         SPACE ,\n*              IF THIS ENTRY IS FOR OUR SPECIAL INITIALIZATION, GO\n*              DIRECTLY TO THE \"SPECINIT\" ROUTINE.\n         SPACE ,\n         TM    WAFLAG2,WAFINIT     IS THE FLAG SET?\n         BO    SPECINIT            YES, GO RIGHT TO SPECIAL CODE\n         SPACE ,\n*              PRESET MESSAGES CNY651/2 TO \"ALLOCATE\"\n         SPACE ,\n         MVC   WAC651AL,CON65ALL   LIKE SO\n         SPACE ,\n*              DETERMINE IF THIS IS A VSAM DATASET.\n*              NOTE THAT AUTOMATIC ALLOCATION OF A VVDS PASSES A\n*              \"PARTIAL\" DSCB, THOUGH NORMAL VSAM ALLOCATION DOESN'T.\n         SPACE ,\n         TM    IEXFLAG,IEXMF1      ENSURE THAT A JFCB IS PRESENT\n         BO    PREALL10            BRANCH IF NOT TO TEST \"PARTIAL\" DSCB\n         SPACE ,\n*              CALL THE \"FINDSIOT\" ROUTINE TO LOCATE THE SIOT THAT\n*              CORRESPONDS TO THE JFCB.  IT'S CHECKED AT ERROR2,\n*              ERROR4, OR IN THE \"RACCHECK\" ROUTINE.\n         SPACE ,\n         BAL   R9,FINDSIOT         FIND @ SIOT\n         SPACE ,\n         L     R1,IEXPTR1\n         USING JFCB,R1             GET @ JFCB\n         TM    JFCDSRG2,JFCORGAM   IS THIS A VSAM ALLOCATION??\n         BZ    PREALL20            NO\n         OI    WAFLAG1,WAFVSAM     YES, SET THE FLAG\n         DROP  R1\n         B     PREALL20            SKIP AROUND PARTIAL-DSCB TESTS\n         SPACE ,\nPREALL10 L     R1,IEXFMT1          ADDRESS F1 DSCB DATA AREA\n         USING DS1FMTID,R1\n         TM    DS1DSORG+1,DS1ACBM  IS THIS A VSAM DATASET (ONLY VVDS\n         BZ    PREALL20             ALLOCATION USES THIS PATH)?\n         OI    WAFLAG1,WAFVSAM     IF SO, SET THE VSAM-DATASET FLAG\n         DROP  R1\nPREALL20 DS    0H\n         SPACE ,\n*              CHECK WHAT FURTHER CHECKING IS NEEDED FOR VOLUME/DSNAME\n         SPACE ,\n         L     R1,IEXDSN           @ DSNAME FROM EXIT PARM LIST\n         BAL   R9,VOLDSNIN         CALL VOLUME/DSN INITIAL CHECK\n         SPACE ,\n*              SET FLAG TO PERFORM RACF CHECK (NOT SET IN \"COMMON\"\n*              BECAUSE IT'S NOT DONE FOR RENAME)\n         SPACE ,\n         OI    WAFLAG2,WAFRACCK    RACF CHECK IS NEEDED\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTION                  *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n*              SET FLAG TO PERFORM CUNY FORMAT 1 DSCB MODIFICATIONS\n         SPACE ,\n         OI    WAFLAGU,WAFMDSCB    MUST GO TO DSCB-MODIFY ROUTINE\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              END OF INSTALLATION-DEPENDENT CODE                   *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n*              CONTINUE IN COMMON CODE\n         SPACE ,\n         B     COMMON              ETC.\n         TITLE 'PREREN   - IGGPRE00 RENAME FUNCTION MAINLINE'\n******************************\n* PREREN   - RENAME FUNCTION *\n******************************\n*\n*        THIS ROUTINE PERFORMS SPECIFIC INITIALIZATION FOR\n*        RENAME PROCESSING, CALLS THE \"VOLDSNIN\" ROUTINE,\n*        AND SETS ANY OTHER RENAME-DEPENDENT FLAGS.\n*\n*        REGISTER USAGE:\n*           R1 = WORK\n*\nPREREN   DS    0H\n         SPACE ,\n*              PRESET MESSAGES CNY651/2 TO \"  RENAME\"\n         SPACE ,\n         MVC   WAC651AL,CON65REN   LIKE SO\n         SPACE ,\n*              DETERMINE IF THIS IS A VSAM DATASET.\n         SPACE ,\n         L     R1,IEXFMT1          RENAME ALWAYS PASSES FORMAT 1 DSCB\n         USING DS1FMTID,R1         GET IT\n         TM    DS1DSORG+1,DS1ACBM  IS THIS A VSAM DATASET??\n         BZ    PREREN10            NO\n         OI    WAFLAG1,WAFVSAM     YES, SET VSAM FLAG\nPREREN10 DS    0H\n         DROP  R1\n         SPACE ,\n*              CHECK WHAT FURTHER CHECKING IS NEEDED FOR VOLUME/DSNAME\n         SPACE ,\n         L     R1,IEXPTR1          @ RENAME PARM LIST FROM EXIT PARMS\n         L     R1,8(,R1)           @ NEW DSNAME FROM RENAME PARM LIST\n*                                  (NOTE THAT IEXDSN IS THE *OLD* DSN)\n         BAL   R9,VOLDSNIN         CALL VOLUME/DSN INITIAL CHECK\n         SPACE ,\n*              ANY INSTALLATION-DEPENDENT CODE COULD BE ADDED HERE.\n         SPACE ,\n*              CONTINUE IN COMMON CODE\n         SPACE ,\n         B     COMMON              ETC.\n         TITLE 'PREEXT   - IGGPRE00 EXTEND FUNCTION MAINLINE'\n******************************\n* PREEXT   - EXTEND FUNCTION *\n******************************\n*\n*        THIS ROUTINE PERFORMS SPECIFIC INITIALIZATION FOR\n*        EXTEND PROCESSING, CALLS THE \"VOLDSNIN\" ROUTINE,\n*        AND SETS ANY OTHER EXTEND-DEPENDENT FLAGS.\n*\n*        REGISTER USAGE:\n*           R1 = WORK\n*\nPREEXT   DS    0H\n         SPACE ,\n*              PRESET MESSAGES CNY651/2 TO \"  EXTEND\"\n         SPACE ,\n         MVC   WAC651AL,CON65EXT   LIKE SO\n         SPACE ,\n*              DETERMINE IF THIS IS A VSAM DATASET.\n         SPACE ,\n         L     R1,IEXPTR1          EXTEND ALWAYS PASSES A JFCB\n         USING JFCB,R1             GET @ JFCB\n         TM    JFCDSRG2,JFCORGAM   IS THIS A VSAM ALLOCATION??\n         BZ    PREEXT10            NO\n         OI    WAFLAG1,WAFVSAM     YES, SET THE FLAG\n         DROP  R1\nPREEXT10 DS    0H\n         SPACE ,\n*              CHECK WHAT FURTHER CHECKING IS NEEDED FOR VOLUME/DSNAME\n         SPACE ,\n         L     R1,IEXDSN           @ DSNAME FROM EXIT PARM LIST\n         BAL   R9,VOLDSNIN         CALL VOLUME/DSN INITIAL CHECK\n         SPACE ,\n*              ENSURE THAT NO CATALOG CHECK IS DONE ON EXTEND\n*              (IT'S NOT MEANINGFUL...)\n         SPACE ,\n         NI    WAFLAG1,255-WAFCATCK  RESET \"CAT CHECK NEEDED\" FLAG\n         SPACE ,\n*              SET FLAG TO PERFORM RACF CHECK\n         SPACE ,\n         OI    WAFLAG2,WAFRACCK    RACF CHECK IS NEEDED\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTION                  *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n*              SET FLAG TO PERFORM CUNY FORMAT 1 DSCB MODIFICATIONS\n         SPACE ,\n         OI    WAFLAGU,WAFMDSCB    MUST GO TO DSCB-MODIFY ROUTINE\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              END OF INSTALLATION-DEPENDENT CODE                   *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n*              CONTINUE IN COMMON CODE\n         SPACE ,\n         B     COMMON              YES, THIS BRANCHES TO THE NEXT PAGE\n*                                   -- BUT IT'S CLEARER THIS WAY.\n         TITLE 'COMMON   - IGGPRE00 COMMON FUNCTION MAINLINE'\n************************************************\n* COMMON   - PRE-EXIT COMMON FUNCTION MAINLINE *\n************************************************\n*\n*        THIS ROUTINE IS ENTERED FOR COMMON PROCESSING OF ALL\n*        SUPPORTED FUNCTIONS IN THE PRE-EXIT (IGGPRE00).  IT\n*        CALLS THE SUPERLOCATE, DSNAME CHECK, AND OTHER ROUTINES\n*        AS REQUIRED, AND DETERMINES IF AN ERROR RETURN IS NEEDED.\n*\n*        THE FORMAT OF THE DSNAME IS TESTED TO DETERMINE IF IT\n*        LOOKS LIKE A GDG, BECAUSE A \"PSEUDO-GDG\" DATASET CANNOT\n*        BE CATALOGED IN AN ICF CATALOG.  IF THE DATASET LOOKS\n*        LIKE IT'S A GDG, A SECOND SUPERLOCATE WILL BE DONE TO\n*        ENSURE THAT THE GDG BASE *IS* IN THE CATALOG.\n*\n*        NOTE THAT THIS CODE USES THE \"DSNXLATE\" TRANSLATE TABLE\n*        CONTAINED IN ROUTINE \"DSNCHECK\".\n*\n*        NORMAL EXIT: EXIT\n*\n*        ERROR EXITS: ERROR1 - DATASET CANNOT BE CATALOGED\n*                     ERROR2 - DSNAME DOESN'T CONFORM TO STANDARDS\n*                     ERROR3 - GDG BASE IS NOT CATALOGED\n*                     ERROR4 - NO RACF PERMIT TO CREATE DATASETS ON VOL\n*\n*        REGISTER USAGE:\n*           R1 = WORK\n*           R15 = WORK\n*\n*        NOTE: FIELD \"WAWORK1\" IS USED TO SAVE THE CONTENTS OF FIELD\n*              WADSNAME OVER THE SECOND (GDG BASE) SUPERLOCATE CALL.\n*\nCOMMON   DS    0H\n         SPACE ,\n*              TEST IF A SUPERLOCATE IS REQUIRED\n         SPACE ,\n         TM    WAFLAG1,WAFCATCK    WHAT WAS THE DETERMINATION?\n         BZ    CATCKOK             SKIP IF NOT NEEDED\n         SPACE ,\n*              CALL THE SUPERLOCATE ROUTINE\n         SPACE ,\n         BAL   R9,SUPERLOC\n         SPACE ,\n*              THIS IS THE RETURN BRANCH TABLE\n         SPACE ,\n         B     CATGDGCK       +0   DSNAME NOT FOUND IN CATALOG\n*                                  (LET'S CHECK IF IT'S A PSEUDO-GDG)\n         B     CATCKOK        +4   REQUIRED CATALOG NOT ALLOCATED\n*                                  (LET IT THROUGH SINCE WE CAN'T TELL)\n         B     CATCKOK        +8   DATASET IS ON MORE THAN 3 VOLUMES\n*                                  (SPECS SAY THIS IS OK TOO)\n         B     CATCKOK        +12  SOME OTHER ERROR (I/O ERROR?)\n*                                  (THIS OUGHT TO PUT OUT A MESSAGE,\n*                                   BUT DOESN'T RIGHT NOW)\n         B     CATCKOK        +16  DSNAME FOUND IN CATALOG BUT IS A\n*                                  GDG BASE\n*                                  (WE COULD CHECK THAT THE ALLOCATION\n*                                   IS FOR A MODEL DSCB, BUT DON'T)\n*        NO BRANCH            +20  DSNAME FOUND IN CATALOG.. INSPECT IT\n         SPACE ,\n*              DSNAME WAS FOUND IN CATALOG.  IT'S AN ERROR IF\n*               1) VOLUME COUNT IS ONE, AND\n*               2) VOLUME SERIAL DIFFERS FROM THAT BEING ALLOCATED.\n         SPACE ,\n         CLC   HONE,CTGWAVCT-CTGWA+WACTGWA  IS IT ONE VOLUME?\n         BNE   CATCKOK             IF NOT ASSUME IT'S OK\n         CLC   WAUCBVOL,CTGVLVOL-CTGVL+WACTGVL  IS IT THE SAME ONE???\n         BNE   ERROR1              IF NOT IT'S AN ERROR.\n*              NOTE THAT THE CATALOG ENTRY'S DEVICE TYPE ISN'T\n*              VALIDATED.  THAT CAN'T BE DONE TRIVIALLY.\n         SPACE ,\n         B     CATCKOK\n         SPACE 2\n*              DSNAME WAS NOT FOUND IN CATALOG.  IT'S AN ERROR *IF* IT\n*              LOOKS LIKE A GDG BUT HAS NO GDG BASE ENTRY CATALOGED.\n         SPACE ,\nCATGDGCK L     R1,WADSNAME         GET @ DSNAME\n         LA    R1,L'JFCBDSNM-1(R1)  GET LAST CHARACTER OF DSNAME\n         SPACE ,\nGDGLOOP  CLI   0(R1),C' '          SCAN FOR LAST NON-BLANK CHARACTER\n         BNE   GDGLOOP2            EXIT WHEN IT'S BEEN FOUND\n         BCT   R1,GDGLOOP          BACK UP AND LOOP\n         SPACE ,\nGDGLOOP2 SH    R1,HEIGHT           BACK UP 8 MORE (TO .G0000V00)\n         C     R1,WADSNAME         ENSURE WE'RE STILL IN THE DSNAME\n         BNH   CATCKOK             BIF NOT, IT CAN'T BE A GDG\n         SPACE ,\n*              USE THE TRANSLATE TABLE FOUND IN ROUTINE \"DSNCHECK\"\n*              TO CHECK IF THIS IS REALLY A GDG-FORMAT NAME\n         SPACE ,\n         MVC   WADSNWRK(GDGCKLEN),0(R1)  COPY POSSIBLE .G0000V00\n         TR    WADSNWRK(GDGCKLEN),DSNXLATE  CONVERT TO TYPE CODES\n         OC    WADSNWRK(GDGCKLEN),GDGMATCH  TURN ON ALL VALID CODES\n         XC    WADSNWRK(GDGCKLEN),GDGMATCH  TURN OFF ALL VALID CODES\n         BNZ   CATCKOK             IF ANY ARE LEFT, IT'S NOT A GDG\n         SPACE ,\n*              CHECK THE ALPHA CHARACTERS FOR 'G' AND 'V'\n         SPACE ,\n         CLI   1(R1),C'G'          THIS MUST BE A 'G'\n         BNE   CATCKOK             IF NOT, IT'S NOT A GDG\n         CLI   6(R1),C'V'          THIS MUST BE A 'V'\n         BNE   CATCKOK             IF NOT, IT'S NOT A GDG\n         SPACE ,\n*              WE HAVE DETERMINED THAT THE DATASET NAME *LOOKS* LIKE\n*              A GDG.  A SECOND SUPERLOCATE IS NOW DONE, FOR THE GDG\n*              BASE NAME, TO ENSURE THAT THERE IS ONE IN THE CATALOG.\n         SPACE ,\n         MVC   WAWORK1,WADSNAME    SAVE THE ACTIVE DSNAME POINTER\n         MVI   WADSNWRK,C' '       BLANK OUT THE DSNAME SAVE AREA\n         MVC   WADSNWRK+1(L'WADSNWRK-1),WADSNWRK  ...\n         LA    R15,WADSNWRK        ADDRESS THE WORK AREA\n         ST    R15,WADSNAME        SAVE AS NEW DSNAME POINTER\n         L     R15,WAWORK1         ADDRESS THE CURRENT (FULL) DSNAME\n         SR    R1,R15              COMPUTE LENGTH OF GDG BASE NAME\n         SH    R1,HONE             LESS ONE FOR EXECUTE\n         BM    GDGOK               ENSURE NON-NEGATIVE (SHOULDN'T BE!)\n         EX    R1,GDGNMOVE         MOVE THE GDG BASE NAME TO WADSNWRK\n         SPACE ,\n*              CALL THE SUPERLOCATE ROUTINE TO FIND THE GDG BASE\n         SPACE ,\n         BAL   R9,SUPERLOC\n         SPACE ,\n*              THIS IS THE RETURN BRANCH TABLE\n         SPACE ,\n         B     GDGNF          +0   DSNAME NOT FOUND IN CATALOG\n*                                  (NOT KOSHER, GDG BASE MISSING)\n         B     GDGOK          +4   REQUIRED CATALOG NOT ALLOCATED\n*                                  (LET IT THROUGH SINCE WE CAN'T TELL)\n         B     GDGNF          +8   DATASET IS ON MORE THAN 3 VOLUMES\n*                                  (NOT KOSHER FOR A GDG BASE...)\n         B     GDGOK          +12  SOME OTHER ERROR (I/O ERROR?)\n*                                  (THIS OUGHT TO PUT OUT A MESSAGE,\n*                                   BUT DOESN'T RIGHT NOW)\n         B     GDGOK          +16  DSNAME FOUND IN CATALOG BUT IS A\n*                                  GDG BASE\n*                                  (GOOD, THIS IS WHAT WE WANT)\n*        NO BRANCH            +20  DSNAME FOUND IN CATALOG\n*                                  (BAD, IT'S NOT A GDG BASE)\n         SPACE ,\n*              GDG BASE WAS NOT FOUND IN THE CATALOG (OR WAS FOUND\n*              TO BE A DATASET).  THIS IS AN ERROR.\n         SPACE ,\nGDGNF    MVC   WADSNAME,WAWORK1    RESTORE THE DSNAME POINTER\n         B     ERROR3              AND GO ISSUE MESSAGE CNY654I\n         SPACE ,\nGDGNMOVE MVC   WADSNWRK(*-*),0(R15)  EX'ED MOVE FOR GDG BASE NAME\n         SPACE ,\nGDGMATCH DC    AL1(P,A,N,N,N,N,A,N,N)  PATTERN FOR '.G0000V00'\n*                  . G 0 0 0 0 V 0 0\nGDGCKLEN EQU   *-GDGMATCH          LENGTH OF PATTERN\n         SPACE 2\n*              GDG VALIDATION OK.  RESTORE WADSNAME & CONTINUE.\n         SPACE ,\nGDGOK    MVC   WADSNAME,WAWORK1    COPY BACK FROM WHERE WE SAVED IT\n         SPACE ,\nCATCKOK  DS    0H\n         SPACE 2\n*              TEST IF DSNAME VALIDATION IS NEEDED\n         SPACE ,\n         TM    WAFLAG1,WAFDSNCK    CHECK THE FLAG...\n         BZ    DSNCKOK             SKIP ROUTINE IF NOT REQUIRED\n         SPACE ,\n         BAL   R9,DSNCHECK         CHECK THE DSNAME...\n         SPACE ,\n*              THIS IS THE RETURN BRANCH TABLE\n         SPACE ,\n         B     ERROR2         +0   DSNAME IS NOT VALID: ERROR RETURN\n*\n*        NO BRANCH            +4   DSNAME CONFORMS TO OUR STANDARDS\n         SPACE ,\nDSNCKOK  DS    0H\n         SPACE 2\n*              TEST IF RACF VALIDATION IS NEEDED\n         SPACE ,\n         TM    WAFLAG2,WAFRACCK    CHECK THE FLAG...\n         BZ    RACCKOK             SKIP ROUTINE IF NOT REQUIRED\n         SPACE ,\n         BAL   R9,RACCHECK         CALL RACF FOR AUTHORIZATION CHECK\n         SPACE ,\n*              THIS IS THE RETURN BRANCH TABLE\n         SPACE ,\n         B     ERROR4         +0   RACF ACCESS DENIED: ERROR RETURN\n*\n*        NO BRANCH            +4   RACF AUTHORITY OK, OR NOT PROTECTED\n         SPACE ,\nRACCKOK  DS    0H\n         SPACE 2\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTION                  *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n*              PERFORM CUNY FORMAT 1 DSCB MODIFICATION IF REQUIRED\n         SPACE ,\n         TM    WAFLAGU,WAFMDSCB    CALL DSCB-MODIFY ROUTINE??\n         BZ    NOMODSCB            BIF NOT\n         BAL   R9,MODDSCB          CALL IF SO\nNOMODSCB DS    0H\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              END OF INSTALLATION-DEPENDENT CODE                   *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n*              EXIT PROCESSING HAS COMPLETED SUCCESSFULLY.\n*              TAKE NORMAL EXIT (RC=0 IS STILL IN R4).\n         SPACE ,\n         B     EXIT\n         TITLE 'ERROR    - IGGPRE00/POST0 ERROR EXIT ROUTINES'\n**************************\n* ERROR    - ERROR EXITS *\n**************************\n*\n*        THIS ROUTINE ISSUES MESSAGES CNY651I, CNY652I, CNY653I,\n*        CNY654I, AND CNY655I, SETS THE EXIT RETURN CODE AND REASON\n*        CODE, AND EXITS.\n*\n*        ENTRY POINTS:\n*           ERROR1 - DATASET CANNOT BE CATALOGED (MSG CNY651I)\n*           ERROR2 - DSNAME DOESN'T CONFORM TO STANDARDS (MSG CNY652I)\n*           ERROR3 - REQUIRED GDG BASE NOT CATALOGED (MSG CNY654I)\n*           ERROR4 - NO RACF PERMIT TO CREATE DATASETS (MSG CNY655I)\n*\n*           ON ENTRY TO ERROR1, CVGVLVOL MUST BE SET (AS BY ROUTINE\n*           \"SUPERLOC\") SO IT CAN BE PROVIDED IN MSG CNY651I.\n*\n*           ON ENTRY TO ERROR2, IF THE SIOT ADDRESS IS AVAILABLE IN\n*           \"WASIOTAD\", THEN IF THE SIOT INDICATES A NON-SPECIFIC\n*           VOLUME REQUEST AND A SYSTEM GENERATED DSNAME, AND THE\n*           UCB INDICATES A STORAGE VOLUME, THEN THE ERROR MESSAGES\n*           (ONLY) WILL BE BYPASSED.\n*\n*           ON ENTRY TO ERROR4, IF THE SIOT ADDRESS IS AVAILABLE IN\n*           \"WASIOTAD\", THEN IF THE SIOT INDICATES A NON-SPECIFIC\n*           VOLUME REQUEST AND THE UCB INDICATES A PUBLIC VOLUME,\n*           THEN THE ERROR MESSAGES (ONLY) WILL BE BYPASSED.\n*\n*        REGISTER USAGE:\n*           R1 = WORK\n*           R4 = EXIT RETURN CODE (RESET TO 4)\n*\nERROR1   DS    0H                  UNCATALOGABLE DATASET ENTRY\n         SPACE ,\n*              SET INSTALLATION REASON CODE FOR THIS ENTRY (1)\n         SPACE ,\n         MVC   IEXREASN,REASON1    MOVE IN A 'ONE'\n         SPACE ,\n*              CONSTRUCT MESSAGE CNY651I\n         SPACE ,\n         MVC   WAC651LN,CON651     MCS PREFIX FIELDS\n         MVC   WAC651P1,CON651P1   MESSAGE PREFIX\n*              NOTE THAT FIELD WAC651AL IS ALREADY SET\n         MVC   WAC651P2,CON65P2    TEXT\n         MVC   WAC651P3,CON651P3   MORE TEXT\n*              NOTE THAT THE LENGTH (L'CTGVLVOL) IS REQUIRED HERE\n*              BECAUSE THE ASSEMBLER DOESN'T ALLOW IT ON THE EQU\n         MVC   WAC651P4(L'CTGVLVOL),CTGVLVOL-CTGVL+WACTGVL  VOLSER\n         MVC   WAC651P5,CON651P5   MORE TEXT\n         MVC   WAC651MC,MCS65      MCS SUFFIX FIELDS\n         SPACE ,\n*              CONTINUE WITH COMMON CODE\n         SPACE ,\n         B     ERRORCOM\n         SPACE 2\nERROR2   DS    0H                  UNCONFORMING DSNAME ENTRY\n         SPACE ,\n*              SET INSTALLATION REASON CODE FOR THIS ENTRY (2)\n         SPACE ,\n         MVC   IEXREASN,REASON2    MOVE IN A 'TWO'\n         SPACE ,\n*              ADDRESS THE SIOT, IF PRESENT\n         SPACE ,\n         ICM   R1,B'1111',WASIOTAD  @ SIOT, IF AVAILABLE\n         BZ    ERROR2Z             SIOT NOT AVAILABLE, BYPASS THIS\n         USING SIOT,R1\n         SPACE ,\n*              TEST IF SIOT INDICATES NON-SPECIFIC VOLUME REQUEST\n         SPACE ,\n         TM    SIOTSMS,SIOTSMS6    ON => VOLUME WAS SPECIFIED\n         BO    ERROR2Z             CONTINUE WITH MESSAGES IF SPECIFIC\n         SPACE ,\n*              TEST IF SIOT INDICATES A SYSTEM-GENERATED NAME\n         SPACE ,\n         TM    SCTSBYT1,SIOTGDSN   GENERATED DSNAME?\n         BZ    ERROR2Z             CONTINUE WITH MESSAGES IF NOT\n         SPACE ,\n*              TEST IF UCB INDICATES A STORAGE VOLUME\n         SPACE ,\n         ICM   R1,B'1111',IEXUCB   @ UCB\n         BZ    ERROR2Z             BRANCH IF UCB NOT AVAILABLE\n         USING UCBOB,R1\n         TM    UCBSTAB,UCBBSTR     STORAGE VOLUME?\n         BO    SETRC4              YES, THEN BYPASS ERROR MESSAGES\n         DROP  R1\nERROR2Z  DS    0H\n         SPACE ,\n*              CONSTRUCT MESSAGE CNY652I\n         SPACE ,\n         MVC   WAC652LN,CON652     MCS PREFIX FIELDS\n         MVC   WAC652P1,CON652P1   MESSAGE PREFIX\n*              NOTE THAT FIELD WAC652AL IS ALREADY SET\n*              (SINCE IT'S SET AS WAC651AL, BOTH MUST BE IDENTICAL)\n         MVC   WAC652P2,CON65P2    TEXT\n         MVC   WAC652P3,CON652P3   MORE TEXT\n         MVC   WAC652MC,MCS65      MCS SUFFIX FIELDS\n         SPACE ,\n*              CONTINUE WITH COMMON CODE\n         SPACE ,\n         B     ERRORCOM\n         SPACE 2\nERROR3   DS    0H                  MISSING GDG BASE ENTRY\n         SPACE ,\n*              SET INSTALLATION REASON CODE FOR THIS ENTRY (3)\n         SPACE ,\n         MVC   IEXREASN,REASON3    MOVE IN A 'THREE'\n         SPACE ,\n*              CONSTRUCT MESSAGE CNY654I\n         SPACE ,\n         MVC   WAC654LN,CON654     MCS PREFIX FIELDS\n         MVC   WAC654P1,CON654P1   MESSAGE PREFIX\n*              NOTE THAT FIELD WAC654AL IS ALREADY SET\n*              (SINCE IT'S SET AS WAC651AL, BOTH MUST BE IDENTICAL)\n         MVC   WAC654P2,CON65P2    TEXT\n         MVC   WAC654P3,CON654P3   MORE TEXT\n         MVC   WAC654MC,MCS65      MCS SUFFIX FIELDS\n         SPACE ,\n*              CONTINUE WITH COMMON CODE\n         SPACE ,\n         B     ERRORCOM\n         SPACE 2\nERROR4   DS    0H                  NO RACF PERMIT TO CREATE DATASETS\n         SPACE ,\n*              SET INSTALLATION REASON CODE FOR THIS ENTRY (4)\n         SPACE ,\n         MVC   IEXREASN,REASON4    MOVE IN A 'FOUR'\n         SPACE ,\n*              ADDRESS THE SIOT, IF PRESENT\n         SPACE ,\n         ICM   R1,B'1111',WASIOTAD  @ SIOT, IF AVAILABLE\n         BZ    ERROR4Z             SIOT NOT AVAILABLE, BYPASS THIS\n         USING SIOT,R1\n         SPACE ,\n*              TEST IF SIOT INDICATES NON-SPECIFIC VOLUME REQUEST\n         SPACE ,\n         TM    SIOTSMS,SIOTSMS6    ON => SPECIFIC VOLUME SPECIFIED\n         BO    ERROR4Z             CONTINUE WITH MESSAGES IF SPECIFIC\n         SPACE ,\n*              TEST IF UCB INDICATES A PUBLIC VOLUME\n         SPACE ,\n         ICM   R1,B'1111',IEXUCB   @ UCB\n         BZ    ERROR4Z             BRANCH IF UCB NOT AVAILABLE\n         USING UCBOB,R1\n         TM    UCBSTAB,UCBBPUB     PUBLIC VOLUME?\n         BO    SETRC4              YES, THEN BYPASS ERROR MESSAGES\n         DROP  R1\nERROR4Z  DS    0H\n         SPACE ,\n*              CONSTRUCT MESSAGE CNY655I\n         SPACE ,\n         MVC   WAC655LN,CON655     MCS PREFIX FIELDS\n         MVC   WAC655P1,CON655P1   MESSAGE PREFIX\n*              NOTE THAT FIELD WAC655AL IS ALREADY SET\n*              (SINCE IT'S SET AS WAC651AL, BOTH MUST BE IDENTICAL)\n         MVC   WAC655P2,CON65P2    TEXT\n         MVC   WAC655P3,CON655P3   MORE TEXT\n         MVC   WAC655MC,MCS65      MCS SUFFIX FIELDS\n         SPACE 2\n*              COMMON ERROR ROUTINE\n         SPACE ,\nERRORCOM DS    0H\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTION                  *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n*              SKIP WTP IF THE CALLER IS A WYLBUR I/O TASK\n         SPACE ,\n         TM    WAFLAGU,WAFWYLIO    IS OUR CALLER A WYLBUR I/O TASK?\n         BO    SETRC4              YES, SKIP AROUND THE WTO'S\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              END OF INSTALLATION-DEPENDENT CODE                   *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n         WTO   MF=(E,WAMSGARA)     ISSUE CNY651I/CNY652I TO SYSMSG\n         SPACE 2\n*              CONSTRUCT MESSAGE CNY653I\n         SPACE ,\n         MVC   WAC653LN,CON653     MCS PREFIX FIELDS\n         MVC   WAC653P1,CON653P1   MESSGE PREFIX & TEXT\n*              NOTE THAT THE LENGTH (L'WAUCBVOL) IS REQUIRED HERE\n*              BECAUSE THE ASSEMBLER DOESN'T ALLOW IT ON THE EQU\n         MVC   WAC653VV(L'WAUCBVOL),WAUCBVOL  VOLUME NAME\n         MVC   WAC653P2,CON653P2   MORE TEXT\n         L     R1,WADSNAME         GET @ DSNAME\n*              NOTE THAT THE LENGTH (L'JFCBDSNM) IS REQUIRED HERE\n*              BECAUSE THE ASSEMBLER DOESN'T ALLOW IT ON THE EQU\n         MVC   WAC653DS(L'JFCBDSNM),0(R1)  COPY DSNAME\n         MVC   WAC653MC,MCS65      MCS SUFFIX FIELDS\n         SPACE ,\n         WTO   MF=(E,WAMSGARA)     ISSUE CNY653I TO SYSMSG\n         SPACE ,\n*              SET THE EXIT RETURN CODE (IN R4) TO 4 (REJECT VOLUME)\n         SPACE ,\nSETRC4   LA    R4,4                SET RETURN CODE HERE\n         SPACE ,\n*              GO EXIT FROM THE EXIT\n         SPACE ,\n         B     EXIT                'BYE\n         TITLE 'SPECINIT - IGGPRE00 SPECIAL INITIALIZATION ROUTINE'\n*********************************************\n* SPECINIT - SPECIAL INITIALIZATION ROUTINE *\n*********************************************\n*\n*        THIS ROUTINE IS ENTERED WHEN OUR \"SUBSYSTEM INITIALIZATION\"\n*        MODULE, PREPOST0, ISSUES A REALLOC MACRO FOR INITDSN.  IT\n*        IS USED TO FORCE THE USERCAT REQUIRED FOR CATALOG CHECKS\n*        HERE TO BE ALLOCATED TO *MASTER* SO THAT ITS ACB MAY BE\n*        REFERENCED LATER FOR SUPERLOCATES UNDER THE INITIATOR.\n*        THE FOLLOWING IS THE PROCESSING LOGIC:\n*\n*          1) SET WADSNAME TO POINT TO INITDSNC, WHOSE HIGH-LEVEL\n*             INDEX IS IN THE USERCATALOG WE NEED TO ALLOCATE.\n*\n*          2) CALL THE SUPERLOCATE ROUTINE.  IT SHOULD RETURN\n*             INDICATING THAT THE REQUIRED CATALOG COULDN'T BE\n*             ALLOCATED, BUT IN DOING SO WILL DETERMINE THE\n*             NAME OF THE USERCATALOG IF THAT'S DIFFERENT FROM\n*             THE HIGH-LEVEL INDEX NAME.\n*\n*          3) RESET THE \"CTGDOCAT\" FLAG IN THE CTGPL AND REISSUE\n*             THE SUPERLOCATE.  THIS SHOULD CAUSE THE CATALOG TO\n*             BE ALLOCATED.  THE SUCCESS OF THE SUPERLOCATE IS\n*             IMMATERIAL.\n*\n*          4) ENQUEUE (SHARED) ON THE PCCB CHAIN, FIND THE PCCB\n*             ENTRY FOR THE USERCATALOG, AND SAVE ITS NAME AND\n*             ACB ADDRESS IN AN AREA ADDRESSED BY THE CVT USER\n*             EXTENSION (** THIS IS INSTALLATION DEPENDENT **).\n*             DEQUEUE FROM THE PCCB CHAIN AND EXIT.\n*\n*        NOTE THAT THIS CODE CURRENTLY ALLOCATES ONLY ONE USER-\n*        CATALOG, BUT IT COULD EASILY BE EXTENDED FOR SEVERAL.\n*\n*\n*        NORMAL EXIT: TO EXIT, WITH RETURN CODE 4, REASON CODE 901\n*\n*        ERROR EXIT:  TO EXIT, WITH RETURN CODE 4, REASON CODE 902\n*\n*        REGISTER USAGE:\n*           R1 = WORK\n*           R4 = RETURN CODE TO BE PASSED BACK TO DADSM (WILL BE 4)\n*           R6 = GORILLA ADDRESS\n*           R7 = PCCB ADDRESS\n*\nSPECINIT DS    0H\n         SPACE ,\n*              COPY INITDSNC TO THE PPWA AND POINT WADSNAME AT IT; WE\n*              CAN'T USE IT DIRECTLY, OR AN 0C4 RESULTS WHEN CATALOG\n*              MANAGEMENT TRIES TO RESAVE IT (FOR SOME REASON).  NOTE\n*              THAT IT'S IMMATERIAL WHETHER OR NOT THAT DATASET IS\n*              ACTUALLY IN THE CATALOG.\n         SPACE ,\n         MVC   WADSNWRK,INITDSNC   COPY THE DSNAME TO THE WORK AREA\n         LA    R1,WADSNWRK         ADDRESS IT THERE\n         ST    R1,WADSNAME         AND SAVE ITS ADDRESS\n         SPACE ,\n*              ISSUE THE SUPERLOCATE TO GET THE NAME OF THE USERCATALOG\n         SPACE ,\n         BAL   R9,SUPERLOC         GO TO IT\n         SPACE ,\n*              THIS IS THE RETURN BRANCH TABLE\n*              THE ONLY EXPECTED RETURN IS \"CATALOG UNAVAILABLE\"\n         SPACE ,\n         B     SPEC902        +0   DSNAME NOT FOUND IN CATALOG\n*                                  (SHOULD NOT OCCUR HERE, ERROR)\n         B     SPECI10        +4   REQUIRED CATALOG NOT ALLOCATED\n*                                  (CONTINUE WITH THIS ROUTINE)\n         B     SPEC902        +8   DATASET IS ON MORE THAN 3 VOLUMES\n*                                  (SHOULD NOT OCCUR HERE, ERROR)\n         B     SPEC902        +12  SOME OTHER ERROR (I/O ERROR?)\n*                                  (SHOULD NOT OCCUR HERE, ERROR)\n         B     SPEC902        +16  DSNAME FOUND IN CATALOG BUT IS A\n*                                  GDG BASE\n*                                  (SHOULD NOT OCCUR HERE, ERROR)\n         B     SPEC902        +20  DSNAME FOUND IN CATALOG\n*                                  (SHOULD NOT OCCUR HERE, ERROR)\n         SPACE ,\n*              CONTINUE BY TURNING OFF \"CTGDOCAT\" AND REISSUING\n*              THE SUPERLOCATE.  THIS WILL CAUSE THE REQUIRED\n*              CATALOG TO BE ALLOCATED.  THE CTGCV SHOULD REMAIN\n*              UNCHANGED OVER THIS CALL.\n         SPACE ,\nSPECI10  NI    CTGOPTN4-CTGPL+WACTGPL,255-CTGDOCAT  ** RESET FLAG **\n         SPACE ,\n         LOCATE WACTGPL            REISSUE SUPERLOCATE\n         SPACE ,\n*              THESE ARE THE CATALOG RETURN CODES WE TEST FOR:\n*\n*                R15=0   SUPERLOCATE SUCCESSFUL, VOLUME(S) IN WACTGVL\n*                        (EXCEPT: IF CTGGDGB ON, DSN IS A GDG BASE)\n*                R15=8   DATASET WAS NOT FOUND IN CATALOG\n*\n*              ANY OTHER ERROR INDICATES THAT THIS CODE DID NOT\n*              FUNCTION PROPERLY, AND WILL TAKE THE ERROR902 EXIT.\n         SPACE ,\n         C     R15,RCS         0   RETURN CODE=SUCCESS?\n         BE    SPECI20             YES, CONTINUE WITH THIS ROUTINE\n         SPACE ,\n         C     R15,RCENT       8   RETURN CODE=DATASET NOT IN CATALOG?\n         BE    SPECI20             YES, CONTINUE WITH THIS ROUTINE\n         SPACE ,\n         B     SPEC902             NO, TAKE ERROR 902 RETURN\n         SPACE ,\n*              ENQUEUE ON THE PCCB RESOURCE AND SEARCH THE PCCB\n*              CHAIN FOR THE ENTRY FOR THE CATALOG JUST ALLOCATED\n         SPACE ,\nSPECI20  MVC   WAENQ(PCCBENQE-PCCBENQ),PCCBENQ  COPY IN MODEL\n         SPACE ,\n         ENQ   (,,S,,),MF=(E,WAENQ)  THIS IS A *SHARED* ENQUEUE\n         SPACE ,\n         OI    WAFLAG2,WAFPCENQ    REMEMBER THAT WE'RE ENQUEUED\n         SPACE ,\n         L     R1,PSATOLD          @ CURRENT TCB\n         USING TCB,R1\n         ICM   R1,B'1111',TCBJSCB  @ JSCB\n         USING IEZJSCB,R1\n         BZ    SPEC902             BE SURE IT EXISTS - ELSE ERROR EXIT\n         ICM   R1,B'1111',JSCBACT  @ \"ACTIVE\" JSCB\n         BZ    SPEC902             BE SURE IT EXISTS TOO\n         SPACE ,\n*              SEARCH THE PCCB CHAIN FOR AN ENTRY WHERE PCCDSNAM\n*              MATCHES CTGCVDSN (THE DSNAME, NOT ALIAS, IS MATCHED)\n         SPACE ,\n         ICM   R7,B'1111',JSCBPCC  @ FIRST PCCB OR ZERO\n         DROP  R1\n         USING IEFPCCB,R7\nSPECI30  BZ    SPEC902             ENSURE PCCB ENTRY EXISTS, ELSE ERROR\n         TM    PCCSTAT1,PCCACTIV   IS THIS PCCB ACTIVE?\n         BZ    SPECI40             NO, GO LOOK AT THE NEXT ONE\n         CLC   PCCDSNAM,CTGCVDSN-CTGCV+WACTGCV  DOES IT MATCH?\n         BE    SPECI50             YES, GO SAVE THE INFO\nSPECI40  ICM   R7,B'1111',PCCNEXTP  NO, GET THE NEXT ONE\n         B     SPECI30             AND GO CHECK IT\n         SPACE ,\n*              WE'VE LOCATED THE PCCB ENTRY.  OBTAIN STORAGE FOR\n*              THE GORILLA CONTROL BLOCK, WHICH WILL HOLD THE\n*              USERCATALOG'S NAME AND ACB ADDRESS. SUBPOOL 241 IS\n*              USED (CSA, NOT JOB-RELATED); THAT'S THE SAME AS FOR\n*              THE CAXWA AND CATALOG ACB.\n         SPACE ,\nSPECI50  GETMAIN RU,LV=KINGKONG-GORILLA,SP=241,LOC=ANY  GET THE GORILLA\n         SPACE ,\n*              NOTE THAT THE GORILLA IS NEVER RELEASED.\n         SPACE ,\n         LR    R6,R1               SAVE THE ADDRESS\n         USING GORILLA,R6\n         SPACE ,\n*              SAVE THE PCCB INFORMATION IN THE GORILLA, THEN DEQ\n*              SYSZPCCB AND CHAIN AND SHACKLE THE GORILLA TO THE CVT.\n         SPACE ,\n         MVC   GORDSNAM,PCCDSNAM   SAVE THE CATALOG DSNAME\n         MVC   GORACBP,PCCACBP     SAVE THE ACB POINTER\n         DROP  R7\n         SPACE ,\n         DEQ   MF=(E,WAENQ)        RELEASE THE PCCB ENQUEUE\n         SPACE ,\n         NI    WAFLAG2,255-WAFPCENQ  AND RESET THE ENQ FLAG\n         SPACE ,\nSPECI60  DS    0H                  THIS LABEL IS ONLY FOR THE XREF\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTION                  *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n*              THE FOLLOWING CODE MUST BE MODIFIED TO PROVIDE IN\n*              R1 THE ADDRESS OF A GLOBALLY-ADDRESSABLE FULLWORD\n*              IN WHICH THE ADDRESS OF THE GORILLA CAN BE SAVED.\n*              AS DISTRIBUTED, IT USES THE CVT USER FIELD, CVTUSER.\n         SPACE ,\n         L     R1,FLCCVT           @ CVT\n         USING CVT,R1\n         LA    R1,CVTUSER          @ CVTUSER\n         DROP  R1\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              END OF INSTALLATION-DEPENDENT CODE                   *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n         ST    R6,0(,R1)           SAVE THE GORILLA POINTER\n         DROP  R6\n         SPACE ,\n*              RETURN TO THE CALLER WITH REASON CODE 901, INDICATING\n*              THAT OUR SPECIAL PROCESSING WAS SUCCESSFUL.\n         SPACE ,\n         MVC   IEXREASN,REASONI1   SET REASON CODE 901\n         LA    R4,4                SET EXIT RETURN CODE\n         B     EXIT                WE'RE ALL DONE\n         SPACE 2\n*              TAKE ERROR EXIT IF ANY OF THE ABOVE FAILED.\n*              ENSURE THAT THE PCCB RESOURCE IS DEQUEUED, THEN\n*              RETURN WITH REASON CODE 902.\n         SPACE ,\nSPEC902  TM    WAFLAG2,WAFPCENQ    IS OUR ENQ OUTSTANDING?\n         BZ    SPEC902A            NO, BYPASS DEQ\n         SPACE ,\n         DEQ   MF=(E,WAENQ)        RELEASE THE PCCB ENQUEUE\n         SPACE ,\n         NI    WAFLAG2,255-WAFPCENQ  AND RESET THE ENQ FLAG\n         SPACE ,\nSPEC902A MVC   IEXREASN,REASONI2   SET REASON CODE 902\n         LA    R4,4                SET EXIT RETURN CODE\n         B     EXIT                WE'RE ALL DONE\n         SPACE 2\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTION                  *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n*              THE FOLLOWING DSNAME MUST BEGIN WITH A HIGH-LEVEL INDEX\n*              THAT IS THE NAME OR AN ALIAS OF THE USERCATALOG TO BE\n*              ALLOCATED HERE.  THE DSNAME NEEDN'T BE IN THE CATALOG.\n         SPACE ,\nINITDSNC DC    CL(L'JFCBDSNM)'WYL.EARTHMAN'  HIGH INDEX='WYL'\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              END OF INSTALLATION-DEPENDENT CODE                   *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         TITLE 'SUPERLOC - IGGPRE00/POST0 CATALOG SUPERLOCATE ROUTINE'\n******************************************\n* SUPERLOC - CATALOG SUPERLOCATE ROUTINE *\n******************************************\n*\n*        THIS ROUTINE PERFORMS A SUPERLOCATE TO DETERMINE IF (AND\n*        WHERE) THE DATASET WHOSE NAME IS POINTED TO BY WADSNAME\n*        IS CATALOGED.\n*\n*        A SUPERLOCATE IS USED HERE, EVEN THOUGH IT'S NOT A\n*        PUBLISHED EXTERNAL INTERFACE (IT'S ALSO PRIVILEGED),\n*        BECAUSE THE CAMLST LOCATE INTERFACE CAN'T BE TOLD NOT TO\n*        ATTEMPT TO ALLOCATE A REQUIRED CATALOG.  THIS RESULTS\n*        IN S130 AND S138 ABENDS IF WE ARE UNDER THE INITIATOR\n*        (OR DYNAMIC ALLOCATION), AND ALSO PERMANENTLY ALLOCATES\n*        THE CATALOG TO THE INITIATOR ITSELF (RATHER THAN TO THE\n*        JOB BEING INITIATED).\n*\n*        THE CODE ALSO MODIFIES ENTRIES IN THE PCCB CHAIN, WHICH\n*        IS ALSO NOT A PUBLISHED EXTERNAL INTERFACE.  SEE THE\n*        COMMENTS PRECEDING LABEL SUPLOC30 FOR MORE INFORMATION.\n*\n*        NOTE THAT THIS CODE FOLLOWS THE FUNCTION OF INITIATOR\n*        MODULE IEFAB469, WHICH ISSUES SUPERLOCATES FOR JOB\n*        ALLOCATION.\n*\n*        N.B.: THIS CODE SHOULD NOT BE CALLED FOR VSAM DATASETS.\n*        NOT ONLY IS IT UNNECESSARY (SINCE ALL VSAM DATASETS MUST\n*        BE CATALOGED) BUT IT CAN ALSO RESULT IN AN INTERLOCK OR\n*        ABEND WHEN AN ICF CATALOG IS REORGANIZED.\n*\n*\n*        CALLED FOR: ALLOCATION, RENAME\n*\n*        INPUT: FIELD \"WADSNAME\" POINTS TO THE DSNAME TO BE FOUND.\n*\n*        RETURN CODES ARE VIA A BRANCH TABLE, AS FOLLOWS:\n*\n*           R9+0: DATASET NOT FOUND IN CATALOG\n*           R9+4: REQUIRED CATALOG COULD NOT BE ALLOCATED\n*           R9+8: DATASET IS ON MORE THAN THREE VOLUMES\n*           R9+12: SOME OTHER ERROR (I/O ERROR ASSUMED)\n*           R9+16: DATASET NAME WAS FOUND IN CATALOG BUT IS A GDG BASE\n*           R9+20: SUCCESS, VOLUME LIST IS IN WACTGVL (COUNT IN CTGWA)\n*\n*        REGISTER USAGE:\n*           R0 = WORK\n*           R1 = WORK\n*           R5 = WORKAREA ADDRESS\n*           R6 = GORILLA ADDRESS\n*           R7 = PCCB ADDRESS\n*           R8 = ADDRESS OF ACTIVE JSCB\n*           R9 = RETURN ADDRESS\n*           R10 = SAVED SUPERLOCATE RETURN CODE\n*           R14 = WORK\n*           R15 = WORK/SVC RETURN CODE\n*\n*        NOTE: THIS CODE MUST NOT MODIFY WAWORK1.  (SEE \"COMMON\" CODE.)\n*\nSUPERLOC DS    0H\n         SPACE ,\n*              CONSTRUCT THE CTGPL (CATALOG PARAMETER LIST)\n         SPACE ,\n         XC    WACTGPL,WACTGPL     CLEAR IT, TO START\n         SPACE ,\n*              THE FOLLOWING LOAD/USING IS JUST FOR CONVENIENCE\n         SPACE ,\n         LA    R1,WACTGPL          GET @ PL IN A REGISTER\n         USING CTGPL,R1\n         SPACE ,\n         OI    CTGOPTN1,CTGNAME    SUPERLOCATE IS BY NAME\n         OI    CTGOPTN3,CTGSUPLT+CTGAM0  FUNCTION IS SUPERLOCATE;\n*                                  THIS IS A CTGPL (NOT CAMLST)\n         SPACE ,\n*              CATALOG MANAGEMENT WILL BE ALLOWED TO DYNAMICALLY\n*              ALLOCATE AND OPEN ANY NEEDED CATALOGS *IF* THIS\n*              EXIT WAS CALLED FOR A FUNCTION OTHER THAN ALLOCATE.\n*              (AT PRESENT, RENAME IS THE ONLY OTHER FUNCTION THAT\n*              REACHES THIS CODE.)  A CHECK FOR THE INITIATOR IS\n*              ALSO MADE, JUST FOR SAFETY.  (THAT DOESN'T DETECT IF\n*              DYNAMIC ALLOCATION IS THE CALLER, BUT THAT'S NOT A\n*              PROBLEM, UNLESS DYNALLOC STARTS ISSUING RENAMES...)\n         SPACE ,\n         TM    WAFLAG2,WAFIIC      IS THE INITIATOR THE DADSM CALLER?\n         BO    SUPLOC04            YES, ENSURE CTGDOCAT IS SET\n         CLI   IEXFUNC,IEXALL      IS THE DADSM FUNCTION ALLOCATE?\n         BNE   SUPLOC07            NO, NEEDN'T SET CTGDOCAT\nSUPLOC04 OI    CTGOPTN4,CTGDOCAT   ** DO NOT DYNAMICALLY ALLOCATE **\n*                                      ** OR OPEN ANY CATALOG **\n         SPACE ,\nSUPLOC07 DS    0H\n         TM    WAFLAG1,WAFZTIOT    DO WE ALREADY OWN THE SYSZTIOT ENQ?\n         BZ    SUPLOC10            NO, IT'S OK\n         OI    CTGOPTN4,CTGTIOT    YES, INDICATE WE ALREADY OWN IT\nSUPLOC10 DS    0H\n         MVC   CTGENT,WADSNAME     SET DSNAME ADDRESS\n         SPACE ,\n*              NOTE THAT THIS SUPERLOCATE WILL NOT INITIATE A DFHSM\n*              RECALL BECAUSE NEITHER CTGCOIN (\"CONTROLLER INTERCEPT\n*              REQUESTED\" -- THAT MEANS HSM) NOR CTGTJES3 (\"JES3\n*              SUPERLOCATE REQUEST\") IS SET.\n         SPACE ,\n         LA    R14,WACTGCV         THE CTGCV IS REQUIRED (TO RETURN THE\n         ST    R14,CTGCVOL          NAME OF AN UNAVAILABLE USERCAT)\n         LA    R14,WACTGWA         GET CTGWA ADDRESS\n         ST    R14,CTGWKA           INTO THE CTGPL ALSO\n         DROP  R1\n         SPACE ,\n*              FILL IN THE CTGWA (ALREADY ADDRESSED BY R14)\n         SPACE ,\n         XC    WACTGWA,WACTGWA     CLEAR IT, FIRST\n         USING CTGWA,R14\n         LA    R1,WACTGVL          GET ADDRESS OF VOLUME LIST\n         ST    R1,CTGWAVL          PUT IT IN WA\n         LA    R1,L'WACTGVL        GET SIZE OF VOLUME LIST\n         STH   R1,CTGWALV          SAVE IT IN WA\n*                                  FIELDS CTGWAVCT & CTGWAUCT ARE SET\n*                                  BY THE CATALOG MANAGEMENT CALL\n         DROP  R14\n         SPACE ,\n*              ISSUE THE CATALOG SVC\n         SPACE ,\n         LOCATE WACTGPL            ISSUEIT\n         SPACE ,\n*              THESE ARE THE CATALOG RETURN CODES WE TEST FOR:\n*\n*                R15=0   SUPERLOCATE SUCCESSFUL, VOLUME(S) IN WACTGVL\n*                        (EXCEPT: IF CTGGDGB ON, DSN IS A GDG BASE)\n*                R15=8   DATASET WAS NOT FOUND IN CATALOG\n*                R15=36  REQUIRED USERCATALOG WAS NOT AVAILABLE\n*                R15=40  WACTGVL IS TOO SMALL\n*                        (DATASET IS ON MORE THAN THREE VOLUMES)\n*\n*              THE FOLLOWING RETURN CODES ARE ALSO THOUGHT TO INDICATE\n*              AN UNAVAILABLE CATALOG (ACCORDING TO IEFAB469):\n*\n*                R15=68   OS CVOL NEEDED\n*                R15=188  STEPCAT NEEDED\n*\n*              ANY OTHER ERROR IS ASSUMED TO BE AN I/O ERROR.\n         SPACE ,\n         C     R15,RCS         0   RETURN CODE=SUCCESS?\n         BE    SUPLOC20            YES, TEST IF WE FOUND A GDG BASE\n         SPACE ,\n         C     R15,RCENT       8   RETURN CODE=DATASET NOT IN CATALOG?\n         BE    0(R9)               YES, TAKE DEFINED RETURN\n         SPACE ,\n         C     R15,RCDSNF     36   RETURN CODE=CATALOG NOT ALLOCATED?\n         BE    SUPLOC30            YES, CONTINUE PROCESSING\n         SPACE ,\n         C     R15,RCVLSZ     40   RETURN CODE=DATASET ON > 3 VOLUMES?\n         BE    8(R9)               YES, TAKE DEFINED RETURN\n         SPACE ,\n         C     R15,RCNOSP     68   RETURN CODE=OS CVOL NEEDED?\n         BE    SUPLOC30            YES, DO LIKE \"CATALOG NOT ALLOC\"\n         SPACE ,\n         C     R15,RCCATUNA  188   RETURN CODE=STEPCAT NEEDED?\n         BE    SUPLOC30            YES, DO LIKE \"CATALOG NOT ALLOC\"\n         SPACE ,\n         B     12(R9)              NO, TAKE RETURN FOR ALL OTHER CODES\n         SPACE ,\n*              TEST IF DSNAME SUCCESSFULLY LOCATED IS A GDG BASE\n         SPACE ,\nSUPLOC20 TM    CTGFBFLG-CTGPL+WACTGPL,CTGGDGB  IS IT A GDG BASE?\n         BO    16(R9)              YES, TAKE DEFINED RETURN\n         B     20(R9)              NO, TAKE RETURN FOR SUCCESS\n         SPACE 3\n*              THE FOLLOWING CODE HANDLES THE SITUATION WHERE\n*              A REQUIRED USERCAT IS NOT AVAILABLE AND THE CALLER\n*              OF DADSM IS THE INITIATOR.  THE FOLLOWING IS THE\n*              LOGIC:\n*\n*                1) OBTAIN THE SAVED CATALOG ACB ADDRESS FROM THE CVT\n*                   USER EXTENSION (** INSTALLATION DEPENDENT **).\n*                   IF IT'S NOT AVAILABLE (IF SPECIAL INITIALIZATION\n*                   FAILED), RETURN CATALOG UNAVAILABLE.\n*\n*                2) ENQUEUE ON THE STEP'S PCCB CHAIN AND SEARCH FOR\n*                   AN ENTRY MATCHING THE REQUIRED CATALOG NAME WHICH\n*                   IS ALSO NOT ACTIVE AND HAS A ZERO ACB ADDRESS.\n*                   IF IT'S NOT FOUND, RETURN CATALOG UNAVAILABLE.\n*                   (IF THE DATASET HAS DISP=CATLG, THE INITIATOR\n*                   WILL HAVE ALREADY BUILT THIS PCCB ENTRY DURING\n*                   \"DD FUNCTION CONTROL\" PROCESSING IN IEFAB454.)\n*                   IF A STEPCAT PCCB ENTRY IS FOUND, RETURN CATALOG\n*                   UNAVAILABLE; THIS WILL PREVENT ERRONEOUS RESULTS.\n*\n*                3) UPDATE THE PCCB ENTRY WITH THE SAVED ACB ADDRESS\n*                   AND MARK IT ACTIVE.  DEQUEUE FROM THE PCCB CHAIN.\n*\n*                4) RE-ISSUE THE SUPERLOCATE.\n*\n*                5) RE-ENQUEUE ON THE PCCB CHAIN AND RESTORE THE PCCB\n*                   ENTRY.\n*\n*                6) ANALYZE THE NEW SUPERLOCATE RETURN CODE.\n*\n         SPACE ,\nSUPLOC30 DS    0H\n         SPACE ,\n*              DETERMINE IF WE CAN PROCESS THIS CONDITION HERE.  IF\n*              NOT, TAKE THE DEFINED RETURN FOR \"CATALOG UNAVAILABLE.\"\n         SPACE ,\n         TM    WAFLAG2,WAFIIC      IS THE INITIATOR THE DADSM CALLER?\n         BZ    4(R9)               RETURN IF NOT\n         CLI   IEXFUNC,IEXALL      IS THE DADSM FUNCTION ALLOCATE?\n         BNE   4(R9)               RETURN IF NOT\n         SPACE ,\nSUPLOC40 DS    0H                  THIS LABEL IS ONLY FOR THE XREF\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTION                  *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n*              THE FOLLOWING CODE MUST BE MODIFIED TO PROVIDE IN\n*              R1 THE ADDRESS OF A GLOBALLY-ADDRESSABLE FULLWORD\n*              IN WHICH THE ADDRESS OF THE GORILLA WAS SAVED.\n*              AS DISTRIBUTED, IT USES THE CVT USER FIELD, CVTUSER.\n         SPACE ,\n         L     R1,FLCCVT           @ CVT\n         USING CVT,R1\n         LA    R1,CVTUSER          @ CVTUSER\n         DROP  R1\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              END OF INSTALLATION-DEPENDENT CODE                   *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n         ICM   R6,B'1111',0(R1)    OBTAIN THE GORILLA POINTER\n         BZ    4(R9)               RETURN IF THERE'S NONE\n         USING GORILLA,R6\n         SPACE ,\n*              CHECK THAT WE NEED THE SAME CATALOG THAT WAS\n*              ALLOCATED BY SPECINIT.  RETURN IF NOT.\n         SPACE ,\n         CLC   GORDSNAM,CTGCVDSN-CTGCV+WACTGCV  GORILLA=CTGCV?\n         BNE   4(R9)               RETURN IF NOT\n         SPACE ,\n*              GET THE ACTIVE JSCB'S ADDRESS IN R7.\n         SPACE ,\n         L     R1,PSATOLD          @ CURRENT TCB\n         USING TCB,R1\n         ICM   R8,B'1111',TCBJSCB  @ JSCB\n         USING IEZJSCB,R8\n         BZ    4(R9)               BE SURE IT EXISTS - ELSE ERROR EXIT\n         ICM   R8,B'1111',JSCBACT  @ \"ACTIVE\" JSCB\n         BZ    4(R9)               BE SURE IT EXISTS TOO\n         DROP  R1\n         SPACE ,\n*              SAVE THE GORILLA AND ACTIVE JSCB ADDRESSES IN THE\n*              PPWA IN CASE THE ESTAE EXIT GETS ENTERED WITH EITHER\n*              WAFPCENQ OR WAFPCMOD SET.  (NOTE THAT THE SAVED\n*              ADDRESSES AREN'T VALID IF NEITHER FLAG IS SET...)\n         SPACE ,\n         ST    R6,WAGORILL         SAVE GORILLA ADDRESS\n         ST    R8,WAJSCBAC         SAVE JSCBACT ADDRESS\n         SPACE ,\n*              ENQUEUE ON THE PCCB RESOURCE AND SEARCH THE PCCB\n*              CHAIN FOR THE ENTRY FOR THE CATALOG IN GORDSNAM.\n         SPACE ,\n         MVC   WAENQ(PCCBENQE-PCCBENQ),PCCBENQ  COPY IN MODEL\n         SPACE ,\n         ENQ   MF=(E,WAENQ)        OBTAIN SYSZPCCB (EXCLUSIVE)\n         SPACE ,\n         OI    WAFLAG2,WAFPCENQ    REMEMBER THAT WE'RE ENQUEUED\n         SPACE ,\n*              SEARCH THE PCCB CHAIN FOR AN INACTIVE ENTRY WHERE\n*              PCCDSNAM MATCHES GORDSNAM AND PCCACBP IS ZERO.\n*              IF A STEPCAT ENTRY IS FOUND, RETURN IMMEDIATELY.\n*              (NOTE THAT STEPCATS ARE PLACED FIRST IN THE CHAIN.)\n         SPACE ,\n         ICM   R7,B'1111',JSCBPCC  @ FIRST PCCB OR ZERO\n         USING IEFPCCB,R7\nSUPLOC50 BZ    SUPLOC99            ENSURE PCCB ENTRY EXISTS, ELSE ERROR\n         TM    PCCSTAT1,PCCSTEPC   IS THIS A STEPCAT ENTRY?\n         BO    SUPLOC99            GET OUT IF SO\n         TM    PCCSTAT1,PCCACTIV   IS THIS PCCB ACTIVE?\n         BO    SUPLOC55            YES, GO LOOK AT THE NEXT ONE\n         CLC   PCCACBP,ZERO        IS ITS ACB POINTER ZERO?\n         BNE   SUPLOC55            NO, GO LOOK AT THE NEXT ONE\n         CLC   PCCDSNAM,GORDSNAM   DOES IT MATCH?\n         BE    SUPLOC60            YES, GO MODIFY IT...\nSUPLOC55 ICM   R7,B'1111',PCCNEXTP  NO, GET THE NEXT ONE\n         B     SUPLOC50            AND GO CHECK IT\n         SPACE ,\n*              MODIFY THE PCCB ENTRY WE'VE FOUND\n         SPACE ,\nSUPLOC60 OI    PCCSTAT1,PCCACTIV   SET ENTRY ACTIVE\n         MVC   PCCACBP,GORACBP     COPY SAVED ACB POINTER\n         SPACE ,\n*              IF PCCDDNAM IS BLANK, CHANGE IT SO THAT VSAM CATALOG\n*              EOV (IFG0550Y/IFG0200N) CANNOT POSSIBLY FIND A\n*              MATCHING ENTRY IN THE TIOT.\n         SPACE ,\n         CLC   PCCDDNAM,BLANKS     IS IT BLANKS NOW?\n         BNE   SUPLOC65            SKIP IF NOT\n         MVC   PCCDDNAM,FAKEDDN    ELSE GO CHANGE IT\n         SPACE ,\n*              REMEMBER WE'VE MODIFIED THE PCCB ENTRY\n         SPACE ,\nSUPLOC65 OI    WAFLAG2,WAFPCMOD    SET A FLAG HERE\n         SPACE ,\n*              DEQUEUE FROM THE SYSZPCCB RESOURCE (FOR NOW)\n         SPACE ,\n         DEQ   MF=(E,WAENQ)        RELEASE THE PCCB ENQUEUE\n         SPACE ,\n         NI    WAFLAG2,255-WAFPCENQ  AND RESET THE ENQ FLAG\n         SPACE ,\n*              RE-ISSUE THE SUPERLOCATE.  SAVE THE RETURN CODE IN R10.\n         SPACE ,\n         LOCATE WACTGPL            DO IT AGAIN\n         SPACE ,\n         LR    R10,R15             SAVE THE RETURN CODE\n         SPACE ,\n*              ENQUEUE ON SYSZPCCB AND FIND OUR PCCB ENTRY AGAIN\n*              (BE SAFE, THOUGH IT SHOULD NOT HAVE MOVED); THEN\n*              RESTORE THE FIELDS WE'VE MODIFIED.\n         SPACE ,\n*              NOTE THAT MUCH OF THE FOLLOWING CODE ALSO APPEARS\n*              IN THE ESTAE EXIT.\n         SPACE ,\n*                                  THE ENQ PARM LIST IS STILL SET\n         SPACE ,\n         ENQ   MF=(E,WAENQ)        OBTAIN SYSZPCCB (EXCLUSIVE)\n         SPACE ,\n         OI    WAFLAG2,WAFPCENQ    REMEMBER THAT WE'RE ENQUEUED\n         SPACE ,\n*              SEARCH THE PCCB CHAIN FOR A ACTIVE ENTRY WHERE\n*              PCCDSNAM MATCHES GORDSNAM.\n         SPACE ,\n         ICM   R7,B'1111',JSCBPCC  @ FIRST PCCB OR ZERO\nSUPLOC70 BZ    SUPLOC99            ENSURE PCCB ENTRY EXISTS, ELSE ERROR\n         TM    PCCSTAT1,PCCACTIV   IS THIS PCCB ACTIVE?\n         BZ    SUPLOC75            NO, GO LOOK AT THE NEXT ONE\n         CLC   PCCDSNAM,GORDSNAM   DOES IT MATCH?\n         BE    SUPLOC80            YES, GO UNMODIFY IT...\nSUPLOC75 ICM   R7,B'1111',PCCNEXTP  NO, GET THE NEXT ONE\n         B     SUPLOC70            AND GO CHECK IT\n         SPACE ,\n*              UN-MODIFY THE PCCB ENTRY WE'VE FOUND\n         SPACE ,\nSUPLOC80 NI    PCCSTAT1,255-PCCACTIV  SET ENTRY INACTIVE\n         MVC   PCCACBP,ZERO        ZERO THE ACB POINTER\n         SPACE ,\n*              RESET PCCDDNAM IF IT WAS MODIFIED\n         SPACE ,\n         CLC   PCCDDNAM,FAKEDDN    IS IT OUR SPECIAL DDNAME?\n         BNE   SUPLOC85            BIF NOT\n         MVC   PCCDDNAM,BLANKS     ELSE RESTORE IT TO BLANKS\n         SPACE ,\nSUPLOC85 NI    WAFLAG2,255-WAFPCMOD  RESET \"PCCB MODIFIED\" FLAG\n         SPACE ,\n*              DEQUEUE FROM THE SYSZPCCB RESOURCE\n         SPACE ,\n         DEQ   MF=(E,WAENQ)        RELEASE THE PCCB ENQUEUE\n         SPACE ,\n         NI    WAFLAG2,255-WAFPCENQ  AND RESET THE ENQ FLAG\n         SPACE ,\n*              RETURN THE SUPERLOCATE RETURN CODE TO R15 (FOR\n*              CONSISTENCY) AND ANALYZE IT.  FOR BREVITY, TESTS\n*              FOR \"CATALOG NOT ALLOCATED\" ARE OMITTED, SINCE\n*              THAT SHOULDN'T OCCUR, AND ANYWAY OUR CALLER DOESN'T\n*              DO ANYTHING DIFFERENT THAN FOR THE +12 RETURN.\n         SPACE ,\n         LR    R15,R10             RESTORE RETURN CODE TO R15\n         SPACE ,\n         C     R15,RCS         0   RETURN CODE=SUCCESS?\n         BE    SUPLOC20            YES, TEST IF WE FOUND A GDG BASE\n         SPACE ,\n         C     R15,RCENT       8   RETURN CODE=DATASET NOT IN CATALOG?\n         BE    0(R9)               YES, TAKE DEFINED RETURN\n         SPACE ,\n         C     R15,RCVLSZ     40   RETURN CODE=DATASET ON > 3 VOLUMES?\n         BE    8(R9)               YES, TAKE DEFINED RETURN\n         SPACE ,\n         B     12(R9)              NO, TAKE RETURN FOR ALL OTHER CODES\n         SPACE 2\n*              DEQUEUE FROM THE SYSZPCCB RESOURCE IN CASE OF ERROR\n         SPACE ,\nSUPLOC99 DEQ   MF=(E,WAENQ)        RELEASE THE PCCB ENQUEUE\n         SPACE ,\n         NI    WAFLAG2,255-WAFPCENQ  AND RESET THE ENQ FLAG\n         SPACE ,\n         NI    WAFLAG2,255-WAFPCMOD  RESET THIS TOO, FOR SAFETY\n         SPACE ,\n*              TAKE THE \"CATALOG UNAVAILABLE\" ERROR RETURN\n         SPACE ,\n         B     4(R9)               COMME CA\n         SPACE ,\n         DROP  R6,R7,R8\n         SPACE 2\n*              THE FOLLOWING CATALOG MANAGEMENT RETURN CODE NAMES AND\n*              DESCRIPTIONS WERE EXTRACTED FROM PL/S MACRO IGGMCTRC.\n         SPACE ,\n*              NOTE THAT ONLY THOSE WE COMPARE AGAINST ARE DEFINED\n*              AS DC'S; THE REST (HERE FOR COMPLETENESS) ARE EQU'S.\n         SPACE ,\nRCS      DC    A(0)                  /* SUCCESSFUL - NO ERRORS       */\nRCCAT    EQU   4                     /* CATALOG NON-EXISTENT OR NOT  */\n*                                    /*   OPENED                     */\nCOCECOMP EQU   4                     /* OPEN COMPLETE                */\nRCENT    DC    A(8)                  /* ENTRY NOT EXIST (NON-DEF),   */\n*                                    /* ENTRY EXISTS (DEFINE)        */\nRCINSP   EQU   20                    /* INSUFF SPACE CAT D.S.        */\nRCIOL    EQU   24                    /* I/O ERROR CAT D.S. LOCATE    */\nRCIONL   EQU   28                    /* I/O ERROR CAT D.S. NOT LOCATE*/\nRCINCPL  EQU   32                    /* INVALID CPL OR USER WORK     */\n*                                    /* AREA OUTSIDE USER REGION     */\nRCDSNF   DC    A(36)                 /* DATA SET NOT FOUND           */\nRCVLSZ   DC    A(40)                 /* VOLUME LIST OR WORKAREA TOO  */\n*                                    /* SMALL, CORRECT SIZE IN       */\n*                                    /* FEEDBACK FIELD               */\nRCVLSM   EQU   44                    /* WORKAREA TOO SMALL, UNABLE   */\n*                                    /* TO RETURN REQUIRED SIZE      */\nRCINFUNC EQU   48                    /* INVALID FUNCTION             */\nRCIOU    EQU   52                    /* I/O ERROR USER VOLUME        */\nRCSEC    EQU   56                    /* SECURITY VERIFICATION        */\nRCINENT  EQU   60                    /* INVALID ENTRY TYPE           */\nRCNAME   EQU   64                    /* ASSOCIATION NAME NOT EXIST   */\nRCNOSP   DC    A(68)                 /* NO SPACE ON USER VOLUME      */\nRCNMNTD  EQU   72                    /* USER VOLUME NOT MOUNTED      */\nRCNUNIT  EQU   76                    /* UNIT NOT AVAILABLE FOR       */\n*                                    /*   MOUNTING                   */\nRCRELOP  EQU   80                    /* INVALID OPERATION FOR\n*                                         RELATIONSHIP       @Y30SSPJ*/\nRCDATE   EQU   84                    /* UNEXPIRED PURGE DATE         */\nRCCRAOP  EQU   88                    /* ERROR WITH CRA OPERATION\n*                                                            @Y30SSPJ*/\nRCDSEXT  EQU   92                    /* D.S. MAX NO. OF EXTENTS      */\nRCOBTAIN EQU   94                    /* OS/VS DADSM OBTAIN ERROR\n*                                                            @Y30SSSM*/\nRCSPANCK EQU   96                    /* SPANNED RECORD VALIDITY\n*                                          CHECK FAILED      @Y30SSPJ*/\nRCRENAME EQU   98                    /* DADSM RENAME ERROR   @Y30SSPJ*/\nRCSCRTCH EQU   102                   /* DADSM SCRATCH I/0 ERROR\n*                                                            @Y30SSPJ*/\nRCCATEX  EQU   104                   /* CATALOG EXISTS               */\nRCNTFMT4 EQU   106                   /* INVALID FORMAT 4 DSCB\n*                                          READ FROM VOLUME  @Y30SSPJ*/\nRCINFNAM EQU   108                   /* INVALID FIELDNAME            */\nRCPRFNDL EQU   110                   /* PROFILE NOT DELETED  @Z40RSRC*/\nRCINFPL  EQU   112                   /* INVALID FPL                  */\nRCDUPROF EQU   114                   /* DUPLICATE PROFILE    @Z40RSRC*/\nRCCATBAL EQU   116                   /* CATALOG OUT-OF-BALANCE       */\nRCNDEFSS EQU   118                   /* ENTITY CANNOT BE DEFINED\n*                                       TO SECURITY SUB SYS  @Z40RSRC*/\nRCSYSFLD EQU   120                   /* ATTEMPTED TO MODIFY SYSTEM   */\n*                                    /* FIELD OR NON-EXISTENT FIELD  */\nRCINCI   EQU   124                   /* INVALID CI NUMBER            */\nRCBLKVCK EQU   128                   /* VALIDITY CHECK ON USER BLOCK */\nRCINPTR  EQU   132                   /* INVALID POINTER              */\nRCMISPAR EQU   136                   /* MISSING REQUIRED PARAMETER   */\nRCINCNPM EQU   140                   /* INCONSISTENT PARAMETERS      */\nRCINENTN EQU   144                   /* INVALID ENTRYNAME            */\nRCVOLOWN EQU   148                   /* VOLUME ALREADY OWNED         */\nRCDNECAT EQU   152                   /* DELETE OF NON-EMPTY CATALOG  */\nRCNOSPSA EQU   156                   /* NO SPACE TO SUBALLOCATE      */\nRCVNDSPD EQU   160                   /* VOL NOT DELETED (SPACE DEL   */\nRCINSSWA EQU   164                   /* INSUFF STORAGE FOR WORKAREA  */\nRCINVDTY EQU   168                   /* UNSUPPORTED DEVICE TYPE      */\nRCDUPNVL EQU   172                   /* DUPLICATE NAME ON VOLUME     */\nRCNSPVTC EQU   176                   /* NO SPACE ON VTOC             */\nRCDSNFND EQU   180                   /* DATA SPACE NOT FOUND         */\nRCDSO    EQU   184                   /* DATA SET OPEN - CANNOT       */\n*                                    /*   DELETE             @Y30SSSB*/\nRCCATUNA DC    A(188)                /* CATALOG UNAVAILABLE          */\nRCMLRSZ  EQU   192                   /* MAX. LOG. REC. SIZE EXCEEDED */\nRCMCISZD EQU   196                   /* MAX CI SIZE EXCEEDED - DATA  */\nRCMCISZI EQU   200                   /* MAX CI SIZE EXCEEDED - INDEX */\nRCKEYINC EQU   204                   /* KEY EXTENDS BEYOND END OF    */\n*                                    /*   MAXIMUM LOGICAL RECORD     */\nRCBUFSIZ EQU   208                   /* BUFFER SIZE TOO SMALL        */\nRCSIZCAL EQU   212                   /* SIZE CALCULATIONS UNSOLVABLE */\nRCVTCBAL EQU   216                   /* VTOC OF VOLUME OUT-OF-BALANCE*/\nRCDOSVTC EQU   220                   /* DOS VTOC CANNOT BE CONVERTED */\n*                                    /*   TO OS VTOC                 */\nRCMXGRP  EQU   224                   /* CATALOG ENTRY HAS EXCEEDED MAX.\n*                                         NUMBER OF OCCURRENCES      */\nRCTSAUTH EQU   226                   /* TESTAUTH MACRO FAILED\n*                                                            @Y30SSJG*/\nRCLOCKER EQU   228                   /* TIME-OF-DAY CLOCK ERROR      */\nRCHIGH   EQU   230                   /* NOT LOW RANGE RECORD ON\n*                                          CI GET            @Y30SSJG*/\nRCSMFER  EQU   232                   /* SMF PROCESSING ERROR         */\nRCLEOD   EQU   234                   /* EOD ENCOUNTERED WHILE\n*                                          READING CATALOG LOW DATA\n*                                          KEY RANGE         @Y30SSJG*/\nRCSPMAPE EQU   236                   /* SPACE MAP SCAN ERROR         */\nRCNOUCEN EQU   238                   /* NO USER CATALOG ENTRY IN\n*                                          MASTER CATALOG FOR\n*                                          CONVERTV          @Y30SSJG*/\nRCINDER  EQU   240                   /* NO DDNAME ERROR      @Y30SSDW*/\nRCEFRMPH EQU   242                   /* PHYSICAL ERROR FROM RECORD\n*                                          MANAGEMENT DURING DELETE\n*                                          WITH ERASE OPTION @Y30SSPJ*/\nRCEF     EQU   244                   /* ERASE FAILED - DELETE NOT    */\n*                                    /*   PERFORMED                  */\nRCVOLENT EQU   248                   /* VOLUME ENTRY DOES NOT EXIST  */\nRCEFRM   EQU   250                   /* LOGICAL ERROR FROM RECORD\n*                                          MANAGEMENT DURING DELETE\n*                                          WITH ERASE OPTION @Y30SSPJ*/\nRCEE     EQU   252                   /* EARLY EXIT CODE              */\n         TITLE 'DSNCHECK - IGGPRE00 DSNAME STANDARDS CHECK'\n*************************************\n* DSNCHECK - DSNAME STANDARDS CHECK *\n*************************************\n*\n*        THIS ROUTINE DETERMINES WHETHER THE DSNAME MEETS INSTALLATION\n*        STANDARDS.  THE REQUIRED FORMAT IS DEFINED BELOW.\n*\n*        CALLED FOR: ALLOCATION, EXTEND, RENAME\n*\n*\n*        ***********\n*        *  NOTE:  *  THE TRANSLATE TABLE BELOW IS ALSO USED FOR\n*        ***********    THE GDG CHECK IN ROUTINE \"COMMON\".\n*\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTION                  *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n*\n*        THIS ROUTINE MUST BE MODIFIED TO TEST THE DSNAME ACCORDING\n*              TO INSTALLATION STANDARDS.\n*\n*        FOR CUNY, THE DSNAME MUST BEGIN IN THE FORM\n*               WYL.AA.ANN.A\n*              WHERE A=ALPHA AND N=ALPHANUMERIC\n*\n*        NOTE THAT THE LOGIC IN THIS SECTION MUST BE MODIFIED IF\n*              THE DSNAME STANDARD IS NOT A FIXED FORMAT WITH A\n*              SPECIFIC HIGH-LEVEL PREFIX.\n*\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              END OF INSTALLATION-DEPENDENT CODE                   *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n*\n*\n*        INPUT: WADSNAME POINTS TO THE DSNAME TO BE CHECKED\n*\n*        RETURN CODES ARE VIA A BRANCH TABLE:\n*           R9+0: DSNAME IS *NOT* VALID\n*           R9+4: DSNAME IS VALID\n*\n*        REGISTER USAGE:\n*           R1 = WORK\n*           R9 = RETURN ADDRESS\n*\nDSNCHECK DS    0H\n         SPACE ,\n*              OBTAIN THE DSNAME'S ADDRESS\n         SPACE ,\n         L     R1,WADSNAME         FROM THE WORK AREA\n         SPACE ,\n*              VALIDATE THE DSNAME PREFIX\n         SPACE\n         CLC   PREFIX,0(R1)        SEE IF IT MATCHES\n         BNER  R9                  NO, DSNAME IS INVALID\n         SPACE ,\n*              COMPARE THE DSNAME AGAINST THE MODEL DEFINED BELOW\n         SPACE ,\n         MVC   WADSNWRK,0(R1)      COPY DSNAME TO WORK AREA\n         TR    WADSNWRK,DSNXLATE   CONVERT CHARACTERS TO TYPE CODES\n         OC    WADSNWRK,DSNMATCH   TURN ON ALL VALID TYPE CODES\n         XC    WADSNWRK,DSNMATCH   TURN OFF ALL VALID TYPE CODES\n         BNZR  R9                  IF ANY ARE LEFT, THE DSN'S INVALID\n         SPACE ,\n         B     4(R9)               OTHERWISE IT PASSED, USE \"OK\" RETURN\n         SPACE 2\n*              DEFINE TRANSLATE TABLE FOR DSNAME VALIDATION\n         SPACE ,\n* CHARACTER TYPE EQUATES:\n         SPACE ,\nA        EQU   X'80'               ALPHABETIC (INCLUDES NATIONAL CHARS)\nN        EQU   X'40'               NUMERIC\nP        EQU   X'20'               PERIOD\n         SPACE ,\nINV      EQU   X'10'               INVALID (ALL OTHER CHARACTERS)\nANY      EQU   X'FF'               IN MODEL, MEANS ANY CHAR IS OK\n         SPACE ,\nDSNXLATE DC    256AL1(INV)         PRE-FILL TABLE WITH \"INVALID\"\n         SPACE ,\n* ALPHABETIC CHARACTERS:\n         SPACE ,\n         ORG   DSNXLATE+C'A'\n         DC    (C'I'-C'A'+1)AL1(A)  LETTERS A-I\n         ORG   DSNXLATE+C'J'\n         DC    (C'R'-C'J'+1)AL1(A)  LETTERS J-R\n         ORG   DSNXLATE+C'S'\n         DC    (C'Z'-C'S'+1)AL1(A)  LETTERS S-Z\n         ORG   DSNXLATE+C'@'\n         DC    AL1(A)               NATIONAL CHARACTER @\n         ORG   DSNXLATE+C'#'\n         DC    AL1(A)               NATIONAL CHARACTER #\n         ORG   DSNXLATE+C'$'\n         DC    AL1(A)               NATIONAL CHARACTER $\n         SPACE ,\n* NUMERIC CHARACTERS:\n         SPACE ,\n         ORG   DSNXLATE+C'0'\n         DC    (C'9'-C'0'+1)AL1(N)  NUMERICS 0-9\n         SPACE ,\n* THE PERIOD:\n         SPACE ,\n         ORG   DSNXLATE+C'.'\n         DC    AL1(P)              YUP.\n         ORG   ,\n         SPACE 2\n*              DEFINE THE MATCH PATTERN (PRESET TO ALL \"ANY\"):\n         SPACE ,\nDSNMATCH DC    (L'JFCBDSNM)AL1(ANY)          (WILL BE MODIFIED BELOW)\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTION                  *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n*              THE FOLLOWING MODIFIES THE MATCH PATTERN TO\n*              CUNY SPECIFICATIONS:\n         SPACE ,\n         ORG   DSNMATCH\n         DC    AL1(A,A,A,P,A,A,P,A,A+N,A+N,P,A)\n*                  W Y L . A A . A A/N A/N . A\n         ORG   ,\n         SPACE ,\nPREFIX   DC    C'WYL.'             REQUIRED DSNAME PREFIX\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              END OF INSTALLATION-DEPENDENT CODE                   *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         TITLE 'RACCHECK - IGGPRE00 RACF AUTHORITY CHECK'\n***********************************\n* RACCHECK - RACF AUTHORITY CHECK *\n***********************************\n*\n*        THIS ROUTINE CALLS RACF TO CHECK THAT THE USER HAS RACF\n*        AUTHORIZATION TO ALLOCATE A DATASET ON THIS VOLUME.\n*\n*        THE RACF CALL IS FOR CLASS \"FACILITY\" AND PROFILE NAME\n*        $DASDI.VVVVVV, WHERE VVVVVV IS THE VOLUME SERIAL.  RACF\n*        UPDATE AUTHORITY IS REQUIRED TO ALLOCATE A DATASET.  IF\n*        THE PROFILE NAME IS NOT DEFINED, THEN ALLOCATION ON THE\n*        VOLUME DOES NOT REQUIRE RACF AUTHORIZATION.\n*\n*        NOTE THAT THE RACF CALL SPECIFIES LOG=ASIS, TO LOG\n*        VIOLATIONS ACCORDING TO THE PROFILE'S SPECIFICATION.\n*        IF WE USE STORAGE VOLUMES AND PROTECT THEN THROUGH THIS\n*        FACILITY, THE CALL SHOULD BE CHANGED TO LOG=NOFAIL, AS\n*        OTHERWISE MISLEADING MESSAGES (ICH408I) AND/OR SMF RECORDS\n*        WILL BE CREATED IF USERS ARE AUTHORIZED TO ONLY A SUBSET\n*        OF THE STORAGE VOLUMES.\n*\n*        NOTE THAT VSAM DATASETS ARE *NOT* EXCLUDED FROM THIS CHECK.\n*\n*        IF THE REQUEST IS FOR NON-SPECIFIC VOLUME ALLOCATION AND\n*        THE VOLUME BEING TESTED IS PUBLIC, THEN THE RACROUTE IS\n*        ISSUED WITH LOG=NOFAIL TO AVOID ERROR MESSAGES IF THE USER\n*        HASN'T SUFFICIENT AUTHORITY IN THIS CASE.\n*\n*\n*        THE RACROUTE PARAMETERS AND PARAMETER LIST HAVE ALL BEEN\n*        SET UP BY PPWAINIT.\n*\n*        NOTE THAT THIS CODE IS ADAPTED FROM THE SAMPLE EXIT THAT'S\n*        DISTRIBUTED WITH RACF IN SYS1.SAMPLIB MEMBER RACINSTL.\n*\n*\n*        CALLED FOR: ALLOCATION, EXTEND\n*\n*        RETURN CODES ARE VIA A BRANCH TABLE:\n*           R9+0: AUTHORITY DENIED BY RACF\n*           R9+4: REQUEST IS AUTHORIZED BY RACF, OR RESOURCE IS NOT\n*                 DEFINED TO RACF, OR RACF IS NOT ACTIVE\n*\n*        REGISTER USAGE:\n*           R9 = RETURN ADDRESS\n*\nRACCHECK DS    0H\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTION                  *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n*              WYLBUR SAVES ARE EXCLUDED FROM THE RACF CHECK\n*              BECAUSE WYLBUR DOES ITS OWN RACF CALL.\n         SPACE ,\n         TM    WAFLAGU,WAFWYLIO    IS OUR CALLER A WYLBUR I/O TASK?\n         BO    4(R9)               YES, BYPASS THE RACF CALL\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              END OF INSTALLATION-DEPENDENT CODE                   *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n*              DETERMINE IF THE REQUEST IS FOR A NON-SPECIFIC VOLUME\n*              ALLOCATION AND THE CURRENT VOLUME IS A PUBLIC VOLUME.\n*              IF SO, DO THE RACROUTE WITH LOG=NOFAIL, TO AVOID RACF\n*              ERROR MESSAGES IF THE USER DOES NOT HAVE AUTHORITY.\n*              THERE IS ALSO COMPARABLE CODE AT \"ERROR4\" TO BYPASS\n*              THE ERROR MESSAGE TO SYSMSG IN THIS CASE.\n*\n*              NOTE THAT A TEST FOR A SYSTEM-GENERATED NAME WAS\n*              REMOVED; A TEMPORARY DATASET CAN HAVE A REAL DSNAME.\n         SPACE ,\n*              ADDRESS THE SIOT, IF PRESENT\n         SPACE ,\n         ICM   R1,B'1111',WASIOTAD  @ SIOT, IF AVAILABLE\n         BZ    RACHECK1            SIOT NOT AVAILABLE, GO NORMALLY\n         USING SIOT,R1\n         SPACE ,\n*              TEST IF SIOT INDICATES NON-SPECIFIC VOLUME REQUEST\n         SPACE ,\n         TM    SIOTSMS,SIOTSMS6    ON => SPECIFIC VOLUME WAS SPECIFIED\n         BO    RACHECK1            CONTINUE WITH MESSAGES IF SPECIFIC\n         SPACE ,\n*              TEST IF UCB INDICATES A PUBLIC VOLUME\n         SPACE ,\n         ICM   R1,B'1111',IEXUCB   @ UCB\n         BZ    RACHECK1            BRANCH IF UCB NOT AVAILABLE\n         USING UCBOB,R1\n         TM    UCBSTAB,UCBBPUB     PUBLIC VOLUME?\n         BO    RACHECK2            YES, THEN BYPASS ERROR MESSAGES\n         DROP  R1\n         SPACE ,\n*              ISSUE THE NORMAL RACROUTE CALL FOR AUTHORITY CHECKING\n         SPACE ,\nRACHECK1 RACROUTE  REQUEST=AUTH,   REQUEST IS FOR RACHECK              *\n               CLASS=RACLASS,      CLASS NAME IS 'FACILITY'            *\n               ENTITY=RACPPROF,    ENTITY IS '$DASDI.VVVVVV'           *\n               ATTR=UPDATE,        UPDATE AUTHORITY IS REQUIRED        *\n               LOG=ASIS,           LOG ACCESS ACCORDING TO PROFILE     *\n               WORKA=SAFWORK,      ADDRESS OF SAF WORK AREA            *\n               MF=(E,RACPROUT)     ADDRESS THE PARAMETER SKELETON\n         B     RACHECK3            CONTINUE AND CHECK THE RETURN CODE\n         SPACE ,\n*              ISSUE THE RACROUTE CALL WITH LOG=NOFAIL INSTEAD\n         SPACE ,\nRACHECK2 RACROUTE  REQUEST=AUTH,   REQUEST IS FOR RACHECK              *\n               CLASS=RACLASS,      CLASS NAME IS 'FACILITY'            *\n               ENTITY=RACPPROF,    ENTITY IS '$DASDI.VVVVVV'           *\n               ATTR=UPDATE,        UPDATE AUTHORITY IS REQUIRED        *\n               LOG=NOFAIL,         DO NOT LOG ACCESS FAILURES          *\n               WORKA=SAFWORK,      ADDRESS OF SAF WORK AREA            *\n               MF=(E,RACPROUT)     ADDRESS THE PARAMETER SKELETON\n         SPACE ,\n*              CHECK THE RACROUTE RETURN CODE\n         SPACE ,\nRACHECK3 DS    0H\n         SPACE ,\n*              THESE ARE THE EXPECTED RETURN CODES:\n*                R15=0  -  THE RACF AUTHORITY CHECK SUCCEEDED.\n*                R15=4  -  RACF IS NOT ACTIVE, OR THERE IS NO\n*                          PROFILE FOR THE REQUESTED RESOURCE.\n*                          IN EITHER CASE, WE ALLOW ACCESS.\n*                R15=8  -  THE RACF AUTHORITY CHECK FAILED.\n*\n*              WE NEED TO CHECK ONLY FOR R15=8 BECAUSE ALL OTHER\n*              RETURN CODES ALLOW THE ALLOCATION TO PROCEED.\n         SPACE ,\n         C     R15,EIGHT           TEST FOR RETURN CODE=8\n         BER   R9                  FAIL REQUEST IF RC=8\n         SPACE ,\n         B     4(R9)               OTHERWISE IT PASSED, USE \"OK\" RETURN\n         TITLE 'VOLDSNIN - IGGPRE00 VOLUME && DSNAME INITIAL CHECK'\n********************************************\n* VOLDSNIN - VOLUME & DSNAME INITIAL CHECK *\n********************************************\n*\n*        THIS ROUTINE DETERMINES WHETHER THE CURRENT VOLUME AND DSNAME\n*              ARE SUBJECT TO DSNAME/CATALOG STANDARDS\n*\n*        CALLED FOR: ALLOCATION, RENAME, EXTEND\n*\n*\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTION                  *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n*\n*        THIS ROUTINE MUST BE MODIFIED TO TEST THE VOLUME SERIAL\n*              AND DSNAME ACCORDING TO INSTALLATION STANDARDS.\n*\n*        FOR CUNY, DATASETS SUBJECT TO DSNAME CHECKS ARE ALL THOSE ON\n*            VOLUMES WITH PREFIXES \"ACT\", \"CNY\", \"PRD\", \"RES\",\n*            AND \"UCC\", AND ANY DATASETS WITH A HIGH-LEVEL INDEX OF\n*            \"WYL.\" ON VOLUMES WITH PREFIXES \"ADA\", \"ILS\", \"JES\",\n*            \"MVS\", \"SCR\", \"SYS\", \"TMP\", AND \"UCC\".\n*\n*        FOR CUNY, DATASETS SUBJECT TO CATALOG CHECKS ARE THOSE WITH A\n*            HIGH-LEVEL INDEX OF \"WYL.\" ON VOLUMES WITH PREFIXES OF\n*            \"ACT\", \"ADA\", \"CNY\", \"ILS\", \"JES\", \"MVS\",\n*            \"PRD\", \"RES\", \"SYS\", AND \"UCC\".\n*\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              END OF INSTALLATION-DEPENDENT CODE                   *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n*\n*\n*        INPUT:  FLAG BIT \"WAFVSAM\" INDICATES IF THE CURRENT DATASET\n*              IS VSAM (DSORG=AM).\n*                R1 CONTAINS THE ADDRESS OF THE DSNAME TO BE CHECKED\n*              (NOTE THAT THIS IS DIFFERENT FOR RENAME, WHERE IT'S\n*              THE *NEW* DSNAME, THAN FOR ALLOCATE AND EXTEND).\n*\n*        OUTPUT: FLAG BITS \"WAFDSNCK\" AND \"WAFCATCK\" IN \"WAFLAG1\"\n*              ARE SET AS APPROPRIATE.  R1 IS SAVED IN WADSNAME.\n*\n*        NOTE: VSAM DATASETS ARE NOT ELIGIBLE FOR EITHER DSNAME\n*              OR CATALOGABILITY CHECKS.\n*\n*        REGISTER USAGE:\n*           R1 = DSNAME POINTER\n*           R6 = UCB POINTER\n*           R9 = RETURN ADDRESS\n*           R14 = WORK\n*           R15 = WORK\n*\nVOLDSNIN DS    0H\n         SPACE ,\n*              SAVE DSNAME POINTER FOR FUTURE USE\n         SPACE ,\n         ST    R1,WADSNAME         SAVEITHERE\n         SPACE ,\n*              ENSURE FLAGS ARE RESET\n         SPACE ,\n         NI    WAFLAG1,255-WAFDSNCK-WAFCATCK  LIKE SO\n         SPACE ,\n*              BYPASS VSAM DATASETS\n         SPACE ,\n         TM    WAFLAG1,WAFVSAM     IS THIS ONE?\n         BOR   R9                  YES, EXIT THIS ROUTINE\n         SPACE ,\n*              SEE IF THE VOLUME SERIAL IS IN OUR LIST.\n         SPACE ,\n*              LOOP THROUGH THE VOLUME LIST (FOUND BELOW)\n         SPACE ,\n         LA    R14,VOLIST          @ FIRST VOLUME PREFIX\n         LA    R15,VOLCOUNT        NUMBER OF ENTRIES TO CHECK\n         SPACE ,\nVOLLOOP  CLC   WAUCBVOL(L'VOLIST),0(R14)  IS THIS ONE OF OURS?\n         BE    VOLGOTIT            BIF SO\n         LA    R14,L'VOLIST+1(R14)  NO, INCREMENT POINTER\n         BCT   R15,VOLLOOP         AND GO TEST THE NEXT ONE\n         SPACE ,\n*              VOLUME WAS NOT FOUND.  DSNAME ISN'T TO BE CHECKED\n*              EITHER IN THAT CASE, SO JUST RETURN TO CALLING ROUTINE.\n         SPACE ,\n         BR    R9                  ... LIKE SO.\n         SPACE ,\n*              VOLUME WAS FOUND.  SET FLAG, THEN LOOK AT DSNAME.\n         SPACE ,\n*              DSNAME CHECK DETERMINATION\n         SPACE ,\nVOLGOTIT TM    L'VOLIST(R14),WAFDSNCK  IS DSN CHECK REQUIRED?\n         BO    DSNCK10             YES, GO DO IT\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTION                  *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n*              CHECK HIGH-LEVEL INDEX.  ANY \"WYL.\" DATASETS MUST\n*              UNDERGO DSNAME VALIDATION IF THE VOLUME IS IN OUR\n*              LIST EVEN IF WAFDSNCK ISN'T SET.  (IF IT IS SET,\n*              *ANY* DSNAME ON THE VOLUME IS VALIDATED.)\n         SPACE ,\n         L     R1,WADSNAME         ENSURE THAT R1 POINTS TO DSNAME\n         SPACE ,\n         CLC   HILINDEX,0(R1)      CHECK DSNAME HIGH-LEVEL INDEX\n         BE    DSNCK10             MATCH, GO SET DSNAME VALIDATION\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              END OF INSTALLATION-DEPENDENT CODE                   *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n         B     VOLGOT2             ELSE SKIP TO CAT CHECK TESTS\nDSNCK10  DS    0H\n         SPACE ,\n*              NOTE THAT THE OBVIOUS METHOD OF COPYING THE FLAG BITS\n*              (OC  WAFLAG1,0(R14)) IS NOT USED BECAUSE OF THE MANY\n*              EXCEPTION TESTS WE MUST MAKE.  ALSO, NOTE THAT R14\n*              MUST BE PRESERVED UNTIL LABEL \"VOLGOT2\" TO ALLOW THE\n*              VOLUME CATALOG CHECK CODE TO WORK.\n         SPACE 2\n*              CHECK IF DSNAME CHECK SHOULD BE BYPASSED.\n         SPACE ,\n*              THE FOLLOWING DATASETS WILL BE EXCLUDED FROM THE\n*              DSNAME STANDARDS CHECK:\n*\n*               VSAM (DSORG=AM)  -  VSAM DSCB1 NAMES CAN'T PROPERLY BE\n*                                   CONTROLLED HERE.  VSAM DATASETS ARE\n*                                   EXCLUDED ABOVE (IN THIS ROUTINE).\n*               VIO              -  VIO DSNAMES DON'T MATTER; EXCLUDED\n*                                   IN THE IGGPRE00 MAINLINE.\n         SPACE ,\n*              SINCE VSAM AND VIO DATASETS DON'T GET TO THIS ROUTINE,\n*              NO CODE IS REQUIRED HERE.\n         SPACE ,\n*              THE FOLLOWING AUTHORIZED PROGRAMS WILL BE EXCLUDED\n*              FROM THE DSNAME CHECK BECAUSE THEY ARE KNOWN (AND\n*              ALLOWED) TO CREATE NON-STANDARD NAMES:\n*\n*               DFHSM  (PREFIX IS \"ARC\")\n*               ICKDSF\n*               IEHMOVE (PROGRAM NAME \"IEHMVESV\") WHEN DSNAME\n*                       BEGINS WITH \"&&TEMP.T\": THIS IS CREATED\n*                       FOR A \"MOVE DSNAME\" TO THE SAME VOLUME\n*               FDR... WHEN DSNAME BEGINS WITH \"FDRABR.\"\n         SPACE ,\n         TM    WAFLAG1,WAFWAPGM    HAVE WE AN AUTHORIZED PROGRAM NAME?\n         BZ    DSNCK20             NO, SKIP THIS CODE\n         SPACE ,\n*              BECAUSE THERE ARE ONLY THREE NAMES TO COMPARE HERE,\n*              THE CODE ISN'T SET UP TO LOOP THROUGH THE LIST\n         SPACE ,\n         L     R1,WADSNAME         ENSURE THAT R1 POINTS TO DSNAME\n         SPACE ,\n         CLC   PGMPREF1,WAPGM      CHECK PROGRAM PREFIX\n         BE    VOLGOT2             IF FOUND EXIT THIS ROUTINE\n         SPACE ,\n         CLC   PGMPREF3,WAPGM      CHECK FOR \"FDR\" PROGRAM PREFIX\n         BNE   DSNCK15             SKIP FOLLOWING TEST IF NOT\n         CLC   FDRABDSN,0(1)       COMPARE FOR \"FDRABR.\" DSNAME\n         BE    VOLGOT2             IF FOUND EXIT THIS ROUTINE\nDSNCK15  DS    0H\n         SPACE ,\n         CLC   PGMLISTA,WAPGM      CHECK PROGRAM NAME\n         BE    VOLGOT2             IF FOUND EXIT THIS ROUTINE\n         SPACE ,\n         CLC   PGMLISTB,WAPGM      CHECK PROGRAM NAME FOR IEHMOVE\n         BNE   DSNCK20             IF NOT FOUND SKIP DSNAME COMPARE\n         SPACE ,\n         CLC   IEHMVDSN,0(R1)      COMPARE FOR IEHMOVE'S DSNAME\n         BE    VOLGOT2             IF FOUND EXIT THIS ROUTINE\n         SPACE ,\nDSNCK20  DS    0H\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTION                  *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n*              WYLBUR SAVES ARE EXCLUDED FROM THE DSNAME CHECKING\n*              BECAUSE WYLBUR DOES ITS OWN CHECKS.\n         SPACE ,\n         TM    WAFLAGU,WAFWYLIO    IS OUR CALLER A WYLBUR I/O TASK?\n         BO    VOLGOT2             YES, DO NOT PERFORM DSNAME CHECKS\n         SPACE 2\n*              TSO USERID SRVIM (THE IBM SERVICE DIRECTOR) IS\n*              EXEMPTED FROM DSNAME CHECKING WHEN THE DSNAME\n*              PREFIX IS \"SYS3.\" AND THE VOLUME PREFIX IS \"CNY\".\n*              THIS IS NECESSARY BECAUSE OUR MOD LM54400 IS NOT\n*              COMPLETE ENOUGH TO ALLOW IT TO USE A \"WYL.\" PREFIX.\n         SPACE ,\n*              FIRST, FIND OUT IF THERE IS A TSO USERID\n         SPACE ,\n         L     R1,PSATOLD           @ CURRENT TCB\n         USING TCB,R1\n         L     R1,TCBJSTCB          @ JOB STEP TCB\n         ICM   R1,B'1111',TCBJSCB   @ JSCB\n         BZ    NOTSRVIM             SKIP IF NO JSCB ADDRESS\n         USING IEZJSCB,R1\n         ICM   R1,B'1111',JSCBPSCB  @ PSCB\n         BNP   NOTSRVIM             SKIP IF PSCB NOT PRESENT\n         USING PSCB,R1\n         SPACE ,\n*              SEE IF THE TSO USERID IS SRVIM\n         SPACE ,\n         CLC   PSCBUSER,SRVIM       WELL, IS IT?\n         BNE   NOTSRVIM             SKIP IF NOT\n         DROP  R1\n         SPACE ,\n*              SEE IF THE DATASET NAME PREFIX IS SYS3.\n         SPACE ,\n         L     R1,WADSNAME          @ DSNAME\n         CLC   SYS3,0(R1)           CHECK THE HIGH-LEVEL INDEX\n         BNE   NOTSRVIM             SKIP IF IT'S NOT SYS3.\n         SPACE ,\n*              SEE IF THE VOLUME PREFIX IS CNY\n         SPACE ,\n         CLC   CNY,0(R14)           (R14 -> VOLIST ENTRY)\n         BNE   NOTSRVIM             SKIP IF IT'S NOT A CNY VOLUME\n         SPACE ,\n*              ALL TESTS PASSED FOR SRVIM, BYPASS DSNAME VALIDATION\n         SPACE ,\n         B     VOLGOT2\n         SPACE ,\nNOTSRVIM DS    0H\n         SPACE 2\n*              NOTE THAT STAFF JOBS ARE NO LONGER EXEMPT FROM DSNAME\n*              CHECKING (STARTED TASKS WERE AND ARE NOT, EITHER).\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              END OF INSTALLATION-DEPENDENT CODE                   *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n         OI    WAFLAG1,WAFDSNCK    INDICATE DSNAME MUST BE VALID\n         SPACE 2\n*              CATALOG CHECK DETERMINATION\n         SPACE ,\nVOLGOT2  TM    L'VOLIST(R14),WAFCATCK  IS CAT CHECK REQUIRED?\n         BZR   R9                  IF NOT, RETURN\n         SPACE ,\n*              CHECK IF CATALOG CHECK SHOULD BE BYPASSED.\n         SPACE ,\n*              THE FOLLOWING DATASETS WILL BE EXCLUDED FROM THE\n*              CATALOGABILITY CHECK:\n*\n*               VSAM (DSORG=AM)  -  ALL VSAM DATASETS ALREADY MUST\n*                                   BE CATALOGED.  VSAM DATASETS ARE\n*                                   EXCLUDED ABOVE (IN THIS ROUTINE).\n*               VIO              -  VIO DATASETS CANNOT BE CATALOGED;\n*                                   EXCLUDED IN THE IGGPRE00 MAINLINE.\n*               ISAM (DSORG=IS)  -  ONLY THE FIRST ALLOCATION CALL\n*                                   FOR AN ISAM DATASET IS SUBJECT\n*                                   TO THIS CHECK.  (SEE THE JCL\n*                                   MANUAL: MANY VALID ISAM DATASET\n*                                   ALLOCATIONS CAN'T BE CATALOGED.)\n         SPACE ,\n*              SINCE VSAM AND VIO DATASETS DON'T GET TO THIS ROUTINE,\n*              ONLY ISAM (ALLOCATE FUNCTION) MUST BE TESTED HERE:\n         SPACE ,\n         CLI   IEXFUNC,IEXALL       IS THIS ALLOCATE?\n         BNE   VOLCK10              SKIP TEST IF NOT\n         TM    IEXFLAG,IEXMF1       IS THERE A JFCB?\n         BO    VOLCK10              SKIP IF NOT, CAN'T BE ISAM\n         L     R14,IEXPTR1          YES, GET JFCB ADDRESS\n         USING JFCB,R14\n         TM    JFCDSORG,JFCORGIS    IS THIS AN ISAM ALLOCATION?\n         BZ    VOLCK10              SKIP IF NOT\n         DROP  R14\n         SPACE ,\n*              DETERMINE IF THIS IS THE FIRST ISAM ALLOCATION CALL\n*              BY CHECKING THE DSAB LIST\n         SPACE ,\n         L     R14,IEXPTR2          GET DSAB LIST POINTER\n         CLC   0(4,R14),4(R14)      IS CURRENT (+0) = FIRST (+4)?\n         BNER  R9                   EXIT IF NOT, NO CATCK THIS DSN\nVOLCK10  DS    0H\n         SPACE ,\n*              THE FOLLOWING AUTHORIZED PROGRAMS WILL BE EXCLUDED\n*              FROM THE CATALOGABILITY CHECK BECAUSE THEY ARE KNOWN\n*              (AND ALLOWED) TO MANIPULATE THE CATALOG THEMSELVES:\n*\n*               DFHSM  (PREFIX IS \"ARC\")\n*               DFDSS  (PREFIX IS \"ADR\")\n*               FDRDSF (PREFIX \"FDR\")\n*               IEHMOVE (PROGRAM NAME \"IEHMVESV\") - OTHERWISE A\n*                       COPY/MOVE TO ANOTHER VOLUME OF A CATALOGED\n*                       DATASET IS NOT ALLOWED\n         SPACE ,\n         TM    WAFLAG1,WAFWAPGM    HAVE WE AN AUTHORIZED PROGRAM NAME?\n         BZ    VOLCK20             NO, SKIP THIS CODE\n         SPACE ,\n*              BECAUSE THERE ARE ONLY FOUR NAMES TO COMPARE HERE,\n*              THE CODE ISN'T SET UP TO LOOP THROUGH THE LIST\n         SPACE ,\n         CLC   PGMPREF1,WAPGM      CHECK PROGRAM PREFIX\n         BER   R9                  IF FOUND EXIT THIS ROUTINE\n         SPACE ,\n         CLC   PGMPREF2,WAPGM      CHECK PROGRAM NAME\n         BER   R9                  IF FOUND EXIT THIS ROUTINE\n         SPACE ,\n         CLC   PGMPREF3,WAPGM      CHECK PROGRAM NAME\n         BER   R9                  IF FOUND EXIT THIS ROUTINE\n         SPACE ,\n         CLC   PGMLISTB,WAPGM      CHECK PROGRAM NAME FOR IEHMOVE\n         BER   R9                  IF FOUND EXIT THIS ROUTINE\nVOLCK20  DS    0H\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTION                  *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n*              CHECK HIGH-LEVEL INDEX.  ONLY \"WYL.\" DATASETS MUST\n*              UNDERGO THE CATALOG CHECK.\n         SPACE ,\n         L     R1,WADSNAME         ENSURE THAT R1 POINTS TO DSNAME\n         SPACE ,\n         CLC   HILINDEX,0(R1)      CHECK DSNAME HIGH-LEVEL INDEX\n         BNER  R9                  EXIT IF NOT OURS (\"WYL.\")\n         SPACE ,\n*              WYLBUR ACTIVE/QWIKFILE SAVES ARE EXCLUDED FROM THE\n*              CATALOGABILITY TEST BECAUSE WYLBUR MAY SAVE MULTIPLE\n*              SUCH DATASETS FOR A SINGLE USER ON DIFFERENT VOLUMES.\n         SPACE ,\n         TM    WAFLAGU,WAFWYLIO    IS OUR CALLER A WYLBUR I/O TASK?\n         BZ    VOLCK80             NO, SKIP \"ACTIVE\" COMPARES\n*                            BYTE: 01234567890123456\n         CLC   WYLACT,10(R1)       WYL.GG.UUU.ACTIVE ?\n         BER   R9                  YES, EXIT\n         CLC   WYLQWIK,10(R1)      WYL.GG.UUU.QWIK.?\n         BER   R9                  YES, EXIT\nVOLCK80  DS    0H\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              END OF INSTALLATION-DEPENDENT CODE                   *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n*              DATASET PASSES ALL TESTS.  SET THE FLAG (AT LAST)...\n         SPACE ,\n         OI    WAFLAG1,WAFCATCK    INDICATE DSNAME MUST BE CAT'ABLE\n         SPACE ,\n         BR    R9                  RETURN TO CALLING ROUTINE\n         SPACE 2\n*              PROGRAM NAME PREFIX LIST (LENGTHS DEFINE THE COMPARES)\n         SPACE ,\nPGMPREF1 DC    C'ARC'              DFHSM\nPGMPREF2 DC    C'ADR'              DFDSS\nPGMPREF3 DC    C'FDR'              FDRDSF ET. AL.\n         SPACE ,\n*              PROGRAM NAME LIST\n         SPACE ,\nPGMLISTA DC    CL8'ICKDSF'\nPGMLISTB DC    CL8'IEHMVESV'       PART OF IEHMOVE\n         SPACE ,\n*              SPECIAL DSNAMES\n         SPACE ,\nIEHMVDSN DC    C'&&&&TEMP.T'       THAT'S &&TEMP.T FOR IEHMOVE (IT'S\n*                                  FOLLOWED BY 7 NUMERICS, BUT THAT'S\n*                                  NOT CHECKED HERE)\nFDRABDSN DC    C'FDRABR.'          USED BY FDR/ABR...\n         SPACE 2\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTION                  *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n*              VOLUME PREFIX LIST\n         SPACE ,\n*              NOTE: THE LENGTH OF THE FIRST ENTRY DEFINES THE\n*                    COMPARE LENGTH; ALL PREFIXES IN THE TABLE\n*                    MUST BE THE SAME LENGTH.\n*\n*                    THE FLAG BITS INDICATE WHICH FUNCTIONS ARE\n*                    REQUIRED FOR THESE VOLUMES.\n*\n*                    WAFDSNCK: ON = ALL DSNAMES MUST MEET STANDARDS\n*                              OFF= ONLY \"WYL.\" DATASETS ARE CHECKED\n*\n*                    WAFCATCK: ON = ONLY \"WYL.\" DATASETS ARE CHECKED\n*                              OFF= NO DATASETS MUST BE CATALOGABLE\n*\n         SPACE ,\nVOLIST   DC    C'ACT',AL1(WAFDSNCK+WAFCATCK)\n         DC    C'ADA',AL1(WAFCATCK)\n         DC    C'CNY',AL1(WAFDSNCK+WAFCATCK)\n         DC    C'ILS',AL1(WAFCATCK)\n         DC    C'JES',AL1(WAFCATCK)\n         DC    C'MVS',AL1(WAFCATCK)\n         DC    C'PRD',AL1(WAFDSNCK+WAFCATCK)\n         DC    C'RES',AL1(WAFDSNCK+WAFCATCK)\n         DC    C'SCR',AL1(0)\n         DC    C'SYS',AL1(WAFCATCK)\n         DC    C'TMP',AL1(0)\n         DC    C'UCC',AL1(WAFDSNCK+WAFCATCK)\nVOLCOUNT EQU   (*-VOLIST)/(L'VOLIST+1)  COMPUTE NUMBER OF ENTRIES\n         SPACE 2\n*              HIGH-LEVEL INDEX FOR DSNAME COMPARE\n         SPACE ,\nHILINDEX DC    C'WYL.'\n         SPACE ,\n*              COMPARES FOR WYLBUR DATASET NAMES\n         SPACE ,\nWYLACT   DC    C'.ACTIVE '         ACTIVE FILE\nWYLQWIK  DC    C'.QWIK.'           QWIK FILE\n         SPACE ,\n*              ADDITIONAL CONSTANTS FOR SRVIM/SYS3./CNY CHECKS\n         SPACE ,\nSRVIM    DC    CL(L'PSCBUSER)'SRVIM'  SRVIM USERID\nSYS3     DC    C'SYS3.'            SYS3. HIGH LEVEL INDEX\nCNY      DC    C'CNY'              CNY VOLUME PREFIX\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              END OF INSTALLATION-DEPENDENT CODE                   *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         TITLE 'MODDSCB  - IGGPRE00 FORMAT 1 DSCB MODIFICATION ROUTINE'\n***********************************\n* MODDSCB  - F1 DSCB MODIFICATION *\n***********************************\n*\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTION                  *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n*\n*        THIS *ENTIRE* ROUTINE IS INSTALLATION-SPECIFIC.\n*\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTION                  *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n*\n*\n*        THIS ROUTINE ADDS CUNY INFORMATION TO THE FORMAT 1 DSCB.\n*\n*        CALLED FOR: ALLOCATION, EXTEND\n*\n*        DSCB FIELDS ADDED: CREATION TIME OF DATASET\n*\n*\n*        REGISTER USAGE:\n*           R0 = WORK\n*           R1 = WORK\n*           R7 = \"MODEL\" F1 DSCB AREA (FROM PARM, OR IN WORKAREA)\n*           R9 = RETURN ADDRESS\n*           R14 = WORK\n*           R15 = WORK\n*\n*        NOTE: CALLED FOR ALL DATASET TYPES, INCLUDING VSAM.\n*\n*        NOTE: IBM \"RESERVED\" FIELDS IN THE FORMAT 1 DSCB WHICH WERE\n*              FORMERLY USED BY CUNY ARE NO LONGER ZEROED WHEN A\n*              \"PARTIAL\" DSCB IS PASSED, AS IBM NOW ACTUALLY USES\n*              THOSE FIELDS FOR DF/SMS.\n*\n*\n*        SHORT DISSERTATION ON MODEL/PARTIAL/GDG DSCB POINTERS:\n*\n*              IBM IS VERY CONFUSING IN THE USE OF THE TERM\n*              \"MODEL DSCB\" HERE.  THERE ARE ACTUALLY THREE TYPES\n*              OF MODEL DSCBS BEING REFERRED TO:\n*\n*                1) THE GDG (USUALLY) MODEL DSCB.  THIS IS A DATASET\n*                   WHICH EXISTS ONLY TO PROVIDE DCB AND LABEL\n*                   CHARACTERISTICS FOR THE ALLOCATION OF OTHER\n*                   DATASETS (ESPECIALLY FOR A GDG, WHERE A MODEL\n*                   IS REQUIRED).  AS FAR AS ALLOCATION IS CONCERNED,\n*                   THOUGH, THIS IS JUST A NORMAL DATASET -- EXCEPT\n*                   THAT IT IS USUALLY ALLOCATED WITHOUT ANY SPACE.\n*\n*                2) THE \"PARTIAL\" DSCB.  THIS IS WHAT IS REFERRED TO\n*                   BY FLAG IEXMF1.  THIS IS A DSCB-FORMAT PARM PASSED\n*                   TO ALLOCATION (SVC 32) IN PLACE OF A JFCB (BIT 0\n*                   IN R0 IS SET TO INDICATE THIS), AND IS USED\n*                   PRIMARILY BY UTILITY PROGRAMS LIKE IEHMOVE.  IT IS\n*                   A CONFUSING MISNOMER TO CALL THIS A \"MODEL\" DSCB.\n*                   NOTE THAT THIS DSCB FORMAT IS ALSO PASSED WHEN\n*                   ALLOCATION IS INVOKED BY THE (NEW) \"REALLOC\" MACRO.\n*\n*                3) THE MODEL DSCB PASSED BACK TO ALLOCATION VIA\n*                   IEXFMT1.  THIS DSCB IS USED BY THIS EXIT TO\n*                   PRE-SET CERTAIN FIELDS IN THE REAL FORMAT 1\n*                   DSCB, AND IT DOES NOT EXIST OUTSIDE OF THIS\n*                   EXIT ENVIRONMENT.\n*\nMODDSCB  DS    0H\n         SPACE ,\n*              GET POSSIBLE DSCB POINTER\n         SPACE ,\n         L     R7,IEXFMT1      POINTER TO F1 DSCB 96 BYTE\n         USING DS1FMTID,R7          DATA AREA\n         SPACE ,\n*              TEST IF THIS ENTRY WAS PASSED A PARTIAL (MODEL) DSCB.\n*              NOTE THAT THERE IS NO JFCB AVAILABLE IN THIS CASE.\n*\n*              CODE HERE TO CLEAR \"OLD\" CUNY FIELDS WAS REMOVED, AS\n*              THOSE FIELDS ARE NOW ACTUALLY BEING USED BY DFSMS.\n         SPACE ,\n         TM    IEXFLAG,IEXMF1    IF ON, IEXFMT1 -> PARTIAL F1 DSCB.\n         BO    MODDSCB3            SKIP CODE FOR *NO* PARTIAL DSCB\n         SPACE ,\n*              SINCE WE WERE *NOT* PASSED A PARTIAL DSCB, WE MUST\n*              USE THE AREA AT WA1FMODL AND PASS IT BACK TO THE\n*              ALLOCATE/EXTEND FUNCTION.  (IF A PARTIAL DSCB *WAS*\n*              PASSED, THE CREATION TIME IS ADDED TO IT.)\n         SPACE ,\n         LA    R7,WAF1MODL     ADDRESS OF WORK AREA\n         ST    R7,IEXFMT1      STORE IT IN PARAMETER LIST\n*                              AS MODEL DSCB POINTER\n*                              NOTE THAT WORKAREA IS ALREADY ZEROED.\n         SPACE ,\nMODDSCB3 DS    0H\n         SPACE ,\n*              SAVE THE TIME OF CREATION IN THE DSCB\n         SPACE ,\n*              NOTE THAT THE CREATION DATE FOR A NEW DATASET WILL NOW\n*              REPRESENT TODAY'S DATE -- AS PER APAR OY44612 WHICH\n*              WAS FIXED IN HBB4430.  (SPECIAL CODE USED TO BE HERE\n*              TO DEAL WITH THAT SITUATION.)\n         SPACE ,\n         TIME  BIN                 GET THE TIME (IN BINARY) AND DATE\n         SPACE ,\n*              SAVE THE TIME IN AN UNUSED FIELD IN THE DSCB1.  THIS\n*              IS USED ONLY BY WYLCLEAN, TO DETERMINE THE AGE OF A\n*              DATASET.\n         SPACE ,\n         STCM  R0,B'0110',DSCB1+X'67'  YES, SAVE THE CURRENT TIME\n*                                  NOTE THAT THE HI-ORDER BYTE\n*                                  IS ALWAYS ZERO AND IS NOT SAVED.\n         SPACE ,\n         BR    R9                  RETURN TO CALLER\n         DROP  R7\n         TITLE 'INITPPWA - IGGPRE00 WORKAREA INITIALIZATION'\n**************************************\n* INITPPWA - WORKAREA INITIALIZATION *\n**************************************\n*\n*        THIS ROUTINE GETMAINS AND CLEARS THE WORKAREA, INSERTS THE\n*        EYECATCHER, AND CAN PERFORM ANY INSTALLATION-DEPENDENT SETUP.\n*\n*        THE WORKAREA ADDRESS IS RETURNED IN R5 AND STORED IN THE\n*        INSTALLATION EXIT RESERVED WORD IN THE EXIT PARM LIST.\n*        AT IGGPOST0 TIME IT WILL BE RETRIEVED FROM THERE TO BE FREED.\n*\n*        REGISTER USAGE:\n*           R0 = WORK\n*           R1 = WORK\n*           R5 = WORKAREA ADDRESS\n*           R9 = RETURN ADDRESS\n*           R11 = EXIT PARAMETER LIST (IECIEXPL)\n*           R13 = SAVE AREA POINTER\n*           R14 = WORK\n*           R15 = WORK\n*\nINITPPWA DS    0H\n         SPACE ,\n         GETMAIN RU,LV=WAEND-PPWA,SP=230,LOC=ANY  DO THE GETMAIN\n         SPACE ,\n         LR    R5,R1               SAVE THE AREA ADDRESS\n         SPACE ,\n*              SET UP TO CLEAR THE WORKAREA VIA MVCL\n         SPACE ,\n         LR    R0,R1               SET MOVE-TO ADDRESS\n         LA    R1,WAEND-PPWA        AND LENGTH\n         LA    R14,*               MOVE-FROM ADDRESS (ARBITRARY)\n         SR    R15,R15              PAD IS 00, LENGTH IS ZERO\n         SPACE ,\n         MVCL  R0,R14              CLEAR THE WORKAREA\n         SPACE ,\n         MVC   WAEBCDIC,CONSPPWA   SET UP EYECATCHER\n         ST    R5,IEXRSVWD         SAVE ADDRESS FOR IGGPOST0 TO FIND\n         SPACE ,\n*              CHAIN THE SAVE AREAS\n         SPACE ,\n         ST    R13,SAVEAREA+4      SAVE CALLER'S SAVE AREA POINTER\n         LA    R1,SAVEAREA         ADDRESS OUR SAVE AREA\n         ST    R1,8(,R13)          CHAIN OUR SAVE AREA TO CALLER'S\n         LR    R13,R1              AND ADDRESS OUR SAVE AREA VIA R13\n         SPACE ,\n*              SAVE THE PREPL ADDRESS.  IT'S USED BY THE ESTAE EXIT\n*              TO COPY THE ENTIRE PARAMETER LIST TO THE SDWA (VRA).\n         SPACE ,\n         ST    R11,WAPREPL         SAVE THE PREPL ADDRESS\n         SPACE ,\n*              COPY THE VOLUME NAME TO THE WORK AREA\n         SPACE ,\n         L     R1,IEXUCB           @ UCB, FROM EXIT PARM LIST\n         USING UCBOB,R1\n         MVC   WAUCBVOL,UCBVOLI    COPY VOLUME NAME\n         DROP  R1\n         SPACE ,\n*              DETERMINE IF THIS IS OUR SPECIAL INITIALIZATION\n*              CALL (FROM A \"SUBSYSTEM\" INITIALIZATION ROUTINE).\n*              THIS IS THE CASE IF THE FUNCTION IS ALLOCATE (THAT'S\n*              TESTED IN ROUTINE PREALL), THE CALLING ASID IS 1,\n*              AND THE DSNAME MATCHES INITDSN.\n*\n*              IF SO, SET A FLAG.  THE REQUIRED USERCAT WILL THEN\n*              BE ALLOCATED (VIA A SUPERLOCATE WITHOUT CTGDOCAT SET)\n*              TO THE CALLER (*MASTER*) AND ITS ACB ADDRESS SAVED.\n         SPACE ,\n         L     R1,PSAAOLD          GET @ CURRENT ASCB\n         USING ASCB,R1\n         CLC   ASCBASID,MASTERAS   IS IT *MASTER*?\n         BNE   PPINNORM            NO, IT'S NOT US\n         DROP  R1\n         L     R1,IEXDSN           GET @ DSNAME BEING ALLOCATED\n*              NOTE THAT DADSM ALLOCATION'S DUPLICATE-DSNAME CHECK\n*              IS DONE *AFTER* THIS EXIT IS CALLED.\n         CLC   INITDSN,0(R1)       IS IT OUR SPECIAL NAME?\n         BNE   PPINNORM            NO, IT'S NOT US\n         SPACE ,\n*              SPECIAL INITIALIZATION CALL WAS DETECTED.  SET FLAG.\n         SPACE ,\n         OI    WAFLAG2,WAFINIT     SET \"SPECIAL INITIALIZATION\" FLAG\n         SPACE ,\nPPINNORM DS    0H\n         SPACE ,\n*              INITIALIZE THE PARAMETER AREAS FOR THE RACROUTE CALL\n         SPACE ,\n         MVC   RACPROUT(L'RACROUTL),RACROUT  MOVE RACROUTE SKELETON\n         MVC   RACPPROF,RACPROF    MOVE THE PROFILE NAME SKELETON\n         MVC   RACPVOL(L'WAUCBVOL),WAUCBVOL  AND FILL IN THE VOLSER\n         SPACE ,\nPPINEXIT BR    R9                  RETURN TO CALLER\n         TITLE 'ENQCHECK - IGGPRE00/POST0 SYSZTIOT ENQ INIT AND CHECK'\n****************************************************\n* ENQCHECK - SYSZTIOT ENQ INITIALIZATION AND CHECK *\n****************************************************\n*\n*        THIS ROUTINE SETS UP THE SYSZTIOT ENQUEUE PARAMETER RNAME\n*        AND ISSUES THE ENQ SVC TO CHECK IF THE SYSZTIOT RESOURCE\n*        IS HELD.  IT'S CALLED ON ENTRY TO IGGPRE00; IF ANY PROCESSING\n*        WERE DONE IN IGGPOST0 IT WOULD ALSO BE CALLED THEN (SINCE\n*        THE ENQ STATUS MIGHT HAVE CHANGED SINCE IGGPRE00).\n*\n*        REGISTER USAGE:\n*           R1 = WORK\n*           R9 = RETURN ADDRESS\n*           R14 = WORK\n*           R15 = WORK/SVC RETURN CODE\n*\nENQCHECK DS    0H\n         SPACE ,\n*              INITIALIZE THE SYSZTIOT RNAME FIELDS (ASID, DSAB)\n         SPACE ,\n         L     R1,PSAAOLD           @ CURRENT ASCB\n         USING ASCB,R1\n         MVC   WARNASID,ASCBASID    COPY ASID FOR RNAME\n         SPACE ,\n         L     R1,PSATOLD           @ CURRENT TCB\n         USING TCB,R1\n         L     R1,TCBJSCB           @ JSCB\n         USING IEZJSCB,R1\n*              NOTE THAT THE DSAB ADDRESS WE NEED IS FROM THE\n*              *CURRENT* JSCB, NOT THE ACTIVE JSCB\n         SPACE ,\n         MVC   WARNDSAB,JSCDSABQ    COPY @ QDB FOR DSAB CHAIN\n         DROP  R1\n         SPACE ,\n*              RNAME IS NOW CONSTRUCTED (ASID+DSAB).  TRY THE ENQUEUE.\n         SPACE ,\n         NI    WAFLAG1,255-WAFZTIOT  ENSURE FLAG IS RESET\n         SPACE ,\n         MVC   WAENQ(TIOTENQE-TIOTENQ),TIOTENQ  COPY THE MF=L PARM LIST\n         SPACE ,\n         ENQ   (,WARNAME,,,),,MF=(E,WAENQ)  SEE IF RESOURCE IS AVAIL\n         SPACE ,\n         LTR   R15,R15              RETURN CODE: R15=0 MEANS AVAILABLE\n         BZR   R9                   RETURN IF WE DON'T OWN SYSZTIOT\n         CLI   3(R15),8             ELSE TEST SPECIFIC RETURN CODE\n*              CODE OF 8 MEANS THIS TASK ALREADY OWNS THE RESOURCE\n         BNER  R9                   NOT 8, WE DON'T OWN TIOT, RETURN\n         OI    WAFLAG1,WAFZTIOT     IS 8, SET FLAG: TIOT ENQ IS HELD\n         BR    R9                    AND RETURN TO CALLER\n         TITLE 'FINDSIOT - IGGPRE00/POST0 SCAN DSAB CHAIN, FIND SIOT'\n**********************************************\n* FINDSIOT - SCAN DSAB CHAIN AND LOCATE SIOT *\n**********************************************\n*\n*        THIS ROUTINE SCANS THE DSCB CHAIN AND LOCATES THE SIOT\n*        ENTRY THAT CORRESPONDS TO THE JFCB ADDRESSED BY IEXPTR1.\n*        THE SIOT'S ADDRESS IS SAVED IN WASIOTAD.\n*\n*        THIS ROUTINE FUNCTIONS ONLY FOR ALLOCATE, EXTEND, AND PARTIAL\n*        RELEASE, AS ONLY THOSE ENTRIES PASS A JFCB ADDRESS.  IT ALSO\n*        WILL NOT FUNCTION WHEN A MODEL DSCB IS PASSED, AS THE JFCB\n*        ADDRESS IS NOT AVAILABLE IN THAT CASE.\n*\n*        THIS CODE DEPENDS ON \"WASIOTAD\" BEING ZERO ON ENTRY (AS IT\n*        DOESN'T ZERO IT ITSELF).  THE INITPPWA ROUTINE DOES CLEAR\n*        IT (AS PART OF THE GETMAINED WORKAREA).\n*\n*        NOTE THAT THIS ROUTINE LOCATES THE SIOT THROUGH THE\n*        JSCB -> QDB -> DSAB -> SIOT CHAIN; ALTERNATIVELY THE\n*        JSCB -> JCT -> SCT -> SIOT CHAIN COULD BE USED, BUT\n*        THAT WOULD NECESSITATE USING A SERIES OF SWAREQ CALLS.\n*        (ONE SWAREQ CALL MAY BE NEEDED ANYWAY; SEE BELOW.)\n*\n*        NOTE THAT THE JFCB POINTED TO BY IEXPTR1 IS NOW A *COPY*\n*        OF THE REAL JFCB, SO THE TEST AFTER LABEL \"GOODSIOT\"\n*        WILL PROBABLY NOT MATCH ITS ADDRESS.  ANOTHER TEST WILL\n*        NOW COMPARE THE CONTENTS OF THE JFCBS AND ASSUME THAT\n*        IF THEY'RE IDENTICAL THEN THEY ARE THE SAME JFCB; THIS\n*        MAY NOT BE 100% VALID BUT IS SUFFICIENTLY VALID FOR THE\n*        SITUATIONS WE ARE CONCERNED WITH HERE (NEW DATASET BEING\n*        ALLOCATED ON PUBLIC OR STORAGE VOLUME).\n*\n*\n*        REGISTER USAGE:\n*           R0 = WORK (SWAREQ MACRO)\n*           R1 = WORK (SWAREQ MACRO)\n*           R6 = WORK\n*           R9 = RETURN ADDRESS\n*           R14 = SIOT ADDRESS, WORK (SWAREQ MACRO)\n*           R15 = WORK (SWAREQ MACRO)\n*\nFINDSIOT DS    0H\n         SPACE ,\n*              VERIFY THAT THIS IS A VALID ENTRY CONDITION\n         SPACE ,\n         TM    IEXFLAG,IEXMF1      ALLOCATE/MODEL DSCB POINTER?\n         BOR   R9                   YES, EXIT/NO JFCB ADDRESS AVAIL.\n         CLI   IEXFUNC,IEXALL      ALLOCATE?\n         BE    SCANSIOT             YES, CONTINUE\n         CLI   IEXFUNC,IEXEXT      EXTEND?\n         BE    SCANSIOT             YES, CONTINUE\n         CLI   IEXFUNC,IEXPR       PARTIAL RELEASE?\n         BE    SCANSIOT             YES, CONTINUE\n         BR    R9                  NO, EXIT\n         SPACE ,\n*              LOCATE AND SCAN THE DSAB CHAIN\n         SPACE ,\nSCANSIOT L     R6,PSATOLD          @ CURRENT TCB\n         USING TCB,R6\n         ICM   R6,B'1111',TCBJSCB  @ JSCB\n         BZR   R9                  ENSURE JSCB EXISTS\n         USING IEZJSCB,R6\n*              NOTE THAT THE DSAB ADDRESS WE NEED IS FROM THE\n*              ACTIVE JSCB, NOT THE CURRENT JSCB\n         SPACE ,\n         ICM   R6,B'1111',JSCBACT  @ ACTIVE JSCB\n         BZR   R9                  ENSURE JSCB EXISTS\n         SPACE ,\n         ICM   R6,B'1111',JSCDSABQ @ QDB FOR DSAB CHAIN\n         BZR   R9                  EXIT IF NOT\n         USING QDB,R6\n         CLC   QDBQDB,CHARDSAB     VERIFY EYE-CATCHER ('DSAB')\n         BNER  R9                  EXIT IF NOT CORRECT\n         SPACE ,\n         ICM   R6,B'1111',QDBFELMP  @ FIRST DSAB\n         BZR   R9                  ENSURE DSAB EXISTS\n         USING DSAB,R6\n         SPACE ,\nCHEKDSAB CLC   DSABID,CHARDSAB     VERIFY EYE-CATCHER ('DSAB')\n         BNER  R9                  EXIT IF NOT CORRECT\n         SPACE ,\n         ICM   R14,B'1111',DSABSIOT  @ SIOT\n         BNZ   GOODSIOT            HAVE ADDRESS, BRANCH\n         SPACE ,\n*              THE \"IN-STORAGE\" SIOT ADDRESS IN THE DSAB MAY BE\n*              ZERO, IN WHICH CASE WE NEED TO USE THE SWAREQ\n*              SERVICE TO GET THE SIOT'S REAL ADDRESS.\n*\n*              THE SWAREQ USES THE \"UNAUTHORIZED\" CALL; OTHERWISE,\n*              AN 0B0-0C ABEND OCCURS IN SEVERAL SITUATIONS (FOR\n*              EXAMPLE, UNDER DYNAMIC ALLOCATION, OR FOR A CATALOG\n*              THAT'S BEING ALLOCATED, FOR A \"GDG-ALL\" REQUEST,\n*              OR FOR A MULTI-VOLUME VSAM DATASET).  SOME, BUT NOT\n*              ALL, OF THESE SITUATIONS CAN BE BYPASSED BY TESTING\n*              FLAGS IN THE DSAB, BUT THERE WAS STILL AN EXPOSURE.\n         SPACE ,\n         LA    R15,EPA             INITIALIZE THE EPA POINTER\n         ST    R15,SWEPAPTR        FOR THE SWAREQ CALL\n         XC    EPA,EPA             INITIALIZE THE AREA\n         MVC   SWVA-SWAEPA+EPA,DSABSSVA  COPY SIOT SVA (BLOCK TOKEN)\n*                                  SWAREQ DESTROYS R0, R1, AND R14-R15\n         SWAREQ FCODE=RL,EPA=SWEPAPTR,UNAUTH=YES,MF=(E,SWAPARMS)  SIOT?\n         LTR   R15,R15             CHECK IF SWAREQ SUCCEEDED\n         BNZ   NEXTDSAB            IF NOT, SKIP THIS DSAB\n         SPACE ,\n         L     R14,SWBLKPTR-SWAEPA+EPA  @ SIOT (MAY BE ABOVE THE LINE)\n         SPACE ,\n         USING SIOT,R14\nGOODSIOT CLI   SIOTTYPE,SIOTID     VERIFY SIOT ID (03)\n         BNER  R9                  EXIT IF NOT CORRECT\n         SPACE ,\n*              FOUND AN SIOT.  SEE IF ITS JFCB POINTER MATCHES THE\n*              ADDRESS OF THE JFCB WE WERE PASSED IN THE PARM LIST.\n         SPACE ,\n         CLC   SJFCBPTR,IEXPTR1    SEE IF IT MATCHES\n         BE    GOTSIOT             YES, SAVE THE ADDRESS\n         SPACE ,\n*              IF THE JFCB ADDRESSES DO NOT MATCH, THEN WE'LL COMPARE\n*              THE CONTENTS OF THE TWO JFCBS.  IF THE CONTENT IS THE\n*              SAME, WE'LL ASSUME THEY ARE THE SAME JFCB AFTER ALL.\n         SPACE ,\n         ICM   R1,B'1111',SJFCBPTR  ADDRESS JFCB POINTED TO BY SIOT\n         BZ    NEXTDSAB            (IF NONE, DON'T COMPARE IT)\n         ICM   R15,B'1111',IEXPTR1  ADDRESS THE PARM-LIST JFCB\n         BZ    NEXTDSAB            (IF NONE, DON'T COMPARE IT)\n         CLC   0(JFCBEND-JFCB,R1),0(R15)  COMPARE 'EM\n         BE    GOTSIOT             GOT IT??  SAVE ADDRESS IF SO\n         SPACE ,\nNEXTDSAB ICM   R6,B'1111',DSABFCHN  NO MATCH, CHAIN TO NEXT DSAB\n         BNZ   CHEKDSAB            CHECK IT IF ONE EXISTS\n         BR    R9                  EXIT IF NOT\n         SPACE ,\n*              THE MATCHING SIOT WAS FOUND.  SAVE ITS ADDRESS IN\n*              WASIOTAD FOR LATER USE.\n         SPACE ,\nGOTSIOT  ST    R14,WASIOTAD        SAVE IT THERE\n         BR    R9                  AND RETURN TO THE CALLER\n         SPACE ,\n         DROP  R6,R14\n         LTORG ,                   SWAREQ MF=E GENERATES A LITERAL\n         TITLE 'AUTHCHK  - IGGPRE00 PROGRAM AUTHORIZATION CHECK'\n*****************************************************************\n* AUTHCHK  - AUTHORIZATION CHECK AND PROGRAM NAME DETERMINATION *\n*****************************************************************\n*\n*        THIS ROUTINE DETERMINES IF THE CALLING TASK IS AUTHORIZED\n*        AND, IF SO, SAVES THE PROGRAM NAME FROM THE MOST RECENT\n*        PRB FOUND ON THE RB CHAIN.  A TEST IS ALSO MADE TO DETERMINE\n*        IF THE INITIATOR WAS THE CALLER OF THE DADSM FUNCTION.\n*\n*        NOTE THAT IT'S NOT MEANINGFUL TO SAVE THE PROGRAM NAME\n*        IF IT ISN'T AUTHORIZED, SINCE THERE'S NO CONTROL OVER\n*        THE NAMING OF UNAUTHORIZED PROGRAMS.\n*\n*        REGISTER USAGE:\n*           R0 = WORK\n*           R1 = WORK\n*           R9 = RETURN ADDRESS\n*           R15 = SVC RETURN CODE\n*\nAUTHCHK  DS    0H\n         SPACE ,\n*              DETERMINE IF THE TASK IS AUTHORIZED\n         SPACE ,\n         NI    WAFLAG1,255-WAFAUTH-WAFWAPGM  PRESET FLAG: UNAUTHORIZED;\n*                                  NO PROGRAM NAME FOUND\n         TESTAUTH FCTN=1,STATE=YES,KEY=YES,RBLEVEL=1  ANY THESE TRUE?\n         LTR   R15,R15             WELL??\n         BNZR  R9                  EXIT IF TASK NOT AUTHORIZED\n         SPACE ,\n*              TASK IS AUTHORIZED.  FIND THE CALLING PROGRAM NAME.\n         SPACE ,\n         OI    WAFLAG1,WAFAUTH     SET FLAG, CALLER IS AUTHORIZED\n         L     R1,PSATOLD          @ CURRENT TCB\n         USING TCB,R1\n         L     R1,TCBRBP           @ CURRENT RB\n         USING RBBASIC,R1\n         SPACE ,\n*              THIS LOGIC FOLLOWS THE RB CHAIN BACK FROM THE CURRENT\n*              RB (WHICH SHOULD BE AN SVRB) UNTIL EITHER\n*               - A PRB IS FOUND, AND WE SAVE THE PROGRAM NAME, IF\n*                 ONE IS PRESENT, OR\n*               - THE LAST RB IS FOUND, AND WE GIVE UP\n         SPACE ,\nLOOPRB   MVC   WAWORK1(1),RBSTAB1  SET UP TO TEST RB TYPE\n         NI    WAWORK1,RBFTP       REMOVE EXTRANEOUS BITS\n         CLI   WAWORK1,RBFTPRB     COMPARE FOR PRB\n         BE    GOTPRB              BRANCH IF IT IS ONE; ELSE\nNOTPRB   TM    RBSTAB2,RBTCBNXT    IS TCB NEXT IN CHAIN (VIA RBLINK)?\n         BO    NOPRB               IF SO THERE'S NO PRB HERE\n         L     R1,RBLINK           ELSE GET THE PRIOR RB\n         B     LOOPRB              AND TEST IT\n         SPACE ,\n*              FOUND A PRB.  IF THE CDE ADDRESS (RBCDE1) IS ZERO THEN\n*              DO NOT USE IT; IF FLAG \"RBCDSYNC\" IS SET TO INDICATE\n*              THAT THIS CDE REPRESENTS A SYNCH SVC, THEN CONTINUE\n*              SEARCHING FOR THE ORIGINAL PRB.  NOTE THAT R15'S HIGH-\n*              ORDER BYTE IS ALREADY ZERO FROM THE TESTAUTH SVC ABOVE.\n         SPACE ,\nGOTPRB   ICM   R15,B'0111',RBCDE1  FOUND PRB, GET @ CDE\n         BNZ   GOTPRB1             @ CDE IS NON-ZERO, BRANCH\n         TM    RBCDFLGS,RBCDSYNC   WAS THIS PRB FOR A SYNCH SVC?\n         BO    NOTPRB              IF SO, CONTINUE SEARCHING\n         B     NOPRB               IF NOT, GIVE UP\n         USING CDENTRY,R15\nGOTPRB1  MVC   WAPGM,CDNAME        COPY PROGRAM NAME\n         OI    WAFLAG1,WAFWAPGM    SHOW WE'VE GOT IT\n         DROP  R15\n         SPACE ,\n*              SET A FLAG IF OUR CALLER IS THE INITIATOR (IEFIIC)\n         SPACE ,\n         CLC   WAPGM,INITNAME      WELL, IS IT?\n         BNE   NOTINIT             BIF NOT\n         OI    WAFLAG2,WAFIIC      ELSE SET DA FLAG\nNOTINIT  DS    0H\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTION                  *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\n*              SET A FLAG (FOR LATER) IF THIS IS A WYLBUR I/O TASK\n         SPACE ,\n         CLC   WYLPATH,WAPGM       IS THIS PROGRAM A WYLBUR SUBTASK?\n         BNE   NOTAWYL             NO, NOT WHAT WE WANT\n         OI    WAFLAGU,WAFWYLIO    YES, SET THE FLAG\nNOTAWYL  DS    0H\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              END OF INSTALLATION-DEPENDENT CODE                   *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\nNOPRB    BR    R9                  RETURN TO CALLER\n         TITLE '           CONSTANT VALUES'\n*          *************\n*          * CONSTANTS *\n*          *************\n         SPACE 2\nSYSZTIOT DC    CL8'SYSZTIOT'       RNAME FOR TIOT ENQ (RET=TEST)\n         SPACE ,\nSYSZPCCB DC    CL8'SYSZPCCB'       RNAME FOR PCCB ENQ\n         SPACE ,\nQNPCCB   DC    C'PCCB'             QNAME FOR PCCB ENQ\n         SPACE ,\nCONSPPWA DC    C'PPWA'             TO INITIALIZE WAEBCDIC\n         SPACE ,\nBASEADDR DC    A(IGGPRE00)         MODULE BASE (USED FOR POST0 ENTRY)\n         SPACE ,\nINITNAME DC    CL8'IEFIIC'         NAME OF INITIATOR\n         SPACE ,\nMASTERAS DC    H'1'                ASID NUMBER OF *MASTER* ASID\n         SPACE ,\nBLANKS   DC    CL8' '              A BUNCHA BLANKS\n         SPACE ,\nCHARDSAB DC    C'DSAB'             EYE-CATCHER IN DSAB\n         SPACE ,\nFAKEDDN  DC    CL8'*IGGPRE*'       NON-BLANK DDNAME TO STUFF IN PCCB\n         SPACE ,\nINITDSN  DC    CL(L'JFCBDSNM)'SYS1.EARTHMAN TO IBM: CALL 1-800-IGG-PRE0*\n               0'                  STRANGE DSNAME INDICATING INIT CALL\n         SPACE ,\n*              MODEL ENQ PARAMETER LISTS (SINCE MF=E WON'T CREATE THEM)\n         SPACE ,\nTIOTENQ  ENQ   (SYSZTIOT,*-*,E,6,SYSTEM),RET=TEST,MF=L  SYSZTIOT ENQ\nTIOTENQE EQU   *\n         SPACE ,\nPCCBENQ  ENQ   (SYSZPCCB,QNPCCB,E,4,STEP),MF=L  SYSZPCCB ENQ/DEQ\nPCCBENQE EQU   *\n         SPACE ,\n*              RACROUTE PARAMETERS AND SKELETON\n         SPACE ,\nRACLASS  DC    AL1(L'RACLASSN)     CLASS NAME LENGTH FOR RACROUTE\nRACLASSN DC    C'FACILITY'         CLASS NAME FOR RACROUTE\nRACPROF  DC    CL39'$DASDI.'       PROFILE NAME (VOLSER TO BE ADDED)\n         SPACE ,\nRACROUT  RACROUTE REQUEST=AUTH,WORKA=*-*,MF=L\nRACROUTL EQU   RACROUT,*-RACROUT   LENGTH OF GENERATED RACROUTE AREA\n         SPACE ,\nZERO     DC    F'0'                FULLWORD CONSTANT ZERO\n         SPACE ,\nEIGHT    DC    F'8'                FULLWORD CONSTANT EIGHT\n         SPACE ,\nHONE     DC    H'1'                HALFWORD CONSTANT 1\n         SPACE ,\nHEIGHT   DC    H'8'                HALFWORD CONSTANT 8\n         SPACE ,\n*              REASON CODES (FOR IEXREASN)\n         SPACE ,\nREASON1  DC    H'1'                REASON CODE 1\nREASON2  DC    H'2'                REASON CODE 2\nREASON3  DC    H'3'                REASON CODE 3\nREASON4  DC    H'4'                REASON CODE 4\nREASONI1 DC    H'901'              REASON CODE 901 (INITIALIZATION)\nREASONI2 DC    H'902'              REASON CODE 902 (INITIALIZATION)\n         SPACE ,\nHEXLATE  DC    C'0123456789ABCDEF'   TO HEX\n         SPACE ,\n*              MESSAGE PIECES FOR WTP MESSAGES CNY651I/652I/654I/655I\n         SPACE ,\nCON651P1 DC    C'CNY651I '\nCON652P1 DC    C'CNY652I '\nCON654P1 DC    C'CNY654I '\nCON655P1 DC    C'CNY655I '\nCON65ALL DC    C'ALLOCATE'\nCON65REN DC    CL(L'CON65ALL)'  RENAME'\nCON65EXT DC    CL(L'CON65ALL)'  EXTEND'\nCON65P2  DC    C' REQUEST DENIED, '\nCON651P3 DC    C'DATASET NAME IS ALREADY CATALOGED ON '\nCON651P5 DC    C':'\nCON652P3 DC    C'DSNAME DOES NOT CONFORM TO CUNY STANDARDS:'\nCON654P3 DC    C'REQUIRED GDG BASE IS NOT CATALOGED:'\nCON655P3 DC    C'NO RACF AUTHORITY TO CREATE DATASETS ON THIS VOLUME:'\n         SPACE ,\n*              MCS PREFIXES FOLLOW:\nCON651   DC    AL2(4+L'CON651P1+L'CON65ALL+L'CON65P2+L'CON651P3+L'CTGVL*\n               VOL+L'CON651P5,32768)\nCON652   DC    AL2(4+L'CON652P1+L'CON65ALL+L'CON65P2+L'CON652P3,32768)\nCON654   DC    AL2(4+L'CON654P1+L'CON65ALL+L'CON65P2+L'CON654P3,32768)\nCON655   DC    AL2(4+L'CON655P1+L'CON65ALL+L'CON65P2+L'CON655P3,32768)\nMCS65    DC    X'10000020'         DESC=(4),ROUTCDE=(11)\n         SPACE ,\nCON653P1 DC    C'CNY653I  VOLUME='  (FOLLOWED BY 6-BYTE VOLUME)\nCON653P2 DC    C', DSNAME='        (FOLLOWED BY 44-BYTE VOLUME)\n         SPACE ,\nCON653   DC    AL2(4+L'CON653P1+L'WAUCBVOL+L'CON653P2+L'JFCBDSNM,32768)\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTION                  *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\nWYLPATH  DC    C'WYPATH'           WYLBUR SUBTASK PROGRAM PREFIX\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              END OF INSTALLATION-DEPENDENT CODE                   *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\nNAMIEXPL DC    C'IECIEXPL'         MACRO NAME FOR PREPL, FOR SDWA VRA\n         SPACE ,\n*              TITLE FOR SDUMP\n         SPACE ,\nCONDTITL DC    AL1(TITLEND-*-1)\nTITLE1   DC    C'PRE/POST'    <--  REPLACED BY CSECT NAME (IF SDWA...)\n         DC    C' ABEND DUMP, SYSTEM CODE='\nTITLE2   DC    C'XXX'         <--  ABEND CODE GOES HERE\n         DC    C' FOR JOB='\nTITLE3   DC    C'*UNKNOWN'\nTITLEND  EQU   *\n         SPACE ,\n*              MODULE/CSECT/FRR NAMES (FOR RECPARM)\n         SPACE ,\nCONPRE00 DC    CL8'IGGPRE00'       MODULE & CSECT NAME\nCONPOST0 DC    CL8'IGGPOST0'       ALT CSECT NAME\nCONESTAE DC    CL8'ESTAEXIT'       FRR NAME\n         SPACE ,\n*              WTO MESSAGE (CNY659I) TO ALERT (?) OPERATORS ON ABEND\n         SPACE\nCON659   DC    AL2(CON659E-*,32768)\n         DC    C'CNY659I DADSM EXIT HAS ABENDED, '\n         DC    C'SYSTEM CODE='\nCON659CD DC    C'XXX'\n         DC    C', JOB='\nCON659JB DC    C'*UNKNOWN'\nCON659E  EQU   *\n         DC    X'00204040'         DESC=(11),ROUTCDE=(2,10)\nCON659EE EQU   *\n         TITLE 'ESTAEXIT - IGGPRE00/POST0 ESTAE EXIT'\n***************************\n* ESTAEXIT - ESTAE EXIT   *\n***************************\n*\n*        THE ESTAE EXIT PERFORMS THE FOLLOWING FUNCTIONS:\n*\n*        1) CHECK IF AN SDWA IS PRESENT; VALIDATE THE PREPOST WORKAREA.\n*        2) ISSUE AN OPERATOR MESSAGE GIVING THE COMPLETION CODE.\n*        3) TAKE AN SDUMP.\n*        4) RETURN TO RTM, REQUESTING LOGREC RECORDING.\n*\n*\n*        NOTE THAT THE ESTAE EXIT FOLLOWS THE MODULE CONSTANTS,\n*        TO PROVIDE FOR ADDITIONAL ADDRESSABILITY (THIS IS NO LONGER\n*        NECESSARY, HOWEVER, AS WE'VE ADDED A 2ND BASE REGISTER FOR\n*        THE ENTIRE MODULE).\n*\n*\n*        REGISTER USAGE:\n*           R1 = COMPLETION CODE, WORK\n*           R2, R3 = IGGPRE00 BASE\n*           R5 = PPWA\n*           R6 = SDWA, OR 0 IF NO SDWA SUPPLIED\n*           R7 = RETURN ADDRESS (R14 SAVE) IF NO SDWA PRESENT\n*           R8 = ADDRESS OF ACTIVE JSCB\n*           R9 = PCCB ADDRESS\n*           R10 = GORILLA ADDRESS\n*           R14 = WORK\n*\nESTAEXIT DS    0H\n         SPACE ,\n         PUSH  USING\n         DROP  ,                   ENSURE NO BASE REGS ARE ASSUMED\n         USING ESTAEXIT,R15\n         SPACE\n*              CHECK FOR SDWA FOR REGISTER SAVE.  SET UP BASE REGISTER.\n         SPACE\n         C     R0,CONS12           IS THERE AN SDWA?\n         BE    NOSDWA              BIF NOT, DO ALTERNATE INITIALIZATION\n         STM   R14,R12,12(R13)     SAVE THE REGISTERS\n         SPACE ,\n*              SET UP THE NORMAL BASE REGISTERS FOR IGGPRE00.\n         SPACE ,\n         L     R2,BASEREST         GET BACK A GOOD VALUE\n         USING IGGPRE00,R2         REINSTATE GLOBAL BASE\n         LA    R3,IGGPRE00+4095    REINSTATE OUR 2ND GLOBAL BASE TOO\n         USING IGGPRE00+4095,R3\n         DROP  R15                 DON'T NEED THIS ANYMORE\n         SPACE\n*              LOAD THE REGISTERS FROM THE SDWA.\n         SPACE\n         LR    R6,R1               COPY SDWA ADDRESS\n         USING SDWA,R6\n         SPACE\n*              LOAD ABEND COMPLETION CODE FROM SDWA.\n         SPACE\n         L     R1,SDWAABCC         ALSO LOAD ABEND COMPLETION CODE\n         SPACE\n*              CHECK IF THE USER PARAMETER AREA (PPWA) ADDRESS\n*              IS AVAILABLE.\n         SPACE\n         L     R5,SDWAPARM         GET ITS ADDRESS\n         LTR   R5,R5               IS IT SUPPLIED?\n         BZ    GONOPARM            NO, GO CONTINUE THE ABEND\n         USING PPWA,R5             YES, IT'S THERE\n         B     ESTACONT            GO CONTINUE ANALYSIS\n         SPACE ,\n*              THE FOLLOWING CONSTANTS ARE NEEDED HERE TO SET UP\n*              ADDRESSABILITY TO THE REST OF THE MODULE AND/OR\n*              BEFORE ADDRESSABILITY IS SET UP.\n         SPACE ,\nCONS12   DC    F'12'               STAE CODE IF NO WORK AREA\n         SPACE ,\nBASEREST DC    A(IGGPRE00)         MODULE BASE\n         SPACE\n*              THE SDWA CANNOT BE USED AFTER THIS POINT WITHOUT\n*              CHECKING THAT IT WAS SUPPLIED.\n*              (IF SO, R6 IS NON-ZERO AND CONTAINS ITS ADDRESS).\n         SPACE ,\n*              IF AN SDWA WAS NOT SUPPLIED, GET THE PPWA ADDRESS\n*              AND COMPLETION CODE.  (IF AN SDWA WAS SUPPLIED,\n*              THESE FIELDS WERE LOADED ABOVE FROM THE SDWA.)\n         SPACE ,\n*              THE PPWA IS REQUIRED, TO PROVIDE REENTRANT WORK AREAS.\n         SPACE ,\nNOSDWA   DS    0H                  (COMPLETION CODE IS ALREADY IN R1)\n         DROP  R2,R3               (TEMPORARY DROP IN REGISTERS)\n         USING ESTAEXIT,R15\n         SR    R6,R6               CLEAR R6 TO SHOW NO SDWA PRESENT\n         LR    R7,R14              SAVE RETURN ADDRESS IN R7\n         LTR   R5,R2               PUT PARAM ADDR IN R5\n         BZ    GONOSDWA            IF ABSENT, GET OUT\n         SPACE ,\n*              SET UP THE NORMAL BASE REGISTERS FOR IGGPRE00.\n*              (NOTE: NOT DONE EARLIER IN THIS CODE PATH BECAUSE\n*              R2 CONTAINS THE PARAM ADDRESS WHEN THERE'S NO SDWA.)\n         SPACE ,\n         L     R2,BASEREST         GET BACK A GOOD VALUE\n         USING IGGPRE00,R2         REINSTATE GLOBAL BASE\n         LA    R3,IGGPRE00+4095    REINSTATE OUR 2ND GLOBAL BASE TOO\n         USING IGGPRE00+4095,R3\n         DROP  R15                 DON'T NEED THIS ANYMORE\n         SPACE ,\n*              CONTINUE HERE WITH OR WITHOUT AN SDWA.\n         SPACE ,\nESTACONT DS    0H\n         SPACE ,\n*              SET UP AND ISSUE THE OPERATOR MESSAGE AND DUMP TITLE.\n*              R1 CONTAINS THE ABEND COMPLETION CODE.\n         SPACE ,\n         MVC   WAMSGARA(CON659EE-CON659),CON659  COPY MSG SKELETON\n         MVC   DUMPTITL,CONDTITL   COPY DUMP TITLE SKELETON\n         ST    R1,WAWORK1          COMPLETION CODE\n         UNPK  WAWORK2,WAWORK1+1(2)  BECOMES MORE READABLE\n         OI    WAWORK2+3,X'F0'       ...\n         TR    WAWORK2,HEXLATE-240  AND EVEN MORE READABLE\n         MVC   WAC659CD,WAWORK2+1  COPY COMP CODE TO MESSAGE\n         MVC   WADTITL2,WAWORK2+1  AND TO DUMP TITLE TOO\n         SPACE ,\n         USING PSA,R0\n         L     R1,PSAAOLD          @ CURRENT ASCB\n         USING ASCB,R1\n         L     R14,ASCBJBNI        @ INITIATED JOBNAME\n         LTR   R14,R14             IS AN ADDRESS PRESENT?\n         BNZ   COPY659             YES, COPY IT\n         L     R14,ASCBJBNS        NO, GET @ STC JOBNAME\n         LTR   R14,R14             IS IT PRESENT??\n         BZ    PUT659              IF NOT, LEAVE JOBNAME AS *UNKNOWN\nCOPY659  MVC   WAC659JB,0(R14)     COPY JOBNAME TO MSG\n         DROP  R1\nPUT659   MVC   WADTITL3,WAC659JB   COPY JOBNAME TO DUMP TITLE TOO\n         SPACE ,\n         WTO   MF=(E,WAMSGARA)     SHIP THE MESSAGE OUT\n         SPACE ,\n*              DETERMINE THE \"CSECT\" (IGGPRE00 OR IGGPOST0) AND\n*              SET UP THE SDWA \"RECORDING PARAMETER\" FIELDS\n         SPACE ,\n         LTR   R6,R6               IS THERE AN SDWA?\n         BZ    DOSDUMP             NO, DON'T BOTHER WITH RECPARM\n         SPACE ,\n         MVC   SDWAMODN,CONPRE00   MODULE NAME = 'IGGPRE00'\n         MVC   SDWACSCT,CONPRE00   CSECT = 'IGGPRE00'\n         TM    WAFLAG1,WAFPOST0    ARE WE REALLY IN IGGPRE00?\n         BZ    GODUMP              YES, IT'S ALL SET\n         MVC   SDWACSCT,CONPOST0   NO, MAKE IT IGGPOST0\nGODUMP   MVC   WADTITL1,SDWACSCT   EITHER WAY, COPY IT TO DUMP TITLE\n         MVC   SDWAREXN,CONESTAE   RECOVERY ROUTINE = 'ESTAEXIT'\n         SPACE ,\n*              COPY THE DUMP TITLE TO THE SDWA.\n         SPACE ,\n         VRADATA VRAINIT=SDWAVRA,SDWAREG=6,  INITIALIZE VRADATA        *\n               KEY=VRAEBC,         SET DUMP TITLE AS MISC. EBCDIC INFO *\n               DATA=WADTITL1,LEN=TITLEND-TITLE1  LOCATION & LENGTH\n         SPACE ,\n*              SET THE VRA KEY TO ALLOW SUPPRESSION OF DUPLICATE DUMPS.\n         SPACE ,\n         VRADATA KEY=VRADAE        DAE MAY SUPPRESS DUPLICATE DUMPS\n         SPACE ,\n*              COPY THE IECIEXPL (PREPL) PARAMETER LIST TO THE VRA.\n         SPACE ,\n         VRADATA KEY=VRACBM,DATA=NAMIEXPL  COPY \"IECIEXPL\"\n         SPACE ,\n         L     R1,WAPREPL          GET SAVED PREPL ADDRESS\n         VRADATA KEY=VRACB,DATA=(R1),LEN=IEXLNGTH  COPY IT TOO\n         SPACE ,\n*              CONTINUE THE ABEND.  TAKE A DUMP AND RETURN.\n         SPACE\nDOSDUMP  SDUMP HDRAD=DUMPTITL,     ** TAKE DUMP **                     *\n               SDATA=(RGN,SQA,ALLPSA,NUC,CSA,TRT),MF=(E,WASDUMP)\n         SPACE ,\n*              THE FOLLOWING CODE DOES ANY SPECIAL CLEAN-UP NEEDED:\n*              OUTSTANDING ENQ'S ARE DEQ'ED, AND THE PCCB ENTRY IS\n*              RESTORED IF IT WAS MODIFIED.  IF THE EXIT IS MODIFIED,\n*              MAKE *SURE* THIS CODE WON'T BE BYPASSED IN EXECUTION.\n         SPACE ,\n*              FIRST, CHECK IF THE PCCB ENTRY MUST BE RESTORED\n         SPACE ,\n         TM    WAFLAG2,WAFPCMOD    WAS IT MODIFIED?\n         BZ    ESTACON8            NO, BYPASS CODE TO RESTORE IT\n         SPACE ,\n*              OBTAIN THE GORILLA AND JSCBACT ADDRESSES FROM PPWA\n         SPACE ,\n         L     R8,WAJSCBAC         GET SAVED JSCBACT\n         USING IEZJSCB,R8\n         L     R10,WAGORILL        GET SAVED GORILLA\n         USING GORILLA,R10\n         SPACE ,\n         TM    WAFLAG2,WAFPCENQ    DO WE STILL HAVE SYSZPCCB ENQ'ED?\n         BO    ESTACON1            IF SO, DON'T OBTAIN ENQ AGAIN\n         SPACE ,\n*              ENQUEUE ON SYSZPCCB AND FIND OUR PCCB ENTRY AGAIN\n*              (BE SAFE, THOUGH IT SHOULD NOT HAVE MOVED); THEN\n*              RESTORE THE FIELDS WE'VE MODIFIED.\n         SPACE ,\n*                                  THE ENQ PARM LIST IS STILL SET\n         SPACE ,\n         ENQ   MF=(E,WAENQ)        OBTAIN SYSZPCCB (EXCLUSIVE)\n         SPACE ,\n         OI    WAFLAG2,WAFPCENQ    REMEMBER THAT WE'RE ENQUEUED\nESTACON1 DS    0H\n         SPACE ,\n*              SEARCH THE PCCB CHAIN FOR A ACTIVE ENTRY WHERE\n*              PCCDSNAM MATCHES GORDSNAM.\n         SPACE ,\n         ICM   R9,B'1111',JSCBPCC  @ FIRST PCCB OR ZERO\n         USING IEFPCCB,R9\nESTACON2 BZ    ESTACON8            ENSURE PCCB ENTRY EXISTS, ELSE EXIT\n         TM    PCCSTAT1,PCCACTIV   IS THIS PCCB ACTIVE?\n         BZ    ESTACON3            NO, GO LOOK AT THE NEXT ONE\n         CLC   PCCDSNAM,GORDSNAM   DOES IT MATCH?\n         BE    ESTACON4            YES, GO UNMODIFY IT...\nESTACON3 ICM   R9,B'1111',PCCNEXTP  NO, GET THE NEXT ONE\n         B     ESTACON2            AND GO CHECK IT\n         SPACE ,\n*              UN-MODIFY THE PCCB ENTRY WE'VE FOUND\n         SPACE ,\nESTACON4 NI    PCCSTAT1,255-PCCACTIV  SET ENTRY INACTIVE\n         MVC   PCCACBP,ZERO        ZERO THE ACB POINTER\n         SPACE ,\n*              RESET PCCDDNAM IF IT WAS MODIFIED\n         SPACE ,\n         CLC   PCCDDNAM,FAKEDDN    IS IT OUR SPECIAL DDNAME?\n         BNE   ESTACON5            BIF NOT\n         MVC   PCCDDNAM,BLANKS     ELSE RESTORE IT TO BLANKS\n         SPACE ,\nESTACON5 NI    WAFLAG2,255-WAFPCMOD  RESET \"PCCB MODIFIED\" FLAG\n         SPACE ,\n         DROP  R8,R9,R10\n         SPACE ,\nESTACON8 TM    WAFLAG2,WAFPCENQ    IS THE SYSZPCCB ENQ OUTSTANDING?\n         BZ    ESTACON9            NO, BYPASS DEQ\n         SPACE ,\n*              DEQUEUE FROM THE SYSZPCCB RESOURCE\n         SPACE ,\n         DEQ   MF=(E,WAENQ)        RELEASE THE PCCB ENQUEUE\n         SPACE ,\n         NI    WAFLAG2,255-WAFPCENQ  AND RESET THE ENQ FLAG\n         SPACE ,\nESTACON9 DS    0H\n         SPACE ,\n*              END OF CODE TO RESTORE THE PCCB ENTRY\n         SPACE ,\n         LTR   R6,R6               HAVE WE AN SDWA?\n         BZ    GONOSDWA            BIF NOT\n         SPACE ,\n*              FREEMAIN THE PPWA BEFORE RETURNING TO RTM\n         SPACE ,\n         FREEMAIN RU,LV=WAEND-PPWA,SP=230,A=(R5)  FREEIT\n         SPACE ,\n*              NOW EXIT VIA SETRP WHEN SDWA WAS PRESENT\n         SPACE ,\n         SETRP WKAREA=(R6),REGS=(14,12),DUMP=NO,  * WE TOOK ONE *      *\n               RECORD=YES,                                             *\n               RC=0   ** CONTINUE TERMINATION **\n         SPACE ,\n*              EXIT VIA SETRP WHEN SDWA IS PRESENT BUT PPWA ABSENT\n         SPACE ,\nGONOPARM SETRP WKAREA=(R6),REGS=(14,12),DUMP=YES, * WE NEED ONE *      *\n               RECORD=YES,                                             *\n               RC=0   ** CONTINUE TERMINATION **\n         SPACE ,\n         DROP  R6                  ###\n         SPACE ,\n*              CONTINUE ABEND IF SDWA WAS NOT SUPPLIED\n         SPACE ,\nGONOSDWA LR    R14,R7              RESTORE RETURN REGISTER\n         LA    R15,0               SET RC=0, CONTINUE ABEND\n         BR    R14                 AND RETURN\n         SPACE ,\n         POP   USING\n         TITLE 'PPWA     - IGGPRE00/POST0 LOCAL WORK AREA'\n*************************\n* PPWA - LOCAL WORKAREA *\n*************************\n*\n*        THIS WORKAREA IS GETMAINED BY IGGPRE00, FREEMAINED BY\n*        IGGPOST0, AND USED THROUGHOUT.  ITS ADDRESS IS SAVED IN\n*        IEXRSVWD (FOR IGGPOST0), AND IS ALSO PASSED TO THE ESTAE\n*        EXIT VIA THE ESTAE \"PARAM\" FIELD.\n*\n*        *WARNING*  THIS AREA IS CLEARED TO ALL ZEROS WHEN GETMAINED.\n*                   INITPPWA MUST CONTAIN CODE TO INITIALIZE ANY FIELD\n*                   THAT MUST BE SET NON-ZERO.\n*\nPPWA     DSECT ,\n         SPACE ,\nWAEBCDIC DC    C'PPWA'             EYE-CATCHER\n         SPACE ,\nSAVEAREA DS    18F                 STANDARD SAVE AREA FOR IGGPRE00 ONLY\n         SPACE ,\nWAFLAG1  DS    X                   FLAG BYTE\n         SPACE ,\nWAFZTIOT EQU   X'80'                80 = TASK ALREADY OWNS SYSZTIOT ENQ\nWAFAUTH  EQU   X'40'                40 = AN AUTHORIZED PGM CALLED US\nWAFWAPGM EQU   X'20'                20 = AUTH PGM NAME IS IN WAPGM\nWAFPOST0 EQU   X'10'                10 = WE'RE IN IGGPOST0\nWAFDSNCK EQU   X'08'                08 = THIS VOLUME REQUIRES DSN CHECK\nWAFCATCK EQU   X'04'                04 = THIS DSNAME REQUIRES CAT CHECK\nWAFVSAM  EQU   X'02'                02 = THIS IS A VSAM DATASET\nWAFESTAE EQU   X'01'                01 = ESTAE IS ACTIVE\n*\n*                                                **********\n*                                                *  NOTE  *\n*                                                **********\n*\n*                                     IF WAFDSNCK IS ON IT MEANS THAT\n*                                     ALL DATASETS ON THAT VOLUME MUST\n*                                     MEET THE DSNAME STANDARDS CHECK.\n*\n*                                     IF WAFCATCK IS ON IT MEANS THAT\n*                                     THE DATASET MUST PASS THE CATALOG\n*                                     TEST (I.E., IT'S CATALOGABLE).\n         SPACE ,\nWAFLAG2  DS    X                   ANOTHER FLAG BYTE\n         SPACE ,\nWAFIIC   EQU   X'80'                80 = CALLER IS INITIATOR\nWAFINIT  EQU   X'40'                40 = \"SPECIAL INITIALIZATION\" ENTRY\nWAFPCENQ EQU   X'20'                20 = ENQ OUTSTANDING FOR PCCB CHAIN\nWAFPCMOD EQU   X'10'                10 = PCCB ENTRY FOR GORDSNAM MOD'ED\nWAFRACCK EQU   X'08'                08 = RACF CALL NEEDED\n         SPACE ,\nWARNAME  DS    0H                  RNAME FOR SYSZTIOT ENQ (6 BYTES)\nWARNASID DS    H                    - ASID\nWARNDSAB DS    XL4                  - DSAB CHAIN POINTER\n         SPACE ,\n*              THE FOLLOWING AREA IS USED FOR THE SYSZTIOT AND\n*              SYSZPCCB ENQ'S...\n         SPACE ,\nWAENQ    ENQ   (SYSZTIOT,WARNAME,E,6,SYSTEM),RET=TEST,MF=L\n         SPACE ,\nWAPGM    DS    CL8                 PRB PROGRAM NAME (IF AUTHORIZED PGM)\n         SPACE ,\nWAWORK   DS    D                   DOUBLE-WORD WORK AREA ...\n         ORG   WAWORK              ALSO REDEFINED AS TWO FULLWORDS ...\nWAWORK1  DS    F                   FOR ESTAE EXIT ABEND CODE CONVERSION\nWAWORK2  DS    F                    AND OTHER USEFUL FUNCTIONS\n         SPACE ,\nWADSNAME DS    F                   @ DSNAME (FOR RENAME, THE NEW DSN)\n         SPACE ,\nWAGORILL DS    F                   SAVED GORILLA ADDRESS, FOR ESTAE\nWAJSCBAC DS    F                   SAVED JSCBACT ADDRESS, FOR ESTAE\nWAPREPL  DS    F                   SAVED PREPL ADDRESS, FOR ESTAE\n         SPACE ,\nWASIOTAD DS    F                   SAVED SIOT ADDRESS, OR ZERO\n         SPACE ,\nWADSNWRK DS    XL(L'JFCBDSNM)      FOR DSNAME VALIDATION & GDG TESTS\n         SPACE 2\nWACTGPL  DS    XL(CTGPLLEN)        AREA FOR CATALOG PARAMETER LIST\n         SPACE ,\nWACTGWA  DS    XL(CTGWALEN)        AREA FOR CATALOG WORK AREA\n         SPACE ,\nWACTGVL  DS    XL(CTGVLLEN*3)      AREA FOR CATALOG VOLUME LIST\n*                                  (LARGE ENOUGH FOR THREE VOLUMES)\n         SPACE ,\nWACTGCV  DS    XL(CTGCVLEN)        AREA FOR CATALOG CVOL LIST\n         SPACE ,\nWAUCBVOL DS    CL(L'UCBVOLI)       SAVE AREA FOR VOLUME NAME\n         SPACE 2\n*              WORK AREA FOR ALL MESSAGES.  LENGTH IS COMPUTED\n*              BY \"ORG\"S, TO SIZE FOR LARGEST MESSAGE AUTOMATICALLY.\n         SPACE ,\nWAMSGARA EQU   *                   MESSAGE WORK AREA\n         SPACE ,\nWAC659CD EQU   CON659CD-CON659+WAMSGARA  TEXT AREAS FOR\nWAC659JB EQU   CON659JB-CON659+WAMSGARA   MESSAGE CNY659I\n         ORG   WAMSGARA+CON659EE-CON659  SIZE FOR MESSAGE CNY659I\n         SPACE ,\n*              BUILD AREA EQU'S FOR MESSAGE CNY651I\n         SPACE ,\nWAC651LN EQU   WAMSGARA,4          MCS LENGTH FIELD, FLAGS\nWAC651P1 EQU   WAMSGARA+L'WAC651LN,L'CON651P1  MESSAGE ID\nWAC651AL EQU   WAC651P1+L'WAC651P1,L'CON65ALL  ENTRY TYPE\nWAC651P2 EQU   WAC651AL+L'WAC651AL,L'CON65P2  MORE MESSAGE\nWAC651P3 EQU   WAC651P2+L'WAC651P2,L'CON651P3  MORE MESSAGE\n*              THE LENGTH OF THE FOLLOWING SHOULD BE L'CTGVLVOL\nWAC651P4 EQU   WAC651P3+L'WAC651P3             VOLUME SERIAL\nWAC651P5 EQU   WAC651P4+L'CTGVLVOL,L'CON651P5  MORE MESSAGE\nWAC651MC EQU   WAC651P5+L'WAC651P5,L'MCS65  MCS DESC/ROUTCDE\n         ORG   WAC651MC+L'WAC651MC  RESERVE SPACE FOR MESSAGE\n         SPACE ,\n*              BUILD AREA EQU'S FOR MESSAGE CNY652I\n         SPACE ,\nWAC652LN EQU   WAMSGARA,4          MCS LENGTH FIELD, FLAGS\nWAC652P1 EQU   WAMSGARA+L'WAC652LN,L'CON652P1  MESSAGE ID\n*              ENSURE THAT WAC652AL == WAC651AL.\n*              ONLY WAC651AL IS REFERENCED IN THE CODE.\nWAC652AL EQU   WAC652P1+L'WAC652P1,L'CON65ALL  ENTRY TYPE\nWAC652P2 EQU   WAC652AL+L'WAC652AL,L'CON65P2  MORE MESSAGE\nWAC652P3 EQU   WAC652P2+L'WAC652P2,L'CON652P3  MORE MESSAGE\nWAC652MC EQU   WAC652P3+L'WAC652P3,L'MCS65  MCS DESC/ROUTCDE\n         ORG   WAC652MC+L'WAC652MC  RESERVE SPACE FOR MESSAGE\n         SPACE ,\n*              BUILD AREA EQU'S FOR MESSAGE CNY653I\n         SPACE ,\nWAC653LN EQU   WAMSGARA,4          MCS LENGTH FIELD, FLAGS\nWAC653P1 EQU   WAMSGARA+L'WAC653LN,L'CON653P1  MESSAGE ID\n*              THE LENGTH OF THE FOLLOWING SHOULD BE L'WAUCBVOL\nWAC653VV EQU   WAC653P1+L'WAC653P1             VOLUME NAME\nWAC653P2 EQU   WAC653VV+L'WAUCBVOL,L'CON653P2  MORE MESSAGE\n*              THE LENGTH OF THE FOLLOWING SHOULD BE L'JFCBDSNM\nWAC653DS EQU   WAC653P2+L'WAC653P2            DSNAME\nWAC653MC EQU   WAC653DS+L'JFCBDSNM,L'MCS65  MCS DESC/ROUTCDE\n         ORG   WAC653MC+L'WAC653MC  RESERVE SPACE FOR MESSAGE\n         SPACE ,\n*              BUILD AREA EQU'S FOR MESSAGE CNY654I\n         SPACE ,\nWAC654LN EQU   WAMSGARA,4          MCS LENGTH FIELD, FLAGS\nWAC654P1 EQU   WAMSGARA+L'WAC654LN,L'CON654P1  MESSAGE ID\n*              ENSURE THAT WAC654AL == WAC651AL.\n*              ONLY WAC651AL IS REFERENCED IN THE CODE.\nWAC654AL EQU   WAC654P1+L'WAC654P1,L'CON65ALL  ENTRY TYPE\nWAC654P2 EQU   WAC654AL+L'WAC654AL,L'CON65P2  MORE MESSAGE\nWAC654P3 EQU   WAC654P2+L'WAC654P2,L'CON654P3  MORE MESSAGE\nWAC654MC EQU   WAC654P3+L'WAC654P3,L'MCS65  MCS DESC/ROUTCDE\n         ORG   WAC654MC+L'WAC654MC  RESERVE SPACE FOR MESSAGE\n         SPACE ,\n*              BUILD AREA EQU'S FOR MESSAGE CNY655I\n         SPACE ,\nWAC655LN EQU   WAMSGARA,4          MCS LENGTH FIELD, FLAGS\nWAC655P1 EQU   WAMSGARA+L'WAC655LN,L'CON655P1  MESSAGE ID\n*              ENSURE THAT WAC655AL == WAC651AL.\n*              ONLY WAC651AL IS REFERENCED IN THE CODE.\nWAC655AL EQU   WAC655P1+L'WAC655P1,L'CON65ALL  ENTRY TYPE\nWAC655P2 EQU   WAC655AL+L'WAC655AL,L'CON65P2  MORE MESSAGE\nWAC655P3 EQU   WAC655P2+L'WAC655P2,L'CON655P3  MORE MESSAGE\nWAC655MC EQU   WAC655P3+L'WAC655P3,L'MCS65  MCS DESC/ROUTCDE\n         ORG   WAC655MC+L'WAC655MC  RESERVE SPACE FOR MESSAGE\n         SPACE ,\n         ORG   ,                   ALLOW STORAGE FOR LARGEST MESSAGE\n         SPACE 2\nDUMPTITL DS    XL(TITLEND-CONDTITL)  DUMP TITLE AREA\nWADTITL1 EQU   TITLE1-CONDTITL+DUMPTITL  RELOCATED\nWADTITL2 EQU   TITLE2-CONDTITL+DUMPTITL  FILL-IN-THE-BLANKS\nWADTITL3 EQU   TITLE3-CONDTITL+DUMPTITL  TITLE FIELDS...\n         SPACE 2\nWAESTAE  ESTAE ESTAEXIT,CT,PARAM=*-*,TERM=YES,PURGE=NONE,ASYNCH=YES,   *\n               MF=L                ESTAE SKELETON\n         SPACE ,\nWASDUMP  SDUMP HDRAD=DUMPTITL,SDATA=(RGN,SQA,ALLPSA,NUC,CSA,TRT),MF=L\n         SPACE ,\n*              RACROUTE PARAMETERS, PARAMETER LIST, AND WORK AREA\n         SPACE ,\nRACP$DAS DC    0C'$DASDI.'         SYMBOL NEEDED FOR LENGTH COMPUTATION\nRACPPROF DC    CL39'$DASDI.VVVVVV'  VVVVVV IS REPLACED WITH WAUCBVOL\nRACPVOL  EQU   RACPPROF+L'RACP$DAS\n         SPACE ,\nRACPROUT RACROUTE REQUEST=AUTH,WORKA=*-*,MF=L\n         SPACE ,\nSAFWORK  DS    CL(SAFWLEN)         REQUIRED RACROUTE WORK AREA\n         SPACE ,\nSWAPARMS SWAREQ MF=L               PARAMETER AREA FOR SWAREQ MACRO\n         SPACE ,\nSWEPAPTR DS    F                   POINTER TO THE EPA AREA FOR SWAREQ\n         SPACE ,\nEPA      DS    CL(L'SWAEPAX)       EPA AREA FOR THE SWAREQ MACRO\n*                                  NOTE: AN EXTENDED EPA IS REQUIRED\n*                                        WITH UNAUTH=YES\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              INSTALLATION-DEPENDENT CODE SECTION                  *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE ,\nWAFLAGU  DS    X                   INSTALLATION-DEPENDENT FLAG BYTE\nWAFMDSCB EQU   X'20'                20 = MODDSCB ROUTINE MUST BE CALLED\nWAFWYLIO EQU   X'10'                10 = CALLER IS A WYLBUR I/O TASK\n         SPACE ,\nWAF1MODL DS    XL(DS1END-DS1FMTID)  MODEL F1 DSCB TO PASS TO ALLOCATE\n         SPACE ,\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n* *              END OF INSTALLATION-DEPENDENT CODE                   *\n* *=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\n         SPACE 2\nWAEND    EQU   *                   END OF PPWA\n         TITLE '           SYSTEM DSECTS'\n*          *****************\n*          * SYSTEM DSECTS *\n*          *****************\n*\n*        THE FOLLOWING DSECTS ARE DEFINED HERE:\n*\n*        REGISTER EQUATES (MACRO YREGS)\n*        PREPL (MACRO IECIEXPL) - IGGPRE00/IGGPOST0 EXIT PARAMETER LIST\n*        GORILLA - GLOBAL SAVE FOR USERCATALOG ACB POINTER\n*        ASCB (MACRO IHAASCB)\n*        CDE (MACRO IHACDE)\n*        CTGCV (TRANSLATED FROM PL/S MACRO IEZCTGCV)\n*      * CTGPL (MACRO IEZCTGPL)\n*        CTGVL (TRANSLATED FROM PL/S MACRO IEZCTGVL)\n*        CTGWA (TRANSLATED FROM PL/S MACRO IEZCTGWA)\n*        CVT (MACRO CVT)\n*        DSCB1 (MACRO IECSDSL1) - FORMAT 1 DSCB\n*        EPA (MACRO IEFZB505)\n*        JESCT (MACRO IEFJESCT)\n*        JFCB (MACRO IEFJFCBN)\n*        JSCB (MACRO IEZJSCB)\n*        PCCB (MACRO IEFPCCB)\n*        PSA (MACRO IHAPSA)\n*        PSCB (MACRO IKJPSCB)\n*      * QDB (MACRO IHAQDB)\n*        RB (MACRO IHARB)\n*        SAFW (MACRO ICHSAFW)\n*        SDWA (MACRO IHASDWA)\n*        SIOT (MACRO IEFASIOT)\n*        TCB (MACRO IKJTCB)\n*        UCB (MACRO IEFUCBOB)\n*\n*              * THESE MACROS ARE AVAILABLE IN THE OPTIONAL SOURCE\n*                MATERIALS FOR MVS OR DFP (FILE 1, AAPVT).  ALL OTHER\n*                MACROS ARE FOUND IN SYS1.MACLIB OR SYS1.MODGEN.\n         SPACE 2\n         YREGS ,                   DEFINE REGISTERS\n         TITLE '           SYSTEM DSECTS  -  PREPL  (IECIEXPL)'\n         IECIEXPL\n         TITLE '           SYSTEM DSECTS  -  GORILLA'\n*              THE GORILLA IS THE GLOBAL SAVE AREA FOR THE REQUIRED\n*              USERCATALOG'S DSNAME AND ACB POINTER.  IT IS USED ONLY\n*              WITHIN THIS EXIT: CREATED IN ROUTINE SPECINIT, AND\n*              REFERENCED IN ROUTINE SUPERLOC.  IT DOESN'T STAND FOR\n*              ANYTHING BECAUSE I HAVEN'T THOUGHT OF AN ACRONYM YET.\n         SPACE ,\nGORILLA  DSECT ,\n         SPACE ,\nGORDSNAM DS    CL(L'PCCDSNAM)      CATALOG DATA SET NAME\nGORACBP  DS    AL(L'PCCACBP)       CATALOG ACB ADDRESS\n         SPACE ,\nKINGKONG EQU   *                   END OF GORILLA\n         TITLE '           SYSTEM DSECTS  -  ASCB  (IHAASCB)'\n         IHAASCB\n         TITLE '           SYSTEM DSECTS  -  CDE  (IHACDE)'\n         IHACDE\n         TITLE '           SYSTEM DSECTS  -  CTGCV  (FROM IEZCTGCV)'\n*              THE FOLLOWING DSECT HAS BEEN TRANSLATED FROM THE PL/S\n         SPACE ,\n*/********************************************************************/\n*/*                                                                  */\n*/*   MACRO NAME = IEZCTGCV                                          */\n*/*                                                                  */\n*/*   DESCRIPTIVE NAME = VSAM CATALOG CONTROL VOLUME LIST            */\n*/*                                                                  */\n*/*   FUNCTION = MAPPING FOR THE OS/VS SYSTEM CATALOG CVOL ENTRY     */\n*/*                                                                  */\n*/*   CONTROL BLOCK STRUCTURE = IF THE REQUEST IS 'SUPERLOCATE',     */\n*/*                             THE CTGCV IS POINTED TO BY THE       */\n*/*                             CTGPL (CTGCVOL).                     */\n*/*                                                                  */\n*/*   INCLUDED MACROS = NONE                                         */\n*/*                                                                  */\n*/*   METHOD OF ACCESS = PL/S - NO DECLARES NECESSARY                */\n*/*                                                                  */\n*/*   STATUS = VS/2 RELEASE 3   (CHANGE FLAG @Y30SSXX)               */\n*/*                                                                  */\n*/*   DATE OF LAST CHANGE = 17 JUL 74                                */\n*/*                                                                  */\n*/********************************************************************/\n*                                   /* DECLARE                       */\nCTGCV    DSECT ,                    /* DECLARE CTGCV LEVEL ONE       */\n*                                   /* WORD BOUNDARY                 */\nCTGCVVOL DS    CL6                  /* CVOL VOLUME SERIAL            */\n*                                   /* VOLUME SER OF CATALOG   Y02020*/\nCTGCVDSN DS    CL44                 /* CATALOG NAME            Y02020*/\nCTGCVDEV EQU   CTGCVDSN,4           /* CVOL DEVICE TYPE        Y02020*/\nCTGCVCC  DS    CL44                 /* ALIAS NAME OR CONNECTOR Y02020*/\n         SPACE ,\nCTGCVLEN EQU   *-CTGCV             LENGTH OF CTG CVOL LIST\n         TITLE '           SYSTEM DSECTS  -  CTGPL  (IEZCTGPL)'\n         IEZCTGPL\n         TITLE '           SYSTEM DSECTS  -  CTGVL  (FROM IEZCTGVL)'\n*              THE FOLLOWING DSECT HAS BEEN TRANSLATED FROM THE PL/S\n         SPACE ,\n*/********************************************************************/\n*/*                                                                  */\n*/*   MACRO NAME = IEZCTGVL                                          */\n*/*                                                                  */\n*/*   DESCRIPTIVE NAME = VSAM CATALOG VOLUME LIST AND EXTENSION      */\n*/*                                                                  */\n*/*   FUNCTION = MAPPING MACRO FOR THE CATALOG VOLUME LIST           */\n*/*              AND THE VOLUME LIST EXTENSION.                      */\n*/*                                                                  */\n*/*   CONTROL BLOCK STRUCTURE = THE CTGVL IS POINTED TO BY THE       */\n*/*                             CTGWA (CTGWAVL).                     */\n*/*                                                                  */\n*/*   INCLUDED MACROS = NONE                                         */\n*/*                                                                  */\n*/*   METHOD OF ACCESS = PL/S - NO DECLARES NECESSARY                */\n*/*                                                                  */\n*/*   STATUS = VS/2 RELEASE 3   (CHANGE FLAG @Y30SSXX)               */\n*/*                                                                  */\n*/*   DATE OF LAST CHANGE = 18 JUL 74                                */\n*/*                                                                  */\n*/********************************************************************/\n*                                   /* DECLARE                       */\n*/********************************************************************/\n*/*                     CATALOG  VOLUME  LIST                        */\n*/********************************************************************/\n*\nCTGVL    DSECT ,                    /* DECLARE CTGVL LEVEL ONE       */\n*                                   /* WORD BOUNDARY                 */\nCTGVLVOL DS    CL6                  /* VOLUME SERIAL NUMBER          */\nCTGVLDEV DS    CL4                  /* DEVICE TYPE                   */\nCTGVLSEQ DS    H                    /* FILE SEQUENCE NUMBER          */\n         SPACE ,\nCTGVLLEN EQU   *-CTGVL             LENGTH OF CTG VOLUME LIST\n         SPACE ,\n*/********************************************************************/\n*/*                     VOLUME  LIST  EXTENSION                      */\n*/********************************************************************/\n*\nCTGVLTTR DS    CL3                  /* FORMAT 1 DSCB TTR             */\n         SPACE ,\nCTGVLXLN EQU   *-CTGVL             LENGTH OF CTG VOLUME LIST WITH EXT\n         SPACE ,\n*              NOTE THAT THE VOLUME LIST EXTENSION (THE TTR)\n*              IS PRESENT ONLY FOR A SINGLE-VOLUME DATASET.\n         TITLE '           SYSTEM DSECTS  -  CTGWA  (FROM IEZCTGWA)'\n*              THE FOLLOWING DSECT HAS BEEN TRANSLATED FROM THE PL/S\n         SPACE ,\n*/********************************************************************/\n*/*                                                                  */\n*/*   MACRO NAME = IEZCTGWA                                          */\n*/*                                                                  */\n*/*   DESCRIPTIVE NAME = VSAM CATALOG SCHEDULER WORKAREA             */\n*/*                                                                  */\n*/*   FUNCTION = MAPPING MACRO FOR THE VSAM CATALOG                  */\n*/*              SCHEDULER WORKAREA.                                 */\n*/*                                                                  */\n*/*   CONTROL BLOCK STRUCTURE = THE CTGWA IS POINTED TO BY THE       */\n*/*                             CTGPL (CTGWKA).                      */\n*/*                                                                  */\n*/*   INCLUDED MACROS = NONE                                         */\n*/*                                                                  */\n*/*   METHOD OF ACCESS = PL/S - NO DECLARES NECESSARY                */\n*/*                                                                  */\n*/*   STATUS = VS/2 RELEASE 3   (CHANGE FLAG @Y30SSXX)               */\n*/*                                                                  */\n*/*   DATE OF LAST CHANGE = 18 JUL 74                                */\n*/*                                                                  */\n*/********************************************************************/\n*\nCTGWA    DSECT ,                    /* DECLARE CTGWA LEVEL ONE       */\n*                                   /* WORD BOUNDARY                 */\nCTGWAVL  DS    F                    /* VOLUME LIST ADDRESS           */\nCTGWALV  DS    H                    /* VOLUME LIST LENGTH            */\nCTGWAVCT DS    H                    /* NUMBER OF VOLUME ENTRIES IN   */\n*                                   /*   VOLUME LIST                 */\nCTGWAUCT DS    H                    /* MINIMUM UNIT COUNT            */\nCTGWAGCT DS    H                    /* COUNT OF GENERATIONS    Y02020*/\nCTGWAGB  DS    F                    /* POINTER TO G0000V00     Y02020*/\n         SPACE ,\nCTGWALEN EQU   *-CTGWA             LENGTH OF CTG WORK AREA\n         TITLE '           SYSTEM DSECTS  -  CVT  (CVT)'\n         CVT   DSECT=YES\n         TITLE '           SYSTEM DSECTS  -  DSAB  (IHADSAB)'\n         IHADSAB\n         TITLE '           SYSTEM DSECTS  -  DSCB1  (IECSDSL1)'\nDSCB1    DSECT\n         IECSDSL1 1\n         TITLE '           SYSTEM DSECTS  -  EPA  (IEFZB505)'\n         IEFZB505 LOCEPAX=YES\n         TITLE '           SYSTEM DSECTS  -  JESCT  (IEFJESCT)'\n         IEFJESCT\n         TITLE '           SYSTEM DSECTS  -  JFCB  (IEFJFCBN)'\nJFCB     DSECT\n         IEFJFCBN\n         TITLE '           SYSTEM DSECTS  -  JSCB  (IEZJSCB)'\n         IEZJSCB\n         TITLE '           SYSTEM DSECTS  -  PCCB  (IEFPCCB)'\n         IEFPCCB\n         TITLE '           SYSTEM DSECTS  -  PSA  (IHAPSA)'\n         IHAPSA\n         TITLE '           SYSTEM DSECTS  -  PSCB (IKJPSCB)'\n         IKJPSCB\n         TITLE '           SYSTEM DSECTS  -  QDB  (IHAQDB)'\n         IHAQDB ,\n         TITLE '           SYSTEM DSECTS  -  RB  (IHARB)'\n         IHARB\n         TITLE '           SYSTEM DSECTS  -  SAFW  (ICHSAFW)'\n         ICHSAFW\n         TITLE '           SYSTEM DSECTS  -  SDWA  (IHASDWA)'\n         IHASDWA\n         TITLE '           SYSTEM DSECTS  -  SIOT  (IEFASIOT)'\nSIOT     DSECT ,\n         IEFASIOT\n         TITLE '           SYSTEM DSECTS  -  TCB  (IKJTCB)'\n         IKJTCB\n         TITLE '           SYSTEM DSECTS  -  UCB  (IEFUCBOB)'\nUCB      DSECT ,\n         IEFUCBOB\n         SPACE 3\n         END   IGGPRE00\n", "mimetype": "text/plain", "datatype": "ebcdic", "extension": ".txt"}}}}, "SCRIPTOPTIONS": {"filename": "./CBT328/FILE328.XMI", "LRECL": 80, "loglevel": 30, "outputfolder": "CBT328", "encoding": "cp1140", "unnum": true, "quiet": false, "force": false, "binary": false, "modifydate": true}}