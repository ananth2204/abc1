./       C     IEBUPDTX
./       G     80294,66
./       R     00070000-00080000,100
         SPACE 1
*              MODIFICATIONS BY:
*              SEYMOUR JEROME METZ
*              COMNET, COMPUTER NETWORK CORPORATION
*              5185 MACARTHUR BOULEVARD
*              WASHINGTON, D.C.   20016
*              (202)537-2646
         SPACE 1
*              CHANGES FLAGGED WITH 80002
*        1     SYMBOLIC REGISTER NAMES
*        2     EXTENDED BCR MNEMONICS
*        3     REGEQU MACRO USED
*        4     370 INSTRUCTIONS USED
*        5     JOBCAT AND STEPCAT DDNAMES RECOGNIZED
*        6     NAMES FROM DCBD AND IEFJFCBN MAPPING MACROS USED
*              TO TEST AND ALTER DCB AND JFCB FLAGS
*        7     CODE TIGHTENED UP
*        8     ABEND 0CX FOR MISSING SYSIN CORRECTED.
         SPACE 1
*              CHANGES FLAGGED WITH 80294
*        1     CHANGE LOG (THESE COMMENTS)
*        2     USE LR R15,=V(EP) INSTEAD OF THE INLINE DC
*              GENERATED BY CALL IN ORDER TO AVOID EXTRANEOUS
*              CNOP 0,4 AND B *+8
*        3     MORE 370 OPCODE USE
*        4     MORE CODE TIGHTENING
*        5     CHANGES IN LISTING FORMAT AFTER JRE0036
*        6     DEFAULT BLOCKSIZE FOR RECFM=VB TO 3165
*        7     FIX BUG IN CHAIN PROCESSING
         SPACE 2
*              MODIFICATIONS BY:
*              JOHN R. EHRMAN
*              SLAC
*              MAIL BIN 97
*              P.O. BOX 4349
*              STANFORD, CALIFORNIA   94305
*              (415)854-3300 EXTENSION 2631
         SPACE 1
*              CHANGES FLAGGED WITH JRE0036
*        1     WYLBUR SUPPORT
*        2     MODIFIED LISTING FORMAT
*        3     NEW PARM OPTIONS: WYLBUR AND INTEGER
*        4     MAPPING MACROS FOR BUFDSECT, LOCAL, AND NMDSECT
         SPACE 3
./       R     01182000
         L     R15,=V(DDINIT)     GET DEFAULT DDNAMES PLUGGED
         BALR  R14,R15            CALL
./       R     01752000
         L     R15,=V(LCLINIT)    GET WORK AREAS FOR COPY LIBRARY
         BALR  R14,R15            CALL
./       R     01930000
         L     R15,=V(LCLINIT)
         BALR  R14,R15            CALL
./       R     02311000
         L     R15,=V(LCLINIT)    GET DCB ETC. VIA R2
         BALR  R14,R15            CALL
./       R     02520000
         L     R15,=V(LCLINIT)
         BALR  R14,R15            CALL
./       R     02590000-02600000
NOSYSIN  ICM   R9,15,WORKC        ADDRESS OF LATEST UPDATE
./       R     05750000
         L     R15,=V(LCLINIT)    GET NEW CONTROL LEVEL STORAGE
         BALR  R14,R15            CALL
./       I     06990000
         CLI   CMDNUM+3,1         IS OPCODE ADD OR CHANGE ?
         BNH   MAINAC1             YES - DON'T PRINT LINE OF _
./       F     07030000,,1-10 /       /MAINAC1/
./       I     07090000
         CLI   CMDNUM+3,1         IS OPCODE ADD OR CHANGE ?
         BH    MAINAC2             NO  - DON'T EJECT
      XPREJECT PWA                 YES - NEW PAGE
./       F     07130000,,1-10 /       /MAINAC2/
./       R     10070000
      XPRNTLIN PWA,TEXT=DTITLE,LENGTH=DTITLEL,                         *
               OFFSET=DLTOFST+NMREC-NMAREA
./       R     10830000
      XPRNTLIN PWA,TEXT=NMTITLE,LENGTH=NMTITLEL,                       *
               OFFSET=NMOFST+NMREC-NMAREA
./       F     11230000 /6C' ',//
./       F     11250000 /6C' ',//
./       R     11323000
         L     R15,=V(PRESS)      CALL WYLBUR EDIT PRESS
         CALL  (15),(INTEGER,0,RNAME)
./       R     11662000
         L     R15,=V(PRESS)      CALL WYLBUR EDIT PRESS
         CALL  (15),(INTEGER,1,RNAME)
./       R     16192000
         L     R15,=V(UNPRESS)    YES, CALL WYLBUR EDIT UNPRESS
         CALL  (15),(INTEGER)
./       R     16652000
WYLREAD  L     R15,=V(UNPRESS)    WYLBUR EDIT UNPRESS FOR READ
         CALL  (15),(INTEGER)
./       D     17003000-17004000
./       D     17094000-17095000
./       F     17096000,,1-10 /       /DCBSETV/
./       R     17099000
         MVC   DCBBLKSI,=Y(3156)  NO - INSERT 1/4 TRACK (3330)
./       R     20240000-20260000
         SPACE 3
*              CREATE NEW NAME FOR STOW-ING AT END OF
*              MEMBER UPDATE.
         SPACE 1
*              MAY HAVE BEEN ENTERED FOR VERSION=NEXT OR FOR
*                                        VERSION=EXPLICIT.
*              IF VERSION    THEN WVERSION IS     MEMVER IS
*                 EXPLICIT        EXP. VER        HIGH VER
*                 NEXT            HIGH + 1        HIGH + 1
         SPACE 1
./       R     20430000-20440000
*                                 OLD HIGH + 1 :: NEW VERSION
*              OR                 OLD HIGH     :: NEW VERSION
         CP    MEMVER,MEMVER+STOWUD-SSSI
         BH    GNEXIT             LEAVE IF NEW VERSION LOWER
./       R     20790000-20810000,10000
         AP    MEMVER,=P'1'       COMPUTE NEXT VERSION NUMBER
*                                        =HIGHEST + 1
         UNPK  WVERSION,MEMVER    SETUP IN VERSION WORK AREA
./       R     33520000
         L     R15,=V(LCLINIT)    GET STORAGE FOR TEMP. LEVEL
         BALR  R14,R15            CALL
./       R     46360000
DLTOFST  EQU   NMOFST             PLACE TO PRINT DELETED LINES AT
