//TSCLKZ  JOB ACC,CLARKE,MSGCLASS=X,NOTIFY=TSCLK
//ZAP EXEC PGM=IMASPZAP
//SYSLIB   DD  DSN=SYS4.JOL51.LOAD,DISP=SHR
//SYSPRINT DD  SYSOUT=*
//SYSIN DD *
* PROBLEM: ON MVS, CLEARING THE SCREEN TAKES PLACE AT A
*          DIFFERENT TIME THAN ON F4/MSP.
*
*          THIS MEANS THAT POPUPS DO NOT OVERALY THE SCREEN
*          AS THEY SHOULD.
*
* SOLUTION: PART 1:
*
*          ALTER THE MVS CODE TO ONLY CLEAR THE SCREEN WHEN WE
*          'DROP' OUT OF A MACRO OR INCLUDE FILE BACK TO THE
*          SYSIN LEVEL.
*
 NAME UJP00MN UJP52OLD
 BASE 0078
 VER 06AE B636,B638      ZAP AREA CLEAR ?
 VER 02AA 47F0,B044      BRANCH TO 'P52GETCH'
* STEP 1 - INSERT CODE IN THE ZAP AREA TO DO A:-
*
*                 STLINENO LINE=1,MODE=OFF
*
 REP 06B0 4100,0013      LOAD ENTRY CODE
 REP 06B4 8900,0018      SLL  0,24    SHIFT CODE TO BYTE 0
 REP 06B8 4110,0001      LOAD LINE NUMBER TO R1
 REP 06BC 8910,0018      SLL  1,24
 REP 06C0 8810,0018      SRL  1,24.
 REP 06C4 41F0,0000      LA   15,B'00000000'
 REP 06C8 89F0,0018      SLL  15,24.
 REP 06CC 161F           SET MODE TO R1  (OR R1,R15)
 REP 06CE 0A5E           SVC  94
 REP 06D0 47F0,B044      BRANCH OUT OF PATCH AREA
* NOW TURN ON ZAP BY BRANCHING TO ZAP AREA.
 REP 02AA 47F0,B638      TURN ZAP ON
 IDRDATA  MVSPOP1
