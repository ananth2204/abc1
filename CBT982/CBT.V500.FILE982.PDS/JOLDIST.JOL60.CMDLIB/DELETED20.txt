ftpget:macro(%password,%host,%bin,%text,%host
           );

dcl syspop   init '';
dcl indstyp  init '';
dcl outdstyp init '';
dcl typecopy init '';

/* Temporary FTP General purpose GET macro.

   This macro will
   *      Create FTP connect control statements,
   *      Create GET FTP Statements
*/

/* Check if no parameters, and if so, display a screen for the User */

    if %list(1) = ''   & %panels ¬= 'OFF'
    then do;
        dcl %work            init '';
        ftpgmenu;            /* FTP Get Menu */

/* Call ourselves reentrantly to do the copy  */

        if %syspfk = 3 | %syspfk =15 then exit;

        if %BUILDJOB ¬= 'YES'
           then ftpget %work;
        exit;                      /* Better exit now */
    end;

    if %to=0 then stop 'No ''TO'' Data Set Specified';
    if (%select¬='' & (%s¬=''|%exclude¬=''|%e¬=''|%member¬=''|%m¬=''|
        %members¬='')) then stop 'More than 1 Control Stmt Specified';

    if (%s¬='' & (%exclude¬=''|%e¬=''|%member¬=''|%members¬=''|%m¬=''))
       then stop 'More than 1 Control Stmt Specified';

    if (%exclude ¬='' & (%e¬=''|%members¬=''|%member¬=''|%m¬=''))
       then stop 'More than 1 Control Stmt Specified';

    if (%member ¬= '' & (%e¬=''|%members¬=''|%m¬=''))|
       (%members ¬= '' & (%e¬=''|%m¬=''))|
       (%m¬='' & %e¬='') then
       signal error 4,'More than 1 Control Statement Specified';

    if %member='' & %exclude='' & %e='' then
       %member = '%members%m%s%select';

        ftp     : dcl ftp      prog
                  sysut1   reads  %list(%parm1) %fle2
                  sysut2   %type  %list(%to)
                  sysin    reads  dummyin
           DD  DSN=&INDSN,DISP=(SHR,PASS)
                  sysprint writes printfil ;
        run iebgener ;

        dcl input  * replace ;
  %host
  %user
  %password
  SENDSITe
  GET //DD:IN &OUTDSN
  QUIT
eof;
        run ftp '(EXIT';
//*
//* This HAS NOT BEEN TESTED. I do not have FTP Access.
//*
//* THANKS TO WALTER MARGUCCIO <WALTER_MARGUCCIO@YAHOO.COM>
//* AND OTHERS IN IBMMAIN FOR THE IDEA OF THE //DD:IN
//*
//  EXEC FTP,HOST=192.10.10.1,USER='USERID',PASSWORD='MYPASSWORD',
// INDSN=NULLFILE,OUTDSN=FROM.MAINFRAME
//
