ALLSPACE: MACRO (%VOL=,%CYLS=,%SYSOUT='X');
   %ERROR='';
LABEL XXX;
    panel ('Vsam Data Space Allocation Panel')
   //('Name of vsam data set          ',dsn,44)
   //('Number of cylinders            ',cyls,3)
   //('Volume                         ',vol,6)
   //('Catalog and Password           ',cats,53)
   //('Sysout Class                   ',sysout,1)
   //('',x,50,'%error');
   %ERROR='';
IF %VOL='' THEN DO;
    %error='You must specify a Volume';
    REDO XXX;
END;
IF %CYLS='' THEN DO;
    %error='You must specify the number of Cylinders';
    REDO XXX;
END;
IF %CATS='' THEN DO;
    %error='You must specify the Catalog Name';
    REDO XXX;
END;
DCL INPUT1 * REPLACE;
     DEFINE SPACE (VOLUMES(%VOL) -
     FILE(FRED)       -
     CYLINDERS(%CYLS)) -
     CATALOG(%CATS)
EOF;
DCL SPECFILE DS DSN = %DSN   SYSDA VOL = %VOL;
DCL OUTPUT SYSOUT %SYSOUT;
ALLVSM: DCL IDCAMS PROG
 SYSIN READS INPUT1
 SYSPRINT WRITES  OUTPUT
 FRED READS SPECFILE;
 RUN ALLVSM;
 IF ALLVSM Â¬= 0 THEN DISPLAY 'VSAM SPACE ALLOC FAILED';
 END;
