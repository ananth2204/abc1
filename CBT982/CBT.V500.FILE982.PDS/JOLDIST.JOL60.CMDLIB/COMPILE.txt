   /* THIS IS THE JOL COMPILE COMMAND  */
   /* USING THE REGISTER COMMAND, ONE CAN DEFINE TO JOL PROGRAM
      CHARACTERISTICS AND OTHER DETAILS OF THESE PROGRAMS, SUCH AS
      THE LANGUAGE THEY ARE CODED IN, COMPILER OPTIONS NORMALLY USED,
      INPUTS AND OUTPUTS AND SO ON.

      THEN THE JOL COMPILE, AND EXEC COMMANDS CAN BE SIMPLY USED TO
      COMPILE, LINK AND RUN THESE PROGRAMS.

      FOR EXAMPLE, THE COMMAND

           REGISTER MASTUPDT  LANG PLI
                    FUNC 'THIS PROGRAM UPDATES PAYROLL'
                    COMPOPT 'NEST,GOSTMT'
                    LINKOPT 'LIST,MAP'
                    SOURCE 'APPL.SOURCE.LIB'
                    COPYLIB 'APPL.COPY.LIB'
                    LOAD 'APPL.LOADLIB'
                    FILES  'MASTIN READS,MASTOUT WRITES';

           WILL REGISTER THE PROGRAM TO JOL.

      WHENEVER THE PROGRAM IS TO BE COMPILED, IT IS SIMPLY A
      MATTER OF CODING:-

          COMPILE MASTUPDT;

      AND THE PROGRAM WILL BE COMPILED.

      TO EXECUTE THE PROGRAM, SIMPLY CODE THE FOLLOWING:-

          EXEC MASTUPDT 'INPUT.MASTER' 'TRANS.INPUT' 'MASTER.OUT'
               PRINTER;

       OR

         DCL INPUT   DS INPUT.MASTER;
         DCL OUTPUT  DS OUTPUT.MASTER VB 70,7000 SYSDA 10 CYLS;
         DCL TRANSIN DS TRANS.INPUT;
         DCL PRT     PRINTER B FORM 100 FBA 121,1210;
         EXEC MASTUPDT INPUT,TRANSIN,OUTPUT,PRT;

      IT WILL EVEN BE POSSIBLE TO HAVE STANDARD DEFAULT DATA SETS
      THAT THE PROGRAM WILL USE, UNLESS OVER-RIDDEN, THUS IT IS
      POSSIBLE TO SIMPLY CODE:-

          EXEC MASTUPDT;

     TO HAVE THE PROGRAM EXECUTED. (NOT THIS VERSION!!!!).

     SEE THE JOL DOCUMENTATION FOR FURTHER DETAILS.

  */
  COMPILE:MACRO(
         %COMPOPT=,           /*ORIGINALLY SET UP WITH 'REGISTER'   */
         %LINKOPT=,           /*ORIGINALLY SET UP WITH 'REGISTER'   */
         %COPYLIB=,           /*ORIGINALLY SET UP WITH 'REGISTER'   */
         %SOURCE=,            /*ORIGINALLY SET UP WITH 'REGISTER'   */
         %LOAD=,              /*ORIGINALLY SET UP WITH 'REGISTER'   */
         %ALWAYS,             /*IF ALWAYS CODED, LINK CAN BE DONE   */
                              /*EVEN IF COMPILE ERRORS OCCURRED.    */
         %NAME=,              /*NAME TO BE GIVEN TO LOAD MODULE (IF */
                              /*        DIFFERENT TO PROGRAM NAME). */
         %SSI='');

   DCL %$PLI,%$COB,%$ASM,%$FORT  INIT ''    ; /* USED TO COMMUNICATE
                               LANGUAGES USED BETWEEN MACROS */
   DCL %O1,%O2,%O3,%O4,%O5,%O6,%O7,%O8,%O9,%O10,
       %O11,%O12,%O13,%O14,%O15,%O16,%O17,%O18,%O19,%O20,
       %O21,%O22,%O23,%O24,%O25
                                 INIT '';
   DCL %I1,%I2,%I3,%I4,%I5,%I6,%I7,%I8,%I9,%I10,
       %I11,%I12,%I13,%I14,%I15,%I16,%I17,%I18,%I19,%I20,
       %I21,%I22,%I23,%I24,%I25
                                 INIT '';
   DCL %ERROR,%PGMNAME,%OPTIONS,%T,%SUB     INIT '';
   DCL %IF1, %IF2 INIT ''; /*USED IF MORE THAN ONE COMPILE SPECIFIED*/

   %SUB=1;   /* SET SUBSCRIPT TO 1 INITIALLY   */
   IF ((%LIST(1)='AND' | %LIST(1)='&') & %LIST(2) ='LINK')
   THEN %SUB=3;
   ELSE IF %LIST(2)='LINK' THEN %SUB=2;
   %PGMNAME='%LIST(%SUB)';
   IF %PGMNAME='' THEN DO;
       WRITE 'ENTER PROGRAM NAME TO BE COMPILED'; READ PGMNAME;
   END;
   IF %COMPOPT¬='' THEN %OPTIONS='%OPTIONS COMPOPT ''%COMPOPT''';
   IF %COPYLIB¬='' THEN %OPTIONS='%OPTIONS COPYLIB ''%COPYLIB''';
   IF %PGMNAME¬='' THEN DO;
     COMP1:$COMP %PGMNAME  %OPTIONS;
     %IF1 = 'COMP1 <= 8 ';
     END;
   IF %LIST(%SUB+1) THEN DO;
     COMP2:$COMP %LIST(%SUB+1)  %OPTIONS;
     %IF1 = '%IF1 & COMP2 <= 8 ';
     END;
   IF %LIST(%SUB+2) THEN DO;
     COMP3:$COMP %LIST(%SUB+2)  %OPTIONS;
     %IF1 = '%IF1 & COMP3 <= 8 ';
     END;
   IF %LIST(%SUB+3) THEN DO;
     COMP4:$COMP %LIST(%SUB+3)  %OPTIONS;
     %IF1 = '%IF1 & COMP4 <= 8 ';
     END;
   IF %LIST(%SUB+4) THEN DO;
     COMP5:$COMP %LIST(%SUB+4)  %OPTIONS;
     %IF1 = '%IF1 & COMP5 <= 8 ';
     END;
   IF %LIST(%SUB+5) THEN DO;
     COMP6:$COMP %LIST(%SUB+5)  %OPTIONS;
     %IF1 = '%IF1 & COMP6 <= 8 ';
     END;
   IF %LIST(%SUB+6) THEN DO;
     COMP7:$COMP %LIST(%SUB+6)  %OPTIONS;
     %IF1 = '%IF1 & COMP7 <= 8 ';
     END;
   IF %LIST(%SUB+7) THEN DO;
     COMP8:$COMP %LIST(%SUB+7)  %OPTIONS;
     %IF1 = '%IF1 & COMP8 <= 8 ';
     END;
   IF %LIST(%SUB+8) THEN DO;
     COMP9:$COMP %LIST(%SUB+8)  %OPTIONS;
     %IF1 = '%IF1 & COMP9 <= 8 ';
     END;
   IF %LIST(%SUB+9) THEN DO;
     COMP10:$COMP %LIST(%SUB+9)  %OPTIONS;
     %IF2 = '& COMP10<= 8 ';
     /* IF1 COULD BECOME TOO LONG HENCE %IF2 */
     END;
   IF %LIST(%SUB+10) THEN DO;
     COMP11:$COMP %LIST(%SUB+10)  %OPTIONS;
     %IF2 = '%IF2 & COMP11 <= 8 ';
     END;
   IF %LIST(%SUB+11) THEN DO;
     COMP12:$COMP %LIST(%SUB+11)  %OPTIONS;
     %IF2 = '%IF2 & COMP12 <= 8 ';
     END;
   IF %LIST(%SUB+12) THEN DO;
     COMP13:$COMP %LIST(%SUB+12)  %OPTIONS;
     %IF2 = '%IF2 & COMP13 <= 8 ';
     END;
   IF %LIST(%SUB+13) THEN DO;
     COMP14:$COMP %LIST(%SUB+13)  %OPTIONS;
     %IF2 = '%IF2 & COMP14 <= 8 ';
     END;
   IF %LIST(%SUB+14) THEN DO;
     COMP15:$COMP %LIST(%SUB+14)  %OPTIONS;
     %IF2 = '%IF2 & COMP15 <= 8 ';
     END;
   IF %LIST(%SUB+15) THEN DO;
     COMP16:$COMP %LIST(%SUB+15)  %OPTIONS;
     %IF2 = '%IF2 & COMP16 <= 8 ';
     END;
   IF %LIST(%SUB+16) THEN DO;
     COMP17:$COMP %LIST(%SUB+16)  %OPTIONS;
     %IF2 = '%IF2 & COMP17 <= 8 ';
     END;
   IF %LIST(%SUB+17) THEN DO;
     COMP18:$COMP %LIST(%SUB+17)  %OPTIONS;
     %IF2 = '%IF2 & COMP18 <= 8 ';
     END;
   IF %LIST(%SUB+18) THEN DO;
     COMP19:$COMP %LIST(%SUB+18)  %OPTIONS;
     %IF2 = '%IF2 & COMP19 <= 8 ';
     END;
   IF %LIST(%SUB+19) THEN DO;
     COMP20:$COMP %LIST(%SUB+19)  %OPTIONS;
     %IF2 = '%IF2 & COMP20 <= 8 ';
     END;
      /* END OF COMPILES  */
   IF %SUB¬=1   /* THEN LINK WAS FOUND IN PARAMETER LIST ABOVE */
   THEN DO;
        %OPTIONS=''; /*CLEAR OPTIONS LIST TEMPORARILY */
        IF %$PLI¬='' THEN %LINKOPT='%LINKOPT PLILIB PLIBASE';
        IF %$COB¬='' THEN %LINKOPT='%LINKOPT COBLIB';
        IF %$FORT¬='' THEN %LINKOPT='%LINKOPT FORTLIB';
        IF %LINKOPT¬='' THEN %OPTIONS='%OPTIONS LINKOPT ''%LINKOPT''';
        IF %LOAD¬='' THEN DO;
            %T=TYPE(LOAD);
            IF %T='LIT' THEN %OPTIONS='%OPTIONS LOAD = ''%LOAD''';
            ELSE %OPTIONS='%OPTIONS LOAD = %LOAD';
        END;
        IF %LIB¬='' THEN DO;
            %T=TYPE(LIB);
            IF %T='LIT' THEN %OPTIONS='%OPTIONS LIB = ''%LIB''';
            ELSE %OPTIONS='%OPTIONS LIB = %LIB';
        END;
      IF %ALWAYS='ALWAYS' THEN
         LINK:  LINK OBJ NAME=%PGMNAME LINK='YES' %OPTIONS;
      IF %ALWAYS¬='ALWAYS' THEN DO ;
         IF %IF2 ='' THEN IF (%IF1)      THEN
            LINK:  LINK OBJ NAME=%PGMNAME LINK='YES' %OPTIONS;
         ELSE IF (%IF1 %IF2) THEN
            LINK:  LINK OBJ NAME=%PGMNAME LINK='YES' %OPTIONS;
      END;
    END;
   END /* COMPILE MACRO  */   ;
