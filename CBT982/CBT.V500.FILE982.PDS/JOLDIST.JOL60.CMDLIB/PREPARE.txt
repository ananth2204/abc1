 RESTORE:MACRO(%FROMUNIT=TAPE,%TOUNIT=DISK,%TO=,%GEN=);
         DCL %RESTR1,%RESTR2,%RESTR3,%RESTR4,%RESTR5,%RESTR6,
             %DDS            INIT '';
         DCL %BACKDSN INIT 'JOL.BACKUP.OF';
         DCL %DD1,%DD2,%DD3,%DD4,%DD5,%DD6 INIT '';
 /* THIS MACRO CAN BE USED IN TWO WAYS:-
         1.  RESTORE VOL1 VOL2 VOL3
   OR    2.  RESTORE VOL1 TO VOL2 (COPYNAME) (PURGE)

         LETS SEE WHICH TYPE OF RESTORE HE IS DOING  */
          IF %GEN = '' THEN %GEN='(0)';
         IF %TO ¬=''
         THEN DO;            /* HE IS RESTORING TO A SPECIFIC VOL */
             %DDS=' IN01 READS IN01 OUT01 WRITES OUT01';
             DCL IN01 DS UNIT %FROMUNIT DSN %BACKDSN%LIST(1) %GEN;
             DCL OUT01 DS UNIT %TOUNIT VOL=%TO NODSN NODEF;
             %RESTR1=' RESTORE TODD=OUT01,FROMDD=IN01';
             IF %LIST(2)='COPYNAME' | %LIST(3)='COPYNAME'
             THEN %RESTR1='%RESTR1,CPYVOLID=YES';

             IF %LIST(2)='PURGE' | %LIST(3)='PURGE'
             THEN %RESTR1='%RESTR1,PURGE=YES';
         END;
         /*ELSE DO*/
         IF %TO=''           /* THIS IS A RESTORE OF VOL LIST */
         THEN DO;
             IF %LIST(1) THEN DO;
                 %RESTR1=' RESTORE FROMDD=IN01,TODD=OUT01';
                 DCL IN01 DS UNIT %FROMUNIT DSN %BACKDSN%LIST(1) %GEN;
                 DCL OUT01 DS UNIT %TOUNIT VOL %LIST(1) NODSN NODEF;
                 %DD1=' DDIN01 READS IN01 DDOUT01 WRITES OUT01 ';
             END;
             IF %LIST(2) THEN DO;
                 %RESTR2=' RESTORE FROMDD=IN02,TODD=OUT02';
                 DCL IN02 DS UNIT %FROMUNIT DSN %BACKDSN%LIST(2) %GEN;
                 DCL OUT02 DS UNIT %TOUNIT VOL %LIST(2) NODSN NODEF;
                 %DD2=' DDIN02 READS IN02 DDOUT02 WRITES OUT02 ';
             END;
             IF %LIST(3) THEN DO;
                 %RESTR3=' RESTORE FROMDD=IN03,TODD=OUT03';
                 DCL IN03 DS UNIT %FROMUNIT DSN %BACKDSN%LIST(3) %GEN;
                 DCL OUT03 DS UNIT %TOUNIT VOL %LIST(3) NODSN NODEF;
                 %DD3=' DDIN03 READS IN03 DDOUT03 WRITES OUT03 ';
             END;
             IF %LIST(4) THEN DO;
                 %RESTR4=' RESTORE FROMDD=IN04,TODD=OUT04';
                 DCL IN04 DS UNIT %FROMUNIT DSN %BACKDSN%LIST(4) %GEN;
                 DCL OUT04 DS UNIT %TOUNIT VOL %LIST(4) NODSN NODEF;
                 %DD4=' DDIN04 READS IN04 DDOUT04 WRITES OUT04 ';
             END;
             IF %LIST(5) THEN DO;
                 %RESTR5=' RESTORE FROMDD=IN05,TODD=OUT05';
                 DCL IN05 DS UNIT %FROMUNIT DSN %BACKDSN%LIST(5) %GEN;
                 DCL OUT05 DS UNIT %TOUNIT VOL %LIST(5) NODSN NODEF;
                 %DD5=' DDIN05 READS IN05 DDOUT05 WRITES OUT05 ';
             END;
             IF %LIST(6) THEN DO;
                 %RESTR6=' RESTORE FROMDD=IN06,TODD=OUT06';
                 DCL IN06 DS UNIT %FROMUNIT DSN %BACKDSN%LIST(6) %GEN;
                 DCL OUT06 DS UNIT %TOUNIT VOL %LIST(6) NODSN NODEF;
                 %DD6=' DDIN06 READS IN06 DDOUT06 WRITES OUT06 ';
             END;
         END;
         DCL PRINTER PRINTER FBM 1210,121;
         DCL CONTROL * REPLACE;
 %RESTR1
 %RESTR2
 %RESTR3
 %RESTR4
 %RESTR5
 %RESTR6
EOF;
         DCL IEHDASDR PROG
             SYSPRINT WRITES PRINTER
             SYSIN READS CONTROL
             %DDS %DD1 %DD2 %DD3 %DD4 %DD5 %DD6;
%SYSLABEL:   RUN IEHDASDR;
             IF LASTCC¬=0 THEN
         SIGNAL ERROR 3,'RESTORE FAILED';
         END;
