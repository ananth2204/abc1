PDSUR  ---  PARTITIONED DATA SET UNLOAD/RELOAD UTILITY PROGRAM

       This documentation appears to be directly from Gene Czarcinski
       and appears to date from 1973.  It is still mostly applicable
       and relevant however.  Please use it.

DEVELOPED BY --
         EUGENE A. CZARCINSKI
         NASA/GODDARD SPACE FLIGHT CENTER
         GREENBELT, MARYLAND 20771

PURPOSE --
         'PDSUR' IS A DATA SET UTILITY PROGRAM DESIGNED TO CREATE
         BACKUP COPIES OF PARTITIONED DATA SETS (UNLOAD) OR TO RESTORE
         BACKUP COPIES TO DISK (RELOAD).  IT IS DESIGNED TO BE COMPA-
         TIBLE WITH THE IBM SYSTEM UTILITY 'IEHMOVE'.  THAT IS, 'PDSUR'
         USES THE SAME UNLOADED FORMAT AS 'IEHMOVE'.  THUS, PARTITIONED
         DATA SET WHICH HAVE BEEN UNLOADED BY 'PDSUR' CAN BE RELOADED
         BY 'IEHMOVE' (OR VISA VERSA).  'PDSUR HAS BEEN DESIGNED AS A
         DATA SET UTILITY RATHER THAN A SYSTEM UTILITY AND THUS REQUIRES
         THAT DISK DATA SETS BE ALLOCATED THROUGH JCL.

HISTORY --
         THE DEVELOPMENT OF 'PDSUR' WAS PROMPTED BY SOME OF THE OPER-
         ATING INEFFICIENCIES AND PROBLEMS OF IBM'S 'IEHMOVE'.  'PDSUR'
         UTILIZES MAIN STORAGE (CORE) FOR ALL TABLES AND WORKAREAS
         RATHER THAN DISK AS 'IEHMOVE' DOES.  THUS, THE NUMBER OF I/O
         OPERATIONS REQUIRED FOR UNLOADING IS LESS FOR 'PDSUR' AS COMP-
         ARED TO 'IEHMOVE'.  FOR RELOADING, 'PDSUR' AND 'IEHMOVE'
         REQUIRED ABOUT THE SAME I/O TIME.  HOWEVER, 'PDSUR' DOES
         NOT NEED TO KNOW THE SPECIFIC VOLUME SERIAL NUMBER FOR RE-
         LOADING AS 'IEHMOVE' DOES (IT CAN BE SPECIFIED THROUGH JCL OR
         THE OPERATING SYSTEM CAN ASSIGN A SPECIFIC VOLUME).

FEATURES AND INCOMPATABILITIES --
         AS COMPARED TO 'IEHMOVE', 'PDSUR' HAS A NUMBER OF DIFFERENCES
         IN ITS DESIGN AND OPERATION.  MAJOR FEATURES AND DIFFERENCES
         ARE LISTED BELOW:
            - 'PDSUR' USES MAIN (CORE) STORAGE FOR TABLES AND WORK AREAS
            - THE DEFAULT BLKSIZE FOR UNLOAD I/O IS 800 (FOR LABELED
              TAPE, UNLABELED TAPE OR SEQUENTIAL DISK)
            - SPACE FOR DISK DATA SETS MUST BE ALLOCATED THROUGH JCL
              ... PDSUR DOES NOT DYNAMICALLY ALLOCATE SPACE AS IEHMOVE
              DOES
            - 'PDSUR' ONLY HANDLES LOADING AND UNLOADING PATITIONED DATA
              SETS
            - 'PDSUR' WILL HANDLE UNLOADED DATA SET BLKSIZES LARGER THAN
              800 BYTES FOR BOTH UNLOAD AND RELOAD (IEHMOVE WILL NOT)
            - SINCE 'PDSUR' USES QSAM FOR UNLOADED-PDS I/O OPERATIONS,
              'EROPT' CAN BE USED TO ACCEPT I/O ERRORS AND ATTEMPT
              DATA RECOVERY FROM A DAMAGED TAPE.
            - FOR ALL PRACTICAL PURPOSES, ALL I/O OPERATIONS PERFORMED
              BY 'PDSUR' ARE DEVICE INDEPENDENT.  'PDSUR' ALLOWS THE
              THE UNLOADED DATA SET TO RESIDE ON DISK, TAPE OR ANY OTHER
              DEVICE SUPPORTING SEQUENTIAL ACCESS.
            - 'PDSUR' ALLOWS SPECIFICATION (SELECTION OR EXCLUSION) OF
              MEMBERS ON BOTH UNLOADING AND RELOADING.
            - FOR FIXED LENGTH RECORDS ONLY (RECFM=F/FB), 'PDSUR'
              ALLOWS REBLOCKING ON RELOAD.  THUS, A PDS WHICH WAS
              DCB=(RECFM=F,LRECL=80,BLKSIZE=80) CAN BE RELOADED WITH
              DCB=(RECFM=FB,LRECL=80,BLKSIZE=3200).  THIS ALSO ALLOWS
              RELOADING A PDS WHICH WAS ON A 2314 WITH BLKSIZE=7280 TO
              BE RELOADED TO A 2321 WITH BLKSIZE=2000.
            - FOR ALL RECFM EXCEPT F/FB, 'PDSUR' WILL TAKE THE LARGEST
              OF: THE OLD BLKSIZE (TODD=), THE BLKSIZE SPECIFIED IN THE
              JCL, OR THE BLKSIZE SPECIFIED IN THE UNLOADED (FROMDD=)
              DATA SET.
            - THE UNLOADED DATA SET MUST BE A SEQUENTIAL DATA SET.
              IT MAY BE A MEMBER OF ANOTHER PDS (FOR WHAT PURPOSE I
              HAVE NO IDEA).  THE UNLOADED DATA SET WILL NORMALLY BE
              ON TAPE.

              (Forty years later, we routinely include entire pds'es
              as members of other pds'es using the XMIT-format, which
              did not exist in 1973.  But IEHMOVE format will also do
              quite nicely for this packaging purpose, especially
              when we have the convenience of PDSUR to restore the pds
              from the IEHMOVE-format pds member, and its blocksize
              does not have to be 800.      (Sam Golob, Aug2016)

            - A LIST FUNCTION HAS BEEN INCORPORATED TO LIST THE
              CONTENTS (MEMBER NAMES) OF AN UNLOADED FILE.

ACCESS METHODS USED --
         FOR SYSIN, SYSPRINT AND ALL UNLOADED DATA SET I/O: QSAM LOCATE
         MODE FOR FIXED LENGTH RECORDS IS USED.
         FOR ALL PDS I/O: BPAM IS USED.

         FOR ALL FILE 'SYSIN' I/O, THE DEFAULT BLKSIZE USED IS 80.
         FOR ALL FILE 'SYSPRINT' I/O, THE DEFAULT BLKSIZE IS 3509
         (HALF TRACK BLOCKING FOR A 2314).

CONTROL CARDS (ENTERED VIA THE 'SYSIN' FILE) --
         - ALL CONTROL SPECIFICATION MUST BE CONTAINED ON THE FIRST
           72 COLUMNS OF AN 80 BYTE CARD IMAGE (CONTINUATION CARDS ARE
           NOT HANDLED).
         - EACH CONTROL CARD MUST CONSIST OF TWO FIELDS: COMMAND AND
           OPERAND.
         - THE COMMAND FIELD MAY OR MAY NOT START IN COLUMN 1 OF THE
           CARD (BLANKS MAY PROCEED THE COMMAND AND ARE IGNORED).
         - ONE OR MORE BLANKS (MAX OF 16) MUST SEPARATE THE COMMAND
           AND OPERAND FIELDS
         - OPERANDS IN THE OPERAND FIELD MUST BE SEPARATED BY COMMAS.
           OPERAND SCANNING IS TERMINATED BY A BLANK OR COLUMN 72.

IN THE FOLLOWING, VALID ABREVIATIONS ARE GIVEN IN PARENTHESES FOLLOWING
THE SPECIFIED COMMAND OR OPERAND KEYWORD.

**COMMAND          **FUNCTION

UNLOAD (U)         SPECIFIES THAT AN UNLOAD (BACKUP CREATION) OPERATION
                   IS TO BE PERFORMED

RELOAD (R)         SPECIFIES THAT A RELOAD (BACKUP RESTORE) OPERATION
                   IS TO BE PERFORMED.
LIST   (L)         SPECIFIES THAT A LIST OPERATION IS TO BE PERFORMED
                   (ONLY THE "FROMDD" OPERAND IS REQUIRED AND USED).

MEMBER (M)         SPECIFIES MEMBER NAMES FOR THE SELECT OR EXCLUDE
                   OPTION SPECIFIED ON THE PREVIOUS UNLOAD OR RELOAD
                   CONTROL CARD.  MORE THAN ONE MEMBER CARD CAN FOLLOW
                   AN UNLOAD/RELOAD CARD SO THAT MANY NAMES CAN BE
                   SPECIFIED.  THE OPERAND FIELD MUST CONTAIN ONE OR
                   MORE MEMBER NAMES SEPARATED BY COMMAS.

**OPERAND KEYWORD  **FUNCTION

FROMDD= (F=)       FOR UNLOAD: THIS SPECIFIES THE DDNAME FOR THE PDS.
                   FOR RELOAD: THIS SPECIFIES THE DDNAME FOR THE TAPE.

TODD= (T=)         FOR UNLOAD: THIS SPECIFIES THE DDNAME FOR THE TAPE.
                   FOR RELOAD: THIS SPECIFIES THE DDNAME FOR THE PDS.

REPLACE  (R)       FOR UNLOAD: IGNORED.
                   FOR RELOAD: US THE 'REPLACE' OPTION WHEN 'STOW'ING
                   DIRECTORY ENTRIES.  IF A MEMBER ANME EXISTS FOR A
                   NAME OR ALIAS, IT IS REPLACED.

LEAVE  (L)         AT THE END OF THE SPECIFIED OPERATION, THE "TAPE"
                   FILE IS CLOSED WITH THE 'LEAVE' OPTION THUS LEAVING
                   THE TAPE MOUNTED EVEN IF THE DISP=(OLD,KEEP) IS
                   SPECIFIED...NORMALLY A TAPE IS UNLOADED IF KEEP IS
                   SPECIFIED.

SELECT (S)         FOR UNLOAD/RELOAD: PROCESS ONLY THOSE MEMBER OR ALIAS
                   NAMES SPECIFIED ON FOLLOWING MEMBER CARDS

EXCLUDE (E)        FOR UNLOAD/RELOAD: DO NOT PROCESS THE MEMBER OR ALIAS
                   NAMES SPECIFIED ON FOLLOWING MEMBER CARDS.

         (SELECT AND EXCLUDE ARE MUTUALLY EXCLUSE OPTIONS
         AND PDSUR USES THE LAST ONE SPECIFIED)


TYPICAL INSTREAM PROC --
         THE FOLLOWING INSTREAM PROC IS SHOWN TO ILLUSTRATE THE BASIC
         JCL REQUIRED TO RUN PDSUR:

         //PDSUR PROC OUT=A,BLK=3509,REG=50K
         //PDSUR EXEC PGM=PDSUR,REGION=&REG
         //STEPLIB DD DISP=SHR,DSN= ... (POINT AT LIBRARY FOR PDSUR PGM)
         //SYSPRINT DD SYSOUT=&OUT,DCB=BLKSIZE=&BLK
         //SYSIN DD DCB=(BLKSIZE=800,BUFNO=1)
         // PEND

     THE ABOVE PROC IS USED IN THE EXAMPLES GIVEN BELOW.


EXAMPLES --
    - UNLOAD TWO PDS'S
            // EXEC PDSUR
            //SYSIN DD *
            UNLOAD FROMDD=DISK,TODD=TAPE
            U F=D2,T=T2
            //DISK DD DISP=SHR,DSN=SYS1.PROCLIB
            //D2 DD DISP=SHR,DSN=USER.LINKLIB
            //TAPE DD DISP=(,KEEP),DSN=A,LABEL=1,UNIT=2400-4,
            // VOL=SER=TAPE
            //T2 DD DISP=(,KEEP),DSN=B,LABEL=2,VOL=REF=*.TAPE
    - RELOAD A PDS
            // EXEC PDSUR
            //SYSIN DD *
            RELOAD FROMDD=DD1,T=DD2,R
            //DD1 DD DISP=OLD,DSN=M2.USRID.T
            //DD2 DD DISP=OLD,DSN=M2.USRID.DISKLIB
    - UNLOAD AND RELOAD IN SAME JOB STEP
            // EXEC PDSUR
            //SYSIN DD *
            UNLOAD FROMDD=DD1,TODD=DD2
            RELOAD FROMDD=DD3,TODD=DD1
            //DD1 DD DISP=OLD,DSN=M2.USRID.LINKLIB
            //DD2 DD DISP=(,KEEP),DSN=M2.USRID.BAKUP,LABEL=3,
            // UNIT=2400-4,VOL=SER=TAPSER
            //DD3 DD DISP=OLD,DSN=M2.USRID.OLDTAP,LABEL=10,
            // UNIT=2400-4,VOL=SER=OLDTAP
    - LIST SOME OLD UNLOADED PDS'S
            // EXEC PDSUR
            //SYSIN DD *
            LIST FROMDD=DD1,LEAVE
            LIST F=DD2,LEAVE
            L FROMDD=DD3,L
            //DD1 DD DISP=OLD,DSN=M2.USRID.F1,LABEL=1,UNIT=2400-4,
            // VOL=SER=OLDPDS
            //DD2 DD DISP=OLD,DSN=M2.USRID.F2,LABEL=5,VOL=REF=*.DD1
            //DD3 DD DISP=OLD,DSN=M2.USRID.F3,LABEL=9,VOL=REF=*.DD1
    - UNLOAD WITH SOME SELECTES AND EXCLUDES
            // EXEC PDSUR
            //SYSIN DD *
            UNLOAD FROMDD=DD1,TODD=DD2,S
            MEMBER PROG1,PROG2,PROG3,PROG4
            UNLOAD FROMDD=DD1,TODD=DD3,E
            MEMBER PROG1,PROG2,PROG3,PROG4,PROGX
            //DD1 DD DISP=SHR,DSN=M2.USRID.LINKLIB
            //DD2 DD DISP=(,KEEP),DSN=USRID.X1,LABEL=1,UNIT=2400-4,
            // VOL=(PRIVATE,RETAIN,SER=SCRTCH)
            //DD3 DD DISP=(,KEEP),DSN=USRID.X2,LABEL=2,VOL=REF=*.DD2
    - RELOAD WITH SOME SELECTS AND EXCLUDES
            // EXEC PDSUR
            //SYSIN DD *
                    RELOAD FROMDD=DD1,TODD=DD2,LEAVE,S
                    MEMBER PROG1,PROG2
                    RELOAD FROMDD=DD1,TODD=DD3,EXCLUDE
                    MEMBER PROG3,PROG4
                    MEMBER PROG5,PROGA
            //DD1 DD DISP=OLD,DSN=M2.USRID.T,LABEL=5,UNIT=2400-4,
            // VOL=SER=BKPTAP
            //DD2 DD DISP=OLD,DSN=M2.USRID.LIB1
            //DD3 DD DISP=OLD,DSN=M2.USRID.LIB2


***  BUGS AND PROBLEMS  ***
         PLEASE REPORT ALL BUGS AND/OR PROBLEMS DIRECTLY TO
         YOUR LOCAL SYSTEM PROGAMMERS GROUP.

         Gene unfortunately has passed away.  Please address
          all questions or problems to:

          Sam Golob, email: sbgolob@cbttape.org

         BE SURE TO INCLUDE DUMPS (IF GENERATED) AS WELL AS A
         SAMPLE DECK ILLUSTRATING THE PROBLEM.
***NOTE*** NORMAL JCL OR OTHER OPERATING PROBLEMS ASSOCIATED WITH
           OS/360 WILL NOT BE DEBUGGED.
***NOTE*** LOCAL OR USER MODIFIED VERSIONS OF 'PDSUR' WILL NOT
           BE DEBUGGED BY ME...GENE CZARCINSKI.
