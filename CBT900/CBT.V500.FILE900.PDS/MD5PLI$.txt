//CBTUSER1 JOB (ACCT),'PL/I',NOTIFY=CBTUSER,
//         MSGLEVEL=(1,1),MSGCLASS=H,REGION=0M
//*       CALL MD5 FROM ENTERPRISE PL/1
//*       OBJECT DECK FOR MD5 IS IN MD5.OBJ
//RUN     EXEC IBMZCPLG,PARM.PLI='SOURCE',LNGPRFX=IEL390,
//        COND.LKED=(0,NE,PLI),COND.GO=(0,NE,PLI)
//PLI.SYSIN DD *
 TESTMD5: PROCEDURE OPTIONS (MAIN);
 DCL INFILE FILE INPUT;
 DCL INREC CHARACTER(80);
 DCL END_FILE FIXED BINARY;
 DCL MD5 ENTRY (CHAR(80), FIXED BIN(31),
                (*) FIXED BIN(31),
                CHAR(32),
                (*) FIXED BIN(31))
         OPTIONS(ASM, INTER);
 DCL CONTEXT(22) FIXED BIN(31);
 DCL IWRK(44) FIXED BIN(31);
 DCL RESULT CHARACTER(32);
 OPEN FILE(INFILE) TITLE('INDD');
 END_FILE = 0;
 ON ENDFILE(INFILE) END_FILE = 1;
 CONTEXT = '';
 GET FILE(INFILE) EDIT(INREC) (L);
 DO WHILE (END_FILE = 0);
   /* PUT SKIP LIST (INREC); */
   CALL MD5(INREC,80,CONTEXT,RESULT,IWRK);
   GET FILE(INFILE) EDIT(INREC) (L);
 END;
 CLOSE FILE(INFILE);
 CALL MD5(INREC,0,CONTEXT,RESULT,IWRK);
 PUT SKIP LIST (RESULT);
 END TESTMD5;
//LKED.SYSIN DD DSNAME=CBTUSER.MD5.OBJ,DISP=SHR
//GO.SYSPRINT DD SYSOUT=*
//GO.INDD DD *
HELLO
