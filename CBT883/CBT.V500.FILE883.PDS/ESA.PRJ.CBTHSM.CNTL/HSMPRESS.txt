//COMPRESS JOB ?JOBPARM
//*
//****************************************************************/
//*  THIS SAMPLE JOB IS TO COMPRESS THE CONTROL DATA SETS.       */
//*                                                              */
//*  NOTE:  BEFORE RUNNING THIS JOB, YOU MUST SHUT DOWN ALL      */
//*         ALL INSTANCES OF DFSMSHSM THAT SHARE THE CDS'S.      */
//*                                                              */
//* REPLACE THE ?UID VARIABLE WITH THE NAME OF THE DFSMSHSM-     */
//* AUTHORIZED USER ID (1 TO 7 CHARACTERS).                      */
//*                                                              */
//* (NOTE: UID AUTHORIZATION IS VALID IN A NON-FACILITY CLASS    */
//* ENVIRONMENT ONLY, OTHERWISE, FACILITY CLASS PROFILES WILL BE */
//* USED FOR AUTHORIZATION CHECKING.)                            */
//*                                                              */
//* REPLACE THE ?NEW VARIABLE WITH AN EXTENSION NAME FOR THE     */
//* NEW CDS BEING CREATED FROM THE IMPORT.  BECAUSE OF THE NAME  */
//* CHANGE MADE TO THE CDS, MAKE SURE TO UPDATE THE ASSOCIATED   */
//* PROCLIB MEMBER WITH THE NEW CDS NAME(S).                     */
//*                                                              */
//* IF YOU WISH TO ENLARGE THE CDS, PREALLOCATE A LARGER DATA    */
//* SET WITH THE NEW SIZE (EITHER A NEW DATA SET, OR DELETE THE  */
//* OLD DATA SET AND REALLOCATE WITH SAME NAME) THEN IMPORT.     */
//* AGAIN, IF A NEW NAME IS USED, BE SURE TO UPDATE THE          */
//* ASSOCIATED PROCLIB MEMBER WITH THE NEW CDS NAME(S).          */
//*                                                              */
//* THIS PROCEDURE ASSUMES THAT THE MCDS AND BCDS ARE SINGLE     */
//* CLUSTER CDS'S.                                               */
//*                                                              */
//* Note: xCDS'S DD STMTS WITH DISP=OLD WILL KEEP OTHER JOBS     */
//*  FROM ACCESSING THE CDS'S DURING THE EXPORT/IMPORT PROCESS.  */
//****************************************************************/
//*
//ALLOCATE EXEC PGM=IEFBR14
//EXPMCDS DD DSN=?UID.EXPORT.MCDS,DISP=(,CATLG),
// UNIT=SYSDA,SPACE=(CYL,(20,2))
//EXPBCDS DD DSN=?UID.EXPORT.BCDS,DISP=(,CATLG),
// UNIT=SYSDA,SPACE=(CYL,(20,2))
//EXPOCDS DD DSN=?UID.EXPORT.OCDS,DISP=(,CATLG),
// UNIT=SYSDA,SPACE=(CYL,(20,2))
//*
//IDCAMS EXEC PGM=IDCAMS,REGION=512K
//MCDS DD DSN=?UID.MCDS,DISP=OLD
//BCDS DD DSN=?UID.BCDS,DISP=OLD
//OCDS DD DSN=?UID.OCDS,DISP=OLD
//SYSPRINT DD SYSOUT=*
//SYSIN DD *
 LISTCAT ENT(?UID.MCDS ?UID.BCDS ?UID.OCDS) ALL
 EXAMINE NAME(?UID.MCDS) INDEXTEST
 IF LASTCC = 0 THEN -
        EXPORT ?UID.MCDS ODS(?UID.EXPORT.MCDS) TEMPORARY
 IF LASTCC = 0 THEN -
        IMPORT IDS(?UID.EXPORT.MCDS) ODS(?UID.MCDS.?NEW) -
        OBJECTS -
         ((?UID.MCDS -
         NEWNAME(?UID.MCDS.?NEW)) -
          (?UID.MCDS.DATA -
           NEWNAME(?UID.MCDS.?NEW.DATA)) -
          (?UID.MCDS.INDEX -
           NEWNAME(?UID.MCDS.?NEW.INDEX))) -
        CATALOG(?UCATNAM)
 IF MAXCC = 0 THEN -
        DELETE ?UID.EXPORT.MCDS NONVSAM
 EXAMINE NAME(?UID.BCDS) INDEXTEST
 IF LASTCC = 0 THEN -
        EXPORT ?UID.BCDS ODS(?UID.EXPORT.BCDS) TEMPORARY
 IF LASTCC = 0 THEN -
        IMPORT IDS(?UID.EXPORT.BCDS) ODS(?UID.BCDS.?NEW) -
        OBJECTS -
         ((?UID.BCDS -
         NEWNAME(?UID.BCDS.?NEW)) -
          (?UID.BCDS.DATA -
           NEWNAME(?UID.BCDS.?NEW.DATA)) -
          (?UID.BCDS.INDEX -
           NEWNAME(?UID.BCDS.?NEW.INDEX))) -
        CATALOG(?UCATNAM)
 IF MAXCC = 0 THEN -
        DELETE ?UID.EXPORT.BCDS NONVSAM
 EXAMINE NAME(?UID.OCDS) INDEXTEST
 IF LASTCC = 0 THEN -
        EXPORT ?UID.OCDS ODS(?UID.EXPORT.OCDS) TEMPORARY
 IF LASTCC = 0 THEN -
        IMPORT IDS(?UID.EXPORT.OCDS) ODS(?UID.OCDS.?NEW) -
        OBJECTS -
         ((?UID.OCDS -
         NEWNAME(?UID.OCDS.?NEW)) -
          (?UID.OCDS.DATA -
           NEWNAME(?UID.OCDS.?NEW.DATA)) -
          (?UID.OCDS.INDEX -
           NEWNAME(?UID.OCDS.?NEW.INDEX))) -
        CATALOG(?UCATNAM)
 IF MAXCC = 0 THEN -
        DELETE ?UID.EXPORT.OCDS NONVSAM
 LISTCAT ENT(?UID.MCDS.NEW ?UID.BCDS.NEW ?UID.OCDS.NEW) ALL
/*
