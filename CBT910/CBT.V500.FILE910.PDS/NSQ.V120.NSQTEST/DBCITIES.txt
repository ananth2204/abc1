//DBCITIES JOB 1,'DBCITIES',MSGLEVEL=(1,1),MSGCLASS=H,CLASS=A,
//    NOTIFY=&SYSUID,COND=(4,LT),REGION=800M
//*
//* CREATE AND INITIALIZE DATABASE PRD1.DBCITIES ON VOL VVVVVV
//*
//   SET  NSQLOAD='NSQ.NSQLOAD'
//   SET  NSQCNTL='NSQ.NSQCNTL'
//   SET  DBDSN='PRD1.DBCITIES'
//*
//* TAILOR TABLE SIZE
//*
//TAILOR    EXEC PGM=IRXJCL,PARM='ZCOMP 400 82000'
//SYSEXEC   DD  DISP=SHR,DSN=&NSQCNTL
//SYSTSPRT  DD  SYSOUT=*
//SYSTSIN   DD  DUMMY
//NSQOUTP   DD  DISP=(NEW,PASS),DSN=&&OUTP,UNIT=SYSALLDA,
//          SPACE=(TRK,1),LRECL=80,RECFM=FB,DSORG=PS
//NSQOUTI   DD  DISP=(NEW,PASS),DSN=&&OUTI,UNIT=SYSALLDA,
//          SPACE=(TRK,1),LRECL=80,RECFM=FB,DSORG=PS
//*
//* CREATE VSAM CLUSTER
//*
//DEFINE1  EXEC PGM=IDCAMS
//SYSPRINT DD   SYSOUT=*
//SYSIN    DD   *
  DELETE      'PRD1.DBCITIES'
  SET  MAXCC = 0
  DEF CL(NAME('PRD1.DBCITIES') -
      NUMBERED    VOLUME(VVVVVV)  SHR(4 4)                  -
//         DD   DISP=SHR,DSN=&&OUTI
//*
//* INITIALIZE VSAM DATASET
//*
//INIT2    EXEC PGM=NSQDUT01,REGION=80M
//STEPLIB  DD   DSN=&NSQLOAD,DISP=SHR
//NSQOUT   DD   DISP=SHR,DSN=PRD1.DBCITIES
//SYSUDUMP DD   SYSOUT=*
//SYSIN    DD   *
TBLNAME=DBCITIES      MUST MATCH THE DBNAME
HASHALG=3            (HASH ALGORITHM, DEFAULT IS 1 FOR SHA-1)
//         DD   DISP=SHR,DSN=&&OUTP
//*
//* PREPARE DATA TO LOAD FROM SEQUENTIAL FILE
//*
//PREPARE  EXEC PGM=IKJEFT01
//SYSTSPRT DD   SYSOUT=*
//SYSTSIN  DD   *
 PROF NOPREF
 RECEIVE INDA('NSQ.NSQTEST(SAMPDATA)')  NODISPLAY NONAMES
 DA('PRD1.NSQ.NSQSAMP.SEQ')  VOL(VVVVVV)
//*
//* LOAD DATA FROM SEQUENTIAL FILE TO NOSQLZ DATABASE
//*
//LOAD     EXEC PGM=NSQDUT02
//STEPLIB  DD   DSN=&NSQLOAD,DISP=SHR
//SYSUDUMP DD   SYSOUT=*
//NSQOUT   DD   DISP=SHR,DSN=&DBDSN           OUTPUT DATABASE
//SYSUT1   DD   DISP=SHR,DSN=PRD1.NSQ.NSQSAMP.SEQ   INPUT SEQ. DATASET
//SYSIN    DD   *
* DUPLICATE KEYS ARE NOT INSERTED. THE FIRST ONE IS KEPT.
DUP=IGNORE                   IGNORE DUPLICATE KEYS (FIRST ONE WINS)
KEYLEN=75
DATALEN=55
//*
//* DISPLAY SOME STATISTICS FOR THE LOADED DATABASE
//*
//STATS    EXEC PGM=NSQDUT03,REGION=800M
//STEPLIB  DD   DSN=&NSQLOAD,DISP=SHR
//SYSUDUMP DD   SYSOUT=*
//NSQIN    DD   DISP=SHR,DSN=&DBDSN,
//         AMP=('BUFND=200')
