OUT1DA    CSECT
*  THIS IS A MOD THAT IS LOADED BY THE PROGRAM GENERATOR
*   TO HANDLE  THE WRITES TO OUT1  REC AREA = REG 10
*
         SAVE  (2,12),T,*
         BALR  11,0
         USING *,11
         ST    13,SAVEAREA+4
         LA    13,SAVEAREA
ML01     B     ML03               SW TO BRANCH TO OPEN FIRST TIME
ML02     WRITE DECBOUT,SF,DCBOUT,*+0,'S'
         CHECK DECBOUT
ML02A    L     13,SAVEAREA+4      RELOAD HIS
         LM    14,12,12(13)             REGS
         LA    15,0(0,0)          SET RETURN CODE TO 0
         LA    14,12(0,14)        BUMP 14 BY 12 TO RETURN TO ADD
         BR    14
ML03     OPEN  (DCBOUT,(OUTPUT))
         MVI   ML01+1,X'00'       NOP ML01
         MVC   ML02+16(4),0(14)  PUT AREA ARD IN WRITEH MACRO
         B     ML02A
SAVEAREA DC    18F'0'
DCBOUT   DCB   DDNAME=OUT3,DSORG=PS,MACRF=(WL),DEVD=DA
         DC    CL2'  '
         END
