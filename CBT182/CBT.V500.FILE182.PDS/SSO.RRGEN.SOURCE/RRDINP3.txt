RRDINP3   CSECT
*  THIS  MODULE  IS CALLED BY THE GENERATOR PROGRAM
*         TO HANDLE READ INP1  / ONLY DIFF BETWEEN INP1 2 & 3 ARE
*          REG USED FOR REC AREA AND DDNAME IN DCB
         SAVE  (2,12),T,*
         BALR  12,0
         USING *,12
         ST    13,SAVEAREA+4
         LR    4,13
         LA    13,SAVEAREA
         ST    13,8(4)
ML01     B     ML03             1ST SWITCH
ML02     GET   DCBIN,RECAREA
         LA    9,RECAREA      LOAD 7 WITH REC AREA ADR                *
ML02A    L     13,SAVEAREA+4  RELOAD HIS REGS
         LM    10,12,60(13)    ASSIGN TO HIS INP1 REC AREZ
         LM    14,8,12(13)     BYPASS LOADING 9 SINCE IT IS
         LA    15,0(0,0)      SET RETURN CODE TO 0
         LA    14,12(0,14)    BUMP 14 BY 12 TO RETURN TO ADD TO REC CT
         BR    14
ML03     OPEN  (DCBIN)
         MVI   ML01+1,X'00'   NOP 1ST TIME SWITCH
         B     ML02A
ML04     L     13,SAVEAREA+4
         LM    14,12,12(13)
         LA    15,0(0,0)
         BR    14
SAVEAREA DC    18F'0'
RECAREA  DS    CL900
DCBIN    DCB   DDNAME=INP3,DSORG=PS,MACRF=GM,EODAD=ML04
         END
