* USS Commands and subcommands - 03.04.2017
* Samples for the EX (UNIX/UNIXSU/UNIXENV/UNIXSUENV/UDLIST/UFDIR/UFFIL)
*                           line command from YCLMACRX
* all commands can also be called from outside EDIT/VIEW:
* TSO YCLMACRX unix ls
* TSO YCLMACRX udlist /u
* TSO YCLMACRX ufdir  /u *c*
* TSO YCLMACRX uffil  /u *c*
* TSO YCLMACRX unix ls
* This way could also be used in a Rexx Batch|
/*+------------------------------------------------------------------+*/
/*| YCLMACRX     (c)  YCOS Yves Colliard Software                    |*/
/*|                   2004-17                                        |*/
/*|                   Mail yves.colliard§ycos.de                     |*/
/*|                   Use at your own RISK|                          |*/
/*+------------------------------------------------------------------+*/



unix pwd
: show current working directory

===================================================================

unix cd
: change directory

unix cd
: home dir

unix cd dir
: relative dir

unix cd /dir1/dir2
: absolute dir

unix cd old new
: replace old to new in current working dir (cwd)

unix cd -
: go to previous dir

unix cd ..
: go to parent dir

===================================================================

unix mkdir yvest
: create directory yvest under cwd

unix mkdir /yvest
: create directory yvest under / (root)

===================================================================

unix ln -s /mainview /u/yves/symblink_to_mainview
: Create symbolic link

===================================================================

unix ls -l
: details

unix ls -E
: extended attributes

unix ls -m
: names coma separated

unix ls -n
: UID and GID number

unix ls -R
: subdirectories

unix ls -t
: sort by last modification time

unix ls -u
: sort by last access time

unix ls -W
: audit bits

===================================================================

unix chmod, extattr, chown, chgrp
: change file "attributes"

===================================================================

unix cat
: concatenate files

unix cat /u/zfs/YVES/yves.rex
: list to screen

unix cat /u/zfs/YVES/yves.rex >/u/zfs/YVES/n.rex
: list to dataset

unix cat /u/zfs/YVES/yves.rex >>/u/zfs/YVES/n.rex
: append list to dataset

unix cat "//'SYS1.PARMLIB(ADYSET00)'"
: list mvs dataset to screen

===================================================================

unix head, tail
: list first/last lines of file on screen - defaut 10

unix head -n 5 /u/zfs/YVES/yves.rex
: list first 5 lines to screen

unix tail -n 3 /u/zfs/YVES/yves.rex >>/u/zfs/YVES/n.rex
: append last 3 lines to dataset

===================================================================

unix rm
: remove file or directory

unix rm *
: remove all files in directory

unix rm -r *
: remove all all all all
     -r or -R recursive
     -i prompt are you sure?
     -v list removed files

===================================================================

unix cp
: copy file or directory

unix ,
 cp -F lf        /u/zfs/YVES/ycos1.tx ,
 "//'YVES.CRLF(DATA)'"
: copy an "lf" file to an MVS to get it "CRLF"

===================================================================

unix mv
: move file or directory

===================================================================

unix find
: search file
  - many parms

unix find / -name "*.rex"
: find all *.rex files starting from root

unix find . -name "*.rex"
: find all *.rex files starting from current working dir

     -perm  : permission bits
     -atime : access time
     -ctime : changed attributes time
     -mtime : modified time
     -ext   : extended attributes
     -newer : file newer than the one giving
     -size  : file size
     -type  : file type
     ...

===================================================================

unix grep
: find data within files

unix grep 'print' *.c
: find all files (within *.c) with 'print' string

unix grep -i 'print' *.c
: find all files (within *.c) with 'print' string - regardles of case

unix grep -n 'print' *.c
: find all files (within *.c) with 'print' string - give line #

unix grep -c 'print' *.c
: count all matches in files (within *.c) with 'print' string

unix grep -l 'print' *.c
: list all files (within *.c) with matches 'print' string

unix grep -E 'print|comment' *.*
: find all files (within *.*) with 'print' or 'comment' string
  -E using regular expression
  | - german for ]

unix grep -E 'ÝcCN¨omment' *.*
: find all files (within *.*) with 'comment' 'Comment' 'Nomment'
  -E using regular expression
  Ý (x'AD') - german for Ä
  ¨ (x'BD') - german for Ü

===================================================================

unix cmp
: compare files

unix cmp cmd1.tx  cmd2.tx
: compare files

unix cmp -l cmd1.tx  cmd2.tx
: compare files - displays the byte number (in decimal) and the
                  differing bytes (in octal format)

unix cmp -lx cmd1.tx  cmd2.tx
: compare files - displays the byte number (in decimal) and the
                  differing bytes (in hexadecimal format)

unix cmp -s cmd1.tx  cmd2.tx
: compare files - Suppresses output and returns a nonzero status
                  if the files are not identical

===================================================================

unix diff
: compare files and find differences

unix diff ycos1.tx ycos2.tx
: compare files and find differences

unix diff -c ycos1.tx ycos2.tx
: find differences - Shows n lines of context before and after each change

===================================================================

unix df
: display file system

unix df -P
: display file system with more details

unix df -v
: display file system with status

unix df -k
: display file system in 1024K blocks

unix df -S
: display file system in 1024K blocks

===================================================================

unix man
: display command help

unix man ls
: display command help for "ls" command

===================================================================

unix who
: display user and system information

unix who -a
: all information

===================================================================

unix whoami
: display "me"

unix id

===================================================================

unix su
: set superuser

===================================================================

unix su
: set superuser

===================================================================

unix ps
: display process information (all info - only superuser) - many parms

unix ps -e
unixsu ps -el

===================================================================

bpxmtext errcode
: display error code information

===================================================================

unix pax
: create/extract archive file - many parms

===================================================================

unix kill
: end a process

===================================================================

unix uptime
: time since last ipl and other infos

===================================================================

unix wc
     -c      : byte count
     -l      : line count
     -m      : character count
     -w      : word count
: count
unix wc yves.rex

===================================================================

unix date
: Datum / Uhrzeit - many format parms

unix date +"%d"."%m"."%y  "Weekday:"%A"

unix date +%H:%M:%S

===================================================================

unix echo
: output information to stdout

unix echo they are $(ls | wc -l) files in this directory $(pwd)

===================================================================

Using Pipes:

unix ls -ltr | tail -n 4
: list 4 mostly referenced files

unix ls | wc -l
: number of files

unix find *.tx | wc -l
: number of files with names *.tx

unix cat "//'SYS1.PARMLIB(ADYSET00)'" | grep 'SUPPLIED'
: cat MVS dataset to Stdout | (Pipe) -> grep from Stdin
  find line(s) with word SUPPLIED in MVS file

===================================================================

zlsof Ä-pÄpidsÜ]Ä-aÄasidsÜ]Ä-jÄjobsÜÜ Ä-uÄusersÜÜ Ä-cÜ Ä-dÜ Ä-tÜ
      Ä-iÜ Ä-lÜ Ä-nÜ Ä-suÜ Ä-vÜ
      Ä-m maxtimeÜ Ä-rwÄsecondsÜÜ Äpathname]pipe]socketÜ
: Displays information about open files, sockets, and pipes

unixsu /bin/zlsof /u/fzi5297

===================================================================

unix zfsadm fsinfo Ä-aggregate aggr ] -path pth ] -allÜ
                   Ä-basic ] -owner ] -full ] -resetÜ
                   Ä-select criteria ] -exceptionsÜ
                   Ä-sort name]requests]responseÜÄ-levelÜÄ-helpÜ
: File System Information (also as MVS Modify/F command)

Select criteria:
CE*  Had XCF communication failures between client systems and owning systems.
DA*  Are marked damaged by the zFS salvager.
DI*  Are disabled for reading and writing.
GD*  Are disabled for dynamic grow.
GF*  Had failed dynamic grow attempts.
GR   Are currently being grown.
IE*  Have had disk I/0 errors.
L*   Have less than 1 MB of free space, which means that increased XCF traffic
     is required for writing files.
NS   Are mounted NORWSHARE.
OV   Contain extended (v5) directories that are using overflow pages.
Q*   Are currently quiesced.
RO   Are mounted read-only.
RQ   Had application activity.
RW   Are mounted read/write.
RS   Are mounted RWSHARE.
SE*  Have returned ENOSPC errors to applications.
TH   Have sysplex thrashing objects in them.
V4   Are version 1.4.
V5   Are version 1.5.
V5D' Are disabled for conversion to version 1.5.
WR   Had application write activity.
  * = exceptions

===================================================================

* iconv convert from ger to us
* http://de.wikipedia.org/
*         wiki/Extended_Binary_Coded_Decimals_Interchange_Code
unix ,
 iconv -f IBM-273 -t IBM-1047 ,
  /u/yves/my.javao,
  >/u/yves/my.java

===================================================================

unixsu zfsadm define -aggregate YVES.NEW.ZFS -cylinders 15
: create a zfs

unixsu zfsadm format -aggregate YVES.NEW.ZFS -compat
: format a zfs

unixsu /usr/sbin/mount -f YVES.NEW.ZFS      +
                -t ZFS                      +
                -a unmount                  +
                /u/zfs/YVES/yvest
: Mount the file system

===================================================================

unix /usr/lpp/wbem/bin/cimcli ei IBMzOS_Incident -o xml
unixenv +
env_variable_start
PATH=/bin:.:/usr/lpp/wbem/bin
LIBPATH=/lib:/usr/lib:/usr/lpp/wbem/lib:.
env_variable_end
        cimcli ei IBMzOS_Incident
        cimcli ei IBMzOS_Process
        cimcli ei IBMzOS_OSProcess
        cimcli ei IBMzOS_ComputerSystem
        cimcli ei IBMzOS_OperatingSystem
        cimcli ei IBMzOS_BaseBoard
        cimcli ei IBM_BaseBoard
        cimcli ni
        cimcli ei +
IBMzOS_SFMAttributes
IBMzOS_IncidentIndication
        cimcli nc
        cimcli ec
        cimcli ei IBMzOS_Incident


* Create symbolic link
unix ln -s /mainview /u/yves/symblink_to_mainview
*------------------------------------------------------

*------------------------------------------------------
* UDLIST Samples
* display the path using UDLIST - 3.17
udlist /u
udlist /u/zfs/YVES
udlist /u/zfs      +
             /YVES +
       /DIR

*------------------------------------------------------
* UFDIR  Samples
* find and display all directories within
* first parm is path
* second parm is directory name (also generic)
ufdir  /u o*
ufdir  /u/zfs/YVES *u*
* the directory name CANNOT be continued|||
ufdir  /u/zfs/YVES +
       *I*

*------------------------------------------------------
* UFFIL  Samples
* find and display all files within given
* name within a given directoy tree
* first parm is path
* second parm is directory name (also generic)
uffil  /u/zfs/YVES +
       *y*
uffil  /u/zfs/YVES +
       *
* the directory name CANNOT be continued|||
uffil  /u          +
       *C*

*------------------------------------------------------
* files
sdsf d omvs,f
*------------------------------------------------------
* phys file systems
sdsf d omvs,pfs
*------------------------------------------------------
* options
sdsf d omvs,o
*------------------------------------------------------
* limits
sdsf d omvs,l
* all ps
sdsf d omvs,a=all

*------------------------------------------------------
* tso user omvs
lu yves    omvs noracf
*------------------------------------------------------
* tso group omvs
lg mygrp   mmvs noracf

* zfs
unix   zfsadm configquery -all
unix   zfsadm configquery -aggrgrow
unix   zfsadm configquery -level
unix   zfsadm lsaggr
unix   zfsadm lsfs -long
unix   zfsadm aggrinfo -long
sdsf F ZFS,QUERY,FILE
sdsf F ZFS,QUERY,LEVEL

* Terminate/Force a Process/Thread
sdsf F BPXOINIT,TERM=pidÄ.tidÜ
sdsf F BPXOINIT,FORCE=pidÄ.tidÜ

*------------------------------------------------------
* write to console
*------------------------------------------------------

unix echo blabla > /dev/console

