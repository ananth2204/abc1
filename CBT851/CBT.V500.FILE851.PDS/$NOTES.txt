             Notes for running the RMMCOPY tool


Introduction.

The RMMCOPY tool was written to copy all files from one tape to
another, for tapes managed by RMM.  Whilst this is a simple process to
do manually via a batch job, with modern tapes able to contain many
thousands of files, a manual approach soon becomes very cumbersome.
There are commercial products available to copy tapes, however, that
costs money. This tool was written to perform such a copy without
having to purchase a package. The tool should copy tapes with all
valid block sizes at the time of writing, including up to 256K.

The tool copies all DCB attributes and the expiry date from the source
tape's datasets. You can override the expiry date to a single fixed
value, for all datasets, by modifying the settings in the RMMEXEC (see
below for details).

One restriction that the tool has, is that where there are more than
255 files on the tape to be copied, the output tape must first have a
dummy file written to it, so that its VOLSER is known. This is
required because a maximum of 255 steps are permitted in a job. Since
there is no DD referback mechanism available between jobs, the
VOLSER of the output tape must be known in advance and available to
the subsequent jobs. The result of this approach is that all files
on such an output tape appear one file sequence number later than they
do on the input tape.


Use.

- Update the job in member RMMALLOC, according to the instructions in
  the job, and run it. This job creates 2 datasets required by RMM
  to produce the report in the next job.

- Update the job in member RMMLIST, according to the instructions in
  the job, and run it. This generates a list of the datasets on the
  tape to be copied, as known to RMM. The DCB attributes, expiry date,
  file sequence number, tape location and other information for these
  datasets are listed. Headings are removed from the list, to
  simplify later processing of this list.

- Identify from the RMMLIST job's output dataset whether more than 255
  files are on the tape.  If there are more than 255 files on the
  input tape, run the job in member RMMDUMMY. This writes a dummy
  dataset to the first file on a scratch tape.  Note the VOLSER of the
  tape written to.  This will be used as the output tape for the copy.

- Customise the REXX exec in member RMMEXEC, according to the
  instructions in the exec.

- Update the job in member RMMGEN, according to the instructions in
  the job, and run it. The RMMGEN job generates a PDS dataset, with
  members containing the jobs to copy the tape datasets from the input
  tape to the output tape.

- Review the jobs generated by RMMGEN, update if required, and run
  them one at a time, in order,
  to copy the tape.  The jobs to copy the tape retain the input
  tape on the same drive, for all steps in each job. Between jobs, the
  tape will be dismounted.  Similarly for the output tape. The jobs
  assume that the new datasets written to the output tape are not to
  be cataloged, since they will have the same names as those on the
  input tape. You can of course edit the JCL to change the output
  dataset names and/or catalog them, according to your requirements.


